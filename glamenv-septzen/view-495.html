<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>技術/歴史/zip,gzip,zlib,bzip2 - Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)</title>
<!-- favicon 2017's reference:
https://developers.google.com/web/fundamentals/design-and-ui/browser-customization/
https://msdn.microsoft.com/ja-jp/library/dn455106(v=vs.85).aspx
https://developer.chrome.com/multidevice/android/installtohomescreen
https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html
-->
<link rel="shortcut icon" href="../favicons/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="icon" href="../favicons/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="apple-touch-icon" sizes="57x57" href="../favicons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="../favicons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="../favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="../favicons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="../favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="../favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="../favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="../favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="../favicons/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="../favicons/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="../favicons/favicon-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="../favicons/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-160x160.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-196x196.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../favicons/favicon-32x32.png" sizes="32x32">

<!-- browserconfig.xml : https://msdn.microsoft.com/ja-jp/library/dn455106(v=vs.85).aspx -->
<meta name="msapplication-TileColor" content="#990000">
<meta name="msapplication-TileImage" content="../favicons/mstile-144x144.png">

<!-- these favicon files were generated by https://ao-system.net/favicongenerator/ , thanks!!(2017-02-18) -->

<style type="text/css"></style>

<link href="./css/pcbrowser.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/pcbrowser_plugins.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/pcbrowser_wiki.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/print.css" rel="stylesheet" type="text/css" media="print"/>
</head>
<body>
<!-- body start -->
<div class="body">
<div style="display: inline"><a name="pagetop"></a></div>
<div id="header-wrap">
<img src="./images/logo1.jpg" style="float: left; margin-right: 1em;"/>
<a href="./index.html" title="Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)"><img src="./icons/home.png" alt="home"/>&nbsp;Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)</a>


<h1 style="margin-bottom: 10px;">技術/歴史/zip,gzip,zlib,bzip2</h1>

<div style="clear: both;"></div>
</div><!-- //header-wrap -->

<!-- content-wrap start -->
<div id="content-wrap"><div class="contents_s">

<!-- data_main -->
<div class="data_main">

<div class="data_attrs_pre">
作成日: 2009-11-22 17:11:47 &nbsp; / &nbsp; last updated at: 2010-04-03 00:01:24<br>
カテゴリ: <a href="category-20.html">Linux</a>&nbsp;<a href="category-38.html">UNIX</a>&nbsp;<a href="category-8.html">Windows</a>&nbsp;</div>

<div class="data_body">
<ul class="plugin_navi">
<li>[&nbsp;<a href="./view-638.html" title="技術/歴史/FAQ/キーボード・マウスコネクタの&quot;PS/2&quot;について">Prev</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-1314.html" title="技術/運用管理/Fabric">Next</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-23.html" title="技術">技術</a>&nbsp;]</li>
</ul>
<hr class="full_hr" />

<p class="paragraph">
お仕事絡みで、ZIPファイルの歴史が気になったので調べてみた。
<br />
前々から何となく「gzipとzlibとzipってどう違うんだろう」とは思っていたのだけれど、WindowsでLhacaやLhaplusなどのアーカイブソフト、あるいはXP以降ならOSの機能としてデフォルトでzip圧縮できるし、Linux/UNIXでも2-3回コマンドラインオプションを試行錯誤してmanページ見ればtar.gz作ったり逆にWindows上で圧縮したzipを適当に解凍できるので「ま、いっか。」で済ませてた。
<br />
でもせっかくなので、技術的な詳細には突っ込まないが、ざっくりとした歴史や流れをWikipediaを中心に追ってみた。
<br />
※殆どの記述をWikipediaに依っている為、本記事自体の信頼性はWikipediaと同等かそれに劣るものとして下さい。正確性は無保証、Wikipediaの寄せ集め。自分用のメモです。
<br />
</p>

<p class="paragraph">
簡単に紹介：
<br />
</p>
<ul><li> ZIP : DOS発祥の圧縮アーカイブソフト向けファイルフォーマット。本家はPKZIPで、圧縮アルゴリズムとして採用され有名になった内の一つが&quot;Deflate&quot;アルゴリズム。UNIX/Linux上の実装として&quot;Info-ZIP&quot;プログラムが開発され、これが現在の&quot;zip&quot;, &quot;unzip&quot;コマンドである。</li>
<li> gzip(GNU zip) : 元々compressというUNIX上の圧縮プログラムがあったが圧縮アルゴリズムの特許問題で普及しなかったため、代替として開発された。名前に&quot;zip&quot;が含まれているがファイルフォーマットとしては互換性のない独自路線。圧縮アルゴリズムとしてPKZIPの&quot;Deflate&quot;を採用しているのが共通点といえば共通点。</li>
<li> zlib : gzipのメイン開発者が、&quot;Deflate&quot;アルゴリズム処理部分だけを緩いライセンスで実装したライブラリ。Linux/UNIXだけでなく、Windowsなど幅広いプラットフォームに移植されている。</li></ul>


<hr />
<ul><li><a href="#idd2c88b">&quot;Lempel-Ziv&quot;可逆データ圧縮アルゴリズムの歴史とcompress哀史</a><ul><li><a href="#id60a848">&quot;LZ77&quot;に端を発する&quot;LZ&quot;ファミリーの系譜</a></li>
<li><a href="#idd883fb">LZWアルゴリズムの特許問題とcompressツール</a></li>
<li><a href="#id2e080c">参考資料</a></li></ul></li>
<li><a href="#idc8a76e">ZIPファイルフォーマットの歴史</a><ul><li><a href="#id356b8a">PKZIPの誕生</a><ul><li><a href="#id73aebe">少し寄り道：日本発祥のLHA形式, LZH形式</a></li></ul></li>
<li><a href="#ide69848">ZIPファイルフォーマット</a></li>
<li><a href="#id7e6052">亜種の誕生と激動の1990年代前半, &quot;Deflate&quot;アルゴリズム</a></li>
<li><a href="#idd4c9b6">まとめと参考資料</a></li></ul></li>
<li><a href="#id7c8cb2">もう一つの流れ：gzip, zlib</a><ul><li><a href="#ida1dffd">gzip</a></li>
<li><a href="#id3cb161">zlib</a></li>
<li><a href="#id232d6c">gzip, zlib, zipは独立してシステムにインストール出来る</a></li>
<li><a href="#ida9c29e">bzip2について</a></li>
<li><a href="#id3660a3">gzipファイルフォーマットについての極々簡単な確認</a></li></ul></li></ul>
<hr />
<h3 id="idd2c88b">&quot;Lempel-Ziv&quot;可逆データ圧縮アルゴリズムの歴史とcompress哀史</h3>

<p class="paragraph">
zipファイルの足取りを辿る前に、可逆圧縮アルゴリズムの一つ、&quot;LZ&quot;データ圧縮アルゴリズムの歴史を追ってみる。
<br />
&quot;LZ77&quot;( or LZ1)と呼ばれる1977年発表のアルゴリズムから様々な亜種が派生し現在に至っている。
<br />
その中の&quot;LZW&quot;圧縮の特許問題で大きく影響を受けたUNIXの圧縮コマンド、compressコマンドについても簡単に調べてみた。
<br />
</p>

<h4 id="id60a848">&quot;LZ77&quot;に端を発する&quot;LZ&quot;ファミリーの系譜</h4>

<p class="paragraph">
まず Jacob Ziv, Abraham Lempelの二人が作ったデータ圧縮アルゴリズム、&quot;LZ&quot;ファミリーの系譜をまとめる。
<br />
</p>

<ul><li> 1977年：Jacob Ziv と Abraham Lempel によるデータ圧縮の論文、&quot;A Universal Algorithm for Sequential Data Compression&quot; が発表される。&quot;LZ&quot;で始まる名前のデータ圧縮アルゴリズムの源流である。この論文によるデータ圧縮アルゴリズムは &quot;LZ1&quot; または1977年の発表という事から &quot;LZ77&quot; と呼ばれる。</li>
<li> 1978年：同じくこの二人によるIEEEの論文 &quot;Compression of Individual Sequences via Variable Rate Coding&quot; にて LZ77 の改良版が発表され、&quot;LZ2&quot; または1978年の発表という事から &quot;LZ78&quot; と呼ばれる。</li>
<li> 1982年：LZ77の改良版である &quot;LZSS&quot;(Lempel-Ziv-Storer-Szymanski) が James Storer と Thomas Szymanski による &quot;Data compression via textual substitution&quot;(Journal of the ACM) で発表される。幾つかのアーカイブソフトやBIOSの世界で現在もサポートされている。</li>
<li> 1984年：LZ78の改良版である &quot;LZW&quot;(Lempel-Ziv-Welch) 圧縮アルゴリズムが Terry Welch による &quot; A Technique for High-Performance Data Compression&quot;(IEEE) で発表される。</li>
<li> 1993年：LZ77の改良版である &quot;Deflate&quot;圧縮が Phil Katz のPKZIP 2.0で実装される。</li>
<li> 1995年：LZ77の改良版である &quot;LZX&quot;が Jonathan Forbes と Tomi Poutanen により、Amigaのファイルアーカイバとして公開される。後にForbesはMicrosoft社に移り、Microsoft Cabinetファイル(.CAB)の圧縮方式としてLZX圧縮をサポートすることになる。またMicrosoft Compressed HTML Helpファイル(.CHM)の圧縮にも採用される事になる。</li>
<li> 1996年：LZ77の改良版である &quot;LZO&quot;(Lempel-Ziv-Oberhumer) 圧縮フォーマットの実装が Markus F.X.J. Oberhumer により始まる。</li>
<li> 1996年：LZ77の改良版である &quot;LZMA&quot;(Lempel-Ziv-Markov chain-Algorithm) 圧縮フォーマットの実装がIgor Pavlov により始まる。&quot;Markov&quot;とは「マルコフ連鎖」「マルコフ過程」のマルコフであり、ロシア人数学者 アンドレイ・マルコフ にちなんで命名されたらしい。<ul><li> （すみません、LZMA自体の論文や出典は探し切れませんでした。御存知の方居たら教えて下さい）</li></ul></li></ul>

<p class="paragraph">
LZファミリーについては他にも種類があるようだが、当記事の趣旨であるzipファイルフォーマットに関連しているものについてはおおよそ上記8種類だろう。
<br />
</p>

<p class="paragraph">
&quot;LZMA&quot;については、Igor Pavlov によるオープンソースのアーカイブソフト &quot;7-Zip&quot; の開発と共にリファレンス実装が進められている。
<br />
7-ZipのSourceForge.netからダウンロードしたlzmaのライブラリソースに、&quot;history.txt&quot;というファイルが入っている。その末尾に1996年からのLZMAと7-Zipの歩みが簡単にまとめられている。
<br />
</p>
<pre>HISTORY of the LZMA
-------------------
  2001-2008:  Improvements to LZMA compressing/decompressing code, 
              keeping compatibility with original LZMA format
  1996-2001:  Development of LZMA compression format

  Some milestones:

  2001-08-30: LZMA compression was added to 7-Zip
  1999-01-02: First version of 7-Zip was released
</pre>

<h4 id="idd883fb">LZWアルゴリズムの特許問題とcompressツール</h4>

<p class="paragraph">
UNIXコマンドの一つ&quot;compress&quot;は、LZWアルゴリズムを採用したデータ圧縮ツールである。圧縮されたファイルの拡張子は&quot;.Z&quot;であり、tarファイルを圧縮した場合は拡張子を&quot;.tar.Z&quot;や&quot;.taz&quot;とする習慣がある。
<br />
ところがLZWアルゴリズムが特許で保護されており、ロイヤリティを支払わないと使えない事が判明する。これにより、代替であり圧縮率も良いことからGNU zipなど他のzip圧縮がLinux/UNIX上で広まる事になる。
<br />
</p>

<p class="paragraph">
これはGIF特許問題としても有名であるが、compressツールとの関連部分についてまとめる。簡単に時系列に書いてみる。
<br />
</p>
<ul><li> 1981年 : LZ78が U.S. Patent 4,464,650 として出願される。 → 1984年公開<ul><li> <a class="externallink" href="http://www.google.com/patents?vid=4464650" target="_blank">http://www.google.com/patents?vid=4464650</a></li></ul></li>
<li> 1983年 : LZWが U.S. Patent 4,558,302 として出願される。Sperry社保有。 → 1985年12月公開<ul><li> <a class="externallink" href="http://www.google.com/patents?vid=4558302" target="_blank">http://www.google.com/patents?vid=4558302</a></li></ul></li>
<li> 1984年 : LZWアルゴリズム発表, Spencer Thomasによりcompressツール実装開始</li>
<li> 1985年 : compressがUSENETで公開、同時にU.S. Patent 4,558,302 公開</li></ul>

<p class="paragraph">
つまり論文発表の前に、特許出願を行っていたのだ。
<br />
ところが1984年発表の論文 &quot;A Technique for High-Performance Data Compression&quot; ではSperry社による特許出願に言及されていなかった。そのため Spencer Thomas が特許については気づかずに、論文を元にcompressを実装したのが1984年である。その後 Joseph M. Orost が Spencer とその他のチームを率いて compress ツールの&quot;final&quot;バージョン(4.0)を仕上げ &quot;comp.sources.unix&quot; USENETグループでフリーソフトとして公開したのが1985年。ところが同年12月、LZWの特許が公開され、このため折角フリーソフトとして公開されたcompressだが、実際に使うにはロイヤリティを支払わなければならない事になってしまった。そのため人々の人気はLinuxベースのOSなどで、代替アルゴリズムを使ったgzipやbzip2へとシフトしてしまう。
<br />
問題のLZWのアルゴリズムだが、米国では 1983年出願 → 1985年公開 → 2003年期限切れとなっている。日本では 1984年出願 → 1996年公開 → 2004年期限切れとなっている。
<br />
</p>

<p class="paragraph">
1993年にPhil KatzによるPKZIP-2.0の&quot;Defelate&quot;圧縮アルゴリズムが発表された後、LZWを使うcompressに代わり&quot;Deflate&quot;による圧縮を行う&quot;gzip&quot;(GNU zip)が開発されることになる。
<br />
</p>

<h4 id="id2e080c">参考資料</h4>

<p class="paragraph">
&quot;LZ&quot;ファミリー(ja)：
<br />
</p>
<ul><li> <a class="externallink" href="http://ja.wikipedia.org/wiki/LZ77" target="_blank">http://ja.wikipedia.org/wiki/LZ77</a></li>
<li> <a class="externallink" href="http://ja.wikipedia.org/wiki/LZ78" target="_blank">http://ja.wikipedia.org/wiki/LZ78</a></li>
<li> <a class="externallink" href="http://ja.wikipedia.org/wiki/LZSS" target="_blank">http://ja.wikipedia.org/wiki/LZSS</a></li>
<li> <a class="externallink" href="http://ja.wikipedia.org/wiki/LZMA" target="_blank">http://ja.wikipedia.org/wiki/LZMA</a></li>
<li> <a class="externallink" href="http://ja.wikipedia.org/wiki/LZW" target="_blank">http://ja.wikipedia.org/wiki/LZW</a></li>
<li> <a class="externallink" href="http://ja.wikipedia.org/wiki/Deflate" target="_blank">http://ja.wikipedia.org/wiki/Deflate</a></li></ul>

<p class="paragraph">
&quot;LZ&quot;ファミリー(en)：
<br />
</p>
<ul><li> <a class="externallink" href="http://en.wikipedia.org/wiki/LZ77_and_LZ78" target="_blank">http://en.wikipedia.org/wiki/LZ77_and_LZ78</a></li>
<li> <a class="externallink" href="http://en.wikipedia.org/wiki/Lempel-Ziv-Storer-Szymanski" target="_blank">http://en.wikipedia.org/wiki/Lempel-Ziv-Storer-Szymanski</a></li>
<li> <a class="externallink" href="http://en.wikipedia.org/wiki/Lempel-Ziv-Markov_chain_algorithm" target="_blank">http://en.wikipedia.org/wiki/Lempel-Ziv-Markov_chain_algorithm</a></li>
<li> <a class="externallink" href="http://en.wikipedia.org/wiki/Lempel-Ziv-Oberhumer" target="_blank">http://en.wikipedia.org/wiki/Lempel-Ziv-Oberhumer</a></li>
<li> <a class="externallink" href="http://en.wikipedia.org/wiki/LZX" target="_blank">http://en.wikipedia.org/wiki/LZX</a></li>
<li> <a class="externallink" href="http://en.wikipedia.org/wiki/DEFLATE_%28algorithm%29" target="_blank">http://en.wikipedia.org/wiki/DEFLATE_%28algorithm%29</a></li></ul>

<p class="paragraph">
&quot;LZ&quot;ファミリー関連：
<br />
</p>
<ul><li> <a class="externallink" href="http://xavprods.free.fr/lzx/" target="_blank">http://xavprods.free.fr/lzx/</a></li>
<li> <a class="externallink" href="http://en.wikipedia.org/wiki/7-Zip" target="_blank">http://en.wikipedia.org/wiki/7-Zip</a></li>
<li> <a class="externallink" href="http://www.patentstorm.us/patents/5532693/description.html" target="_blank">http://www.patentstorm.us/patents/5532693/description.html</a></li>
<li> <a class="externallink" href="http://sourceforge.net/projects/sevenzip/" target="_blank">http://sourceforge.net/projects/sevenzip/</a></li>
<li> <a class="externallink" href="http://www.oberhumer.com/opensource/lzo/" target="_blank">http://www.oberhumer.com/opensource/lzo/</a></li></ul>

<p class="paragraph">
&quot;compress&quot;ツール：
<br />
</p>
<ul><li> <a class="externallink" href="http://ja.wikipedia.org/wiki/UNIX_Compress" target="_blank">http://ja.wikipedia.org/wiki/UNIX_Compress</a></li>
<li> <a class="externallink" href="http://en.wikipedia.org/wiki/Compress" target="_blank">http://en.wikipedia.org/wiki/Compress</a></li></ul>

<p class="paragraph">
その他：
<br />
</p>
<ul><li> mixi Engineers’ Blog ≫ 圧縮データベースを使おう<ul><li> <a class="externallink" href="http://alpha.mixi.co.jp/blog/?p=191" target="_blank">http://alpha.mixi.co.jp/blog/?p=191</a></li></ul></li>
<li> Focus on Technology：静かな注目を集める圧縮アルゴリズム「LZMA」 - ITmedia エンタープライズ<ul><li> <a class="externallink" href="http://www.itmedia.co.jp/enterprise/articles/0906/19/news003.html" target="_blank">http://www.itmedia.co.jp/enterprise/articles/0906/19/news003.html</a></li></ul></li>
<li> LZW特許問題で影響を受けたソフトウェアや対応の一覧<ul><li> <a class="externallink" href="http://www.frugalcorner.com/lzw/lzwfree.html" target="_blank">http://www.frugalcorner.com/lzw/lzwfree.html</a></li></ul></li></ul>

<h3 id="idc8a76e">ZIPファイルフォーマットの歴史</h3>

<p class="paragraph">
ZIPは圧縮(or非圧縮)ファイルデータを格納する為のアーカイブファイル向けファイルフォーマットである。誤解しやすいが、圧縮アルゴリズムの名前では無い。
<br />
圧縮アルゴリズム自体はLZ77の改良版である&quot;Deflate&quot;アルゴリズムを標準でサポートする(PKZIP 2.0より)。
<br />
</p>

<h4 id="id356b8a">PKZIPの誕生</h4>

<p class="paragraph">
ZIPの誕生は1989年。Phil KatzによりDOS上のツール、PKZIPとして産声をあげた。
<br />
</p>

<p class="paragraph">
元々Phil KatzはAllen-Bradley社にプログラマとして雇われていた。1986年にWisconsin州はMilwaukee市にあったGraysoftで働く為にAllen-Bradley社を辞める。Graysotでは、Thom HendersonのARCというデータ圧縮アーカイバソフトの代替を開発している。
<br />
System Enhancement Associates(SEA)により開発されたARCは初期のBBSネットワークで人気があり、SEAのBBSでCのソースコードも入手できた。
<br />
Katzは一部をアセンブラで書き直し、最終的にPKARCという名前のシェアウェアとして公開する。
<br />
1986年にKatzは自分の会社であるPKWAREを興す。Graysoftには1987年まで在籍している。
<br />
</p>

<p class="paragraph">
PKARCはアセンブラで書かれている事もあり、速度面で有利で人気を博す。ところが拡張子が&quot;.ARC&quot;のままであったり、ソースコード中にSEAが著作権を持つソースが混入していたりと、SEAにより商標・著作権の侵害で訴えられている。
<br />
1988年はPKWAREとSEAの対決の年で、KatzはPKARCの販売を止め、代わりに名前と拡張子が異なるだけの&quot;PKPAK&quot;という名前にしてリリースしている。PKWAREは1985年に公開してたPKXARCから始まるARC互換プログラムに対して、1989年の1月31日まで販売しても良いという条件でSEAにライセンス料金を支払っている。
<br />
</p>

<p class="paragraph">
そして1989年の2月1日、ちょうどARC互換プログラムの公開期限が終わった次の日にPKZIP-0.9が発表され、&quot;ZIP File Format Specification&quot;の初版がPKZIP-0.9のパッケージ中の&quot;APPNOTE.TXT&quot;として同梱される。なおやはりPKZIPはシェアウェアとして公開された。
<br />
ちなみに&quot;zip&quot;というのは、「素早い」とか「弾丸のように」という意味で、Katzの友人であるRobert Mahoneyによる提案らしい。
<br />
</p>

<p class="paragraph">
PKWARE社はその後紆余曲折があったようだが、2009年11月現在、ZIPファイルのセキュリティやZIPファイルフォーマットの本家として仕様をリードしていたりと健在である。Katz自身は1991年からアルコール中毒に悩まされていたようで、2000年4月14日に亡くなっている。
<br />
</p>

<ul><li> &quot;ARC&quot;ファイルフォーマット(Wikipedia)<ul><li> <a class="externallink" href="http://en.wikipedia.org/wiki/ARC_%28file_format%29" target="_blank">http://en.wikipedia.org/wiki/ARC_%28file_format%29</a></li></ul></li>
<li> PKWARE社により現在もメンテナンスと更新が続けられている&quot;APPNOTE.TXT&quot;<ul><li> <a class="externallink" href="http://www.pkware.com/support/application-note-archives" target="_blank">http://www.pkware.com/support/application-note-archives</a></li>
<li> → <a class="externallink" href="http://www.pkware.com/documents/APPNOTE/APPNOTE_6.2.0.txt" target="_blank">http://www.pkware.com/documents/APPNOTE/APPNOTE_6.2.0.txt</a></li></ul></li>
<li> Phil Katz<ul><li> <a class="externallink" href="http://en.wikipedia.org/wiki/Phil_Katz" target="_blank">http://en.wikipedia.org/wiki/Phil_Katz</a></li>
<li> <a class="externallink" href="http://www.pkware.com/security-software-company/phil-katz" target="_blank">http://www.pkware.com/security-software-company/phil-katz</a></li>
<li> <a class="externallink" href="http://www.nytimes.com/2000/05/01/us/phillip-katz-computer-software-pioneer-37.html" target="_blank">http://www.nytimes.com/2000/05/01/us/phillip-katz-computer-software-pioneer-37.html</a></li></ul></li></ul>

<h5 id="id73aebe">少し寄り道：日本発祥のLHA形式, LZH形式</h5>

<p class="paragraph">
2009年現在もよく見かける&quot;.lzh&quot;の拡張子だが、その源流は1988年に開発されたLHAというプログラムになる。
<br />
詳しくはWikipediaを参照して欲しいが、当事者である奥村晴彦氏による&quot;データ圧縮の昔話&quot;に1988年 - 1993年におけるPC-VANのSIG SCIENCEでの書き込みがまとめられている。
<br />
&quot;LZ&quot;ファミリーの圧縮アルゴリズムの話やLZWを初めとする&quot;LZ&quot;ファミリーの特許問題などがリアルタイムに取り上げられており、1980-1990年代のデータ圧縮の変遷を辿るための貴重な資料となっている。
<br />
</p>

<ul><li> LHAプログラム, LZH形式<ul><li> <a class="externallink" href="http://ja.wikipedia.org/wiki/LHA" target="_blank">http://ja.wikipedia.org/wiki/LHA</a></li></ul></li>
<li> &quot;データ圧縮の昔話&quot;<ul><li> <a class="externallink" href="http://oku.edu.mie-u.ac.jp/~okumura/compression/oldstory.html" target="_blank">http://oku.edu.mie-u.ac.jp/~okumura/compression/oldstory.html</a></li></ul></li></ul>

<h4 id="ide69848">ZIPファイルフォーマット</h4>

<p class="paragraph">
ZIPはあくまでも複数の圧縮 or 非圧縮ファイルデータをまとめ、一つのアーカイブファイルに格納する為の「ファイルフォーマット」である。基本思想として、「圧縮または非圧縮のファイルデータ１つ分」をヘッダとフッタで挟んだのを１単位とし、それをいくつも繋げ、その末尾にアーカイブ全体のメタ情報を含んだフッタ情報を置く。
<br />
APPNOTE_6.2.0.txtからの引用だが、&quot;[local file header n][file data n][data descriptor n]&quot;がファイルデータ１つ分を表す。
<br />
</p>
<pre>[local file header 1]
[file data 1]
[data descriptor 1]
...
[local file header n]
[file data n]
[data descriptor n]
[archive decryption header] (EFS)
[archive extra data record] (EFS)
[central directory]
[zip64 end of central directory record]
[zip64 end of central directory locator] 
[end of central directory record]
</pre>

<p class="paragraph">
詳細は後掲のAPPNOTEやWikipedia, &quot;ＴＮＫソフトウェア - 私的ZIPファイル研究所&quot;を参照して貰うとして、ここでは興味深いポイントを二箇所紹介するに留める。
<br />
</p>
<ol><li> &quot;local file header&quot;の中に圧縮形式を選べるフィールドが存在する。</li>
<li> &quot;cenntral directory&quot;の中にエントリが格納されているが、各ファイルデータへのオフセットが「相対」で記録されている。</li></ol>

<p class="paragraph">
まず1番目の、圧縮形式を選べるフィールドが存在する点。これはつまり将来複数の圧縮形式をサポートする事が可能であり、事実、PKZIPはその後のバージョンアップでサポートする圧縮形式を増やしていく。
<br />
次に2番目の各ファイルデータへのオフセットが「相対」で記録されている点。これは最初のファイルデータがファイルの先頭から始まらなくも問題無い事を意味しており、ZIPデータの前後に任意のデータを繋げられる事を可能としている。これはやがて、自己解凍形式のzipファイルとして活用される事になる。
<br />
</p>

<h4 id="id7e6052">亜種の誕生と激動の1990年代前半, &quot;Deflate&quot;アルゴリズム</h4>

<p class="paragraph">
1989年2月1日にPKZIP-0.9としてZIPファイルフォーマットが公開され、早速互換ソフトが開発された。それがInfo-ZIPであり、1989年の5月に最初のバージョンが公開されている。同年の9月にはPKZIP 1.01で追加された&quot;IMPLODE&quot;メソッドに対応したInfo-ZIPバージョン2.0がリリースされ、さらに同年12月、UNIXへポーティングしたInfo-ZIPがリリースされた（PKZIP, Info-ZIPは当初DOS用のツールだった）。
<br />
間を空けて1993年、PKZIP-2.0で&quot;LZ77&quot;系列の&quot;Deflate&quot;圧縮アルゴリズムがKatzにより追加され、Info-ZIPも追随する。
<br />
1994-1995年はInfo-ZIPにとって重要な年となる。この年に、多数のミニコンやメインフレームにInfo-ZIPが移植され、PKZIPの機能を次々と取り込んでいく。結果として、多くのミニコン・メインフレームユーザにとってわざわざシェアウェアであるPKZIPを購入する動機が消えてしまい、代わりにInfo-ZIPが事実上の標準として君臨する事になった。
<br />
現在のLinux/UNIXに含まれる&quot;zip&quot;, &quot;unzip&quot;コマンドはInfo-ZIPのプログラムである。
<br />
</p>
<pre>(CentOS 5.2)
$ rpm -qi zip
Name        : zip                          Relocations: (not relocatable)
Version     : 2.31                              Vendor: CentOS
...
URL         : http://www.info-zip.org/pub/infozip/Zip.html
Summary     : PKZIP と互換性があるファイル圧縮/パッケージ作成ユーティリティ
</pre>

<p class="paragraph">
PKZIP本家の方は1990年-1999年までは大きな動きが無い。GUIフロントエンドのWinZip(シェアウェア)が1990年前半に開発されたりしている。
<br />
2000年には&quot;7-zip&quot;の開発が始まるが、こちらは独自の&quot;7z&quot;という書庫形式を使っており、PKZIPとは直接の関係はない。ただしZIPを含む多数のアーカイブ・圧縮形式に対応していたり、また開発者のIgor Pavlov自身がLZMAという&quot;LZ77&quot;由来の圧縮アルゴリズムを先行開発しているなど、&quot;LZ&quot;ファミリー由来のアーカイブソフトである事は間違いない。
<br />
</p>

<h4 id="idd4c9b6">まとめと参考資料</h4>

<ul><li> ZIPは圧縮ファイルデータやファイルアーカイブの為の柔軟なファイルフォーマットの一つであり、1989年にPKZIPとして、Phil Katzにより誕生した。</li>
<li> PKZIPはMS-DOS用のシェアウェアだったが、ZIPファイルフォーマット自体は公開された為Info-ZIPのような互換フリーソフトが開発され、Info-ZIPはミニコンやメインフレームの世界で広がっていった。</li>
<li> PKZIP自体はシェアウェアであり、Windowsプラットフォームに乗り遅れた事もあり標準の地位は確保できなかったが、今日様々なアーカイブソフトやOSレベルでZIPがサポートされている。</li></ul>

<p class="paragraph">
PKZIP, WinZIP:
<br />
</p>
<ul><li> <a class="externallink" href="http://www.pkware.com/" target="_blank">http://www.pkware.com/</a><ul><li> <a class="externallink" href="http://en.wikipedia.org/wiki/PKZIP" target="_blank">http://en.wikipedia.org/wiki/PKZIP</a></li></ul></li>
<li> <a class="externallink" href="http://www.winzip.com/index.htm" target="_blank">http://www.winzip.com/index.htm</a><ul><li> <a class="externallink" href="http://ja.wikipedia.org/wiki/WinZip" target="_blank">http://ja.wikipedia.org/wiki/WinZip</a></li>
<li> <a class="externallink" href="http://en.wikipedia.org/wiki/WinZIP" target="_blank">http://en.wikipedia.org/wiki/WinZIP</a></li></ul></li></ul>

<p class="paragraph">
ZIPファイルフォーマット:
<br />
</p>
<ul><li> &quot;ＴＮＫソフトウェア - 私的ZIPファイル研究所&quot;<ul><li> <a class="externallink" href="http://www.tnksoft.com/reading/zipfile/index.php" target="_blank">http://www.tnksoft.com/reading/zipfile/index.php</a></li></ul></li>
<li> <a class="externallink" href="http://ja.wikipedia.org/wiki/ZIP_%28%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%83%E3%83%88%29" target="_blank">http://ja.wikipedia.org/wiki/ZIP_%28%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%83%E3%83%88%29</a></li>
<li> <a class="externallink" href="http://en.wikipedia.org/wiki/ZIP_%28file_format%29" target="_blank">http://en.wikipedia.org/wiki/ZIP_%28file_format%29</a></li></ul>

<p class="paragraph">
Info-ZIP:
<br />
</p>
<ul><li> <a class="externallink" href="http://www.info-zip.org/" target="_blank">http://www.info-zip.org/</a><ul><li> <a class="externallink" href="http://en.wikipedia.org/wiki/Info-ZIP" target="_blank">http://en.wikipedia.org/wiki/Info-ZIP</a></li></ul></li></ul>

<p class="paragraph">
7-Zip:
<br />
</p>
<ul><li> <a class="externallink" href="http://www.7-zip.org/" target="_blank">http://www.7-zip.org/</a><ul><li> <a class="externallink" href="http://www.7-zip.org/history.txt" target="_blank">http://www.7-zip.org/history.txt</a></li>
<li> <a class="externallink" href="http://en.wikipedia.org/wiki/7-zip" target="_blank">http://en.wikipedia.org/wiki/7-zip</a></li>
<li> <a class="externallink" href="http://ja.wikipedia.org/wiki/7-Zip" target="_blank">http://ja.wikipedia.org/wiki/7-Zip</a></li></ul></li></ul>

<h3 id="id7c8cb2">もう一つの流れ：gzip, zlib</h3>

<p class="paragraph">
1985年、LZWの特許公開とLZWを使ったcompressツールの開発がぶつかり、compressツールを使うにはロイヤリティを支払う必要が生じた。このため折角開発されたcompressであったが、普及しない状態が続いていた。
<br />
しかし、1993年のPhil Katzによる&quot;Deflate&quot;圧縮アルゴリズムの発表によりcompressツールの代替プログラムの開発が始まる。
<br />
</p>

<h4 id="ida1dffd">gzip</h4>

<p class="paragraph">
gzipは&quot;GNU zip&quot;の略称であり、&quot;Deflate&quot;圧縮アルゴリズムを使ったファイルフォーマットである。アーカイブフォーマットとしても利用できるZIPに対し、アーカイブファイル自体はar/shar/tarなどの既存のUNIXツールで作成し、gzipはそれを圧縮するだけのツールという位置づけだった。
<br />
フォーマットとしては
<br />
</p>
<pre>ヘッダ + メタ情報(ファイル名, コメントなど) + 圧縮ファイル本体 + フッタ
</pre>
<p class="paragraph">
が一つの圧縮ファイルデータを構成する。
<br />
複数のファイルを圧縮する場合は、上記のデータ単位が単純に連続するだけ、というフォーマットである。ZIPフォーマットとは違い、連続するデータの先頭や末尾に好きなデータを加える事は出来ない。
<br />
<strong>gzipとzipは&quot;Deflate&quot;圧縮アルゴリズムをサポートしている点は共通だが、フォーマットとしては完全に別物でありプログラムが開発されたプラットフォーム・背景も異なる。</strong>
<br />
</p>

<ul><li> <a class="externallink" href="http://www.gzip.org/" target="_blank">http://www.gzip.org/</a><ul><li> <a class="externallink" href="http://en.wikipedia.org/wiki/Gzip" target="_blank">http://en.wikipedia.org/wiki/Gzip</a></li>
<li> <a class="externallink" href="http://ja.wikipedia.org/wiki/Gzip" target="_blank">http://ja.wikipedia.org/wiki/Gzip</a></li></ul></li></ul>

<p class="paragraph">
gzipが生まれたのは1992年10月のVersion 0.1, アルファ版リリースである。Jean-Loup Gailly と Mark Adler らによる。Mark Adlerは前掲のInfo-ZIPの開発者でもあった。
<br />
</p>

<p class="paragraph">
・・・少し疑問なのだけど、PKZIP-2.0 with &quot;Deflate&quot;は1993年発表、とen.wikipediaでは記載されている。一方でCentOS5.2に入っているgzipのChangeLogでは1992年10月31日がgzipのファーストリリースとされている。
<br />
/usr/share/doc/gzip-1.3.5/ChangeLog:
<br />
</p>
<pre>Sat Oct 31 12:46:00 1992  Jean-loup Gailly  (jloup@chorus.fr)

    * Alpha version 0.1 released (under time pressure), so it&#039;s not
      much tested, sorry.
</pre>
<p class="paragraph">
どちらが先だったのか、それかPhil KatzとJean-Loup Gailly, Mark Adlerの間で何らかのやりとりがあり、ある程度&quot;Deflate&quot;アルゴリズムが共有されていたかのか、そこだけ謎である。
<br />
</p>

<p class="paragraph">
とまれ、1993年2月にはgzipのVersion 1.0 がリリースされる。&quot;GNU zip&quot;の名の通り、ライセンスはGPLである。
<br />
</p>

<h4 id="id3cb161">zlib</h4>

<p class="paragraph">
その後、gzipの主要開発者であるJean-Loup Gailly と Mark Adler らは&quot;Deflate&quot;圧縮アルゴリズム処理だけをライブラリとして実装し、&quot;zlib&quot;として商用利用も可能な緩いライセンスで公開する。
<br />
</p>

<ul><li> <a class="externallink" href="http://zlib.net/" target="_blank">http://zlib.net/</a><ul><li> <a class="externallink" href="http://en.wikipedia.org/wiki/Zlib" target="_blank">http://en.wikipedia.org/wiki/Zlib</a></li>
<li> <a class="externallink" href="http://ja.wikipedia.org/wiki/Zlib" target="_blank">http://ja.wikipedia.org/wiki/Zlib</a></li></ul></li></ul>

<p class="paragraph">
1995年5月に zlib の最初の公開バージョンである 0.9 がリリースされる。開発自体はその前から行われていたようだが、正確な日付は不明。CentOS 5.2の /usr/share/doc/zlib-devel-1.2.3/ChangeLog を確認しても、ChangeLogのVersion 0.3 - 0.5までは日付が振られていない。0.6になって初めて、&quot;(11 April 95)&quot;として1995年4月11日の日付があらわれている。
<br />
最終的には1996年の5月に以下の3つのRFCとしてzlib, &quot;Deflate&quot;圧縮アルゴリズム, gzipファイルフォーマットが公開される。
<br />
</p>
<ul><li> zlibの圧縮データフォーマット : RFC1950, <a class="externallink" href="http://tools.ietf.org/html/rfc1950" target="_blank">http://tools.ietf.org/html/rfc1950</a></li>
<li> &quot;Deflate&quot;圧縮アルゴリズム : RFC1951, <a class="externallink" href="http://tools.ietf.org/html/rfc1951" target="_blank">http://tools.ietf.org/html/rfc1951</a></li>
<li> gzipファイルフォーマット : RFC1952, <a class="externallink" href="http://tools.ietf.org/html/rfc1952" target="_blank">http://tools.ietf.org/html/rfc1952</a></li></ul>

<h4 id="id232d6c">gzip, zlib, zipは独立してシステムにインストール出来る</h4>

<p class="paragraph">
CentOS5.2の場合のパッケージ依存状況と、lddによる共有ライブラリリンク状況を確認する。結論として、gzip/zlib/zip(unzip)間のパッケージ依存は存在せず、それぞれ独立してインストール可能。
<br />
</p>

<p class="paragraph">
なおFreeBSD/OpenBSDのmanページを調べたところ、gzipは標準で入っている(FreeBSD 5.4, OpenBSD 4.6)。ただしzlibが標準で入っているかは不明。また、Info-ZIPのzip/unzipについてはFreeBSD/OpenBSDともにPortsからインストールすることになっていて、2009/11現在、FreeBSDの場合は &quot;archivers/zip&quot;(3.0), &quot;archivers/unzip&quot;(6.0) としてInfo-ZIPのものが登録されている。
<br />
余談だがFreeBSDのPortsの&quot;security&quot;カテゴリに&quot;find_zlib&quot;というのが登録されており、説明には&quot;zlibコードが静的リンクされたファイルを探す為のシェルスクリプト&quot;とある。以前、zlibでfree()を二重で行っていたための脆弱性が見つかった事がありそれに関連していると思われる。
<br />
</p>

<p class="paragraph">
CentOS5.2上のgzipのパッケージ依存状況と、lddによる共有ライブラリリンク状況:
<br />
</p>
<pre>$ which gzip
/bin/gzip
$ ldd /bin/gzip
        linux-gate.so.1 =&gt;  (0x0041b000)
        libc.so.6 =&gt; /lib/libc.so.6 (0x00b45000)
        /lib/ld-linux.so.2 (0x00a83000)
        # zlibへのリンクはされていない
$ rpm -qR gzip
/bin/sh
/bin/sh
/bin/sh
/sbin/install-info
less
libc.so.6
libc.so.6(GLIBC_2.0)
libc.so.6(GLIBC_2.1)
libc.so.6(GLIBC_2.2)
libc.so.6(GLIBC_2.3)
libc.so.6(GLIBC_2.3.4)
libc.so.6(GLIBC_2.4)
mktemp
rpmlib(CompressedFileNames) &lt;= 3.0.4-1
rpmlib(PartialHardlinkSets) &lt;= 4.0.4-1
rpmlib(PayloadFilesHavePrefix) &lt;= 4.0-1
rtld(GNU_HASH)
</pre>
<p class="paragraph">
→ zlibが無くてもインストール可能。
<br />
</p>

<p class="paragraph">
CentOS5.2上のzlibのパッケージ依存状況と、lddによる共有ライブラリリンク状況:
<br />
</p>
<pre>$ rpm -qR zlib
/sbin/ldconfig
/sbin/ldconfig
libc.so.6
libc.so.6(GLIBC_2.0)
libc.so.6(GLIBC_2.1)
libc.so.6(GLIBC_2.1.3)
libc.so.6(GLIBC_2.3.4)
libc.so.6(GLIBC_2.4)
libz.so.1
rpmlib(CompressedFileNames) &lt;= 3.0.4-1
rpmlib(PayloadFilesHavePrefix) &lt;= 4.0-1
rtld(GNU_HASH)
$ rpm -qR zlib-devel
libz.so.1
rpmlib(CompressedFileNames) &lt;= 3.0.4-1
rpmlib(PayloadFilesHavePrefix) &lt;= 4.0-1
zlib = 1.2.3
$ ldd /usr/lib/libz.so.1.2.3
        linux-gate.so.1 =&gt;  (0x005b8000)
        libc.so.6 =&gt; /lib/libc.so.6 (0x00b45000)
        /lib/ld-linux.so.2 (0x00a83000)
</pre>
<p class="paragraph">
→ 単独でインストール可能
<br />
</p>

<p class="paragraph">
CentOS5.2上のzip(Info-ZIP)のパッケージ依存状況と、lddによる共有ライブラリリンク状況:
<br />
※圧縮(zip)と解凍(unzip)でSRPMの段階から独立している
<br />
</p>
<pre>$ ldd /usr/bin/zip
        linux-gate.so.1 =&gt;  (0x00eab000)
        libc.so.6 =&gt; /lib/libc.so.6 (0x00b45000)
        /lib/ld-linux.so.2 (0x00a83000)
$ rpm -qR zip
libc.so.6
libc.so.6(GLIBC_2.0)
libc.so.6(GLIBC_2.1)
libc.so.6(GLIBC_2.2)
libc.so.6(GLIBC_2.3)
libc.so.6(GLIBC_2.3.4)
libc.so.6(GLIBC_2.4)
rpmlib(CompressedFileNames) &lt;= 3.0.4-1
rpmlib(PayloadFilesHavePrefix) &lt;= 4.0-1
rtld(GNU_HASH)
</pre>

<pre>$ ldd /usr/bin/unzip
        linux-gate.so.1 =&gt;  (0x00c41000)
        libc.so.6 =&gt; /lib/libc.so.6 (0x00110000)
        /lib/ld-linux.so.2 (0x00a83000)
$ rpm -qR unzip
/bin/sh
libc.so.6
libc.so.6(GLIBC_2.0)
libc.so.6(GLIBC_2.1)
libc.so.6(GLIBC_2.2)
libc.so.6(GLIBC_2.3)
libc.so.6(GLIBC_2.3.4)
libc.so.6(GLIBC_2.4)
rpmlib(CompressedFileNames) &lt;= 3.0.4-1
rpmlib(PartialHardlinkSets) &lt;= 4.0.4-1
rpmlib(PayloadFilesHavePrefix) &lt;= 4.0-1
rtld(GNU_HASH)
</pre>

<h4 id="ida9c29e">bzip2について</h4>

<p class="paragraph">
Linux kernelのアーカイブファイルでも使われている(&quot;*.tar.bz2&quot;)圧縮ツール、bzip2について、簡単にWikipediaを元に抜き書きしておく。圧縮性能や速度についての評価や詳細は踏み込まない。
<br />
</p>

<p class="paragraph">
作者は Julian Seward 。名前に&quot;zip&quot;が含まれているが、&quot;LZ&quot;ファミリーの圧縮アルゴリズムを使っているわけではない。ブロックソート法（バロウズ-ホイラー変換）、MTF (Move-To-Front) 法、ハフマン符号化法を活用している。また&quot;gzip&quot;と同様にあくまでも圧縮ツールの位置づけであり、ar/tar/sharなどにより作成されたアーカイブファイル１つ分を処理する事を目的としている。
<br />
&quot;bzip2&quot;という名前から、&quot;bzip1&quot;or&quot;bzip&quot;があるのではと推測されるが、実際に&quot;bzip&quot;という名前で開発されていた時期がある。しかし&quot;bzip&quot;で圧縮アルゴリズムに使っていた算術符号化の基本アルゴリズムがIBM系の企業により保有されていた為、特許問題を避ける為にハフマン符号化に置き換えたものが現在の&quot;bzip2&quot;である。
<br />
</p>

<p class="paragraph">
FreeBSDのPortsで&quot;bzip&quot;時代のパッケージを見つける事が出来る。&quot;bzip&quot;の最後のバージョンは&quot;bzip-0.21&quot;となっており、説明を要約すると&quot;米国の幾つかの算術符号化に関する特許を侵害している可能性があるので、bzip2の方を使って下さい&quot;とある。
<br />
</p>
<ul><li> <a class="externallink" href="http://www.freebsd.org/cgi/url.cgi?ports/archivers/bzip/pkg-descr" target="_blank">http://www.freebsd.org/cgi/url.cgi?ports/archivers/bzip/pkg-descr</a></li></ul>

<p class="paragraph">
なおbzip時代のソースが、Portsが生きている以上は入手可能となっているようだ：
<br />
</p>
<ul><li> <a class="externallink" href="http://www.freebsd.org/cgi/pds.cgi?ports/archivers/bzip" target="_blank">http://www.freebsd.org/cgi/pds.cgi?ports/archivers/bzip</a></li></ul>

<p class="paragraph">
実際にダウンロードしてREADMEを確認してみたところ、末尾にbzip時代のバージョンとリリース日らしきものが見つかった。
<br />
</p>
<pre>Julian Seward
Manchester, UK
18 July 1996 (version 0.15)
25 August 1996 (version 0.21)
</pre>

<p class="paragraph">
英語版のWikipediaでは、&quot;bzip&quot;のページに「Seward made the first public release of bzip2, version 0.15, in July 1996.」とある。その後&quot;bzip&quot;は0.21の1996/8月で開発が停まり、同じ作者により&quot;bzip2&quot;として、同じく1996年に生まれ変わる事になる。
<br />
&quot;bzip2&quot;のCHANGESファイルを見ると、&quot;bzip2&quot;の最初のバージョンは&quot;0.9.0&quot;だった事が確認できた。
<br />
</p>
<pre class="plugin_pre">
 ------------------------------------------------------------------
 This file is part of bzip2/libbzip2, a program and library for
 lossless, block-sorting data compression.

 bzip2/libbzip2 version 1.0.5 of 10 December 2007
 Copyright (C) 1996-2007 Julian Seward &lt;jseward@bzip.org&gt;

 Please read the WARNING, DISCLAIMER and PATENTS sections in the 
 README file.

 This program is released under the terms of the license contained
 in the file LICENSE.
 ------------------------------------------------------------------


0.9.0
~~~~~
First version.
...
</pre>

<p class="paragraph">
参考：
<br />
</p>
<ul><li> <a class="externallink" href="http://www.bzip.org/" target="_blank">http://www.bzip.org/</a><ul><li> <a class="externallink" href="http://en.wikipedia.org/wiki/Bzip" target="_blank">http://en.wikipedia.org/wiki/Bzip</a></li>
<li> <a class="externallink" href="http://ja.wikipedia.org/wiki/Bzip2" target="_blank">http://ja.wikipedia.org/wiki/Bzip2</a></li></ul></li>
<li> &quot;bzip&quot;の時に使われていた算術符号化について<ul><li> <a class="externallink" href="http://en.wikipedia.org/wiki/Arithmetic_coding" target="_blank">http://en.wikipedia.org/wiki/Arithmetic_coding</a></li>
<li> <a class="externallink" href="http://ja.wikipedia.org/wiki/%E7%AE%97%E8%A1%93%E7%AC%A6%E5%8F%B7" target="_blank">http://ja.wikipedia.org/wiki/%E7%AE%97%E8%A1%93%E7%AC%A6%E5%8F%B7</a></li></ul></li></ul>

<h4 id="id3660a3">gzipファイルフォーマットについての極々簡単な確認</h4>

<p class="paragraph">
gzipは1ファイル単位で圧縮するのが基本で、複数ファイルを操作する時は単純に圧縮された1ファイル分のレコードをつなげるだけとなる。簡単なファイルで確認してみる。実際にファイルのヘッダーを解析したりはせずに、単純にMD5ハッシュを見てバイナリレベルで差分がない事を確認するに留める。
<br />
</p>

<p class="paragraph">
１．適当なファイルを２つ用意する。
<br />
</p>
<pre>$ echo &quot;Hello, World AAA.&quot; &gt; file1.txt
$ echo &quot;Hello, World BBB.&quot; &gt; file2.txt
</pre>

<p class="paragraph">
２．ファイルをまとめて指定して圧縮したのと、分けて圧縮したのをcatでつなげたものを作る。
<br />
</p>
<pre>$ gzip -c file1.txt &gt; file1.gz
$ gzip -c file2.txt &gt; file2.gz
$ gzip -c file1.txt file2.txt &gt; files.gz
$ cat file1.gz file2.gz &gt; files2.gz
</pre>

<p class="paragraph">
３．MD5値を確認する。同じなので、圧縮したのをcatしても、ファイルをまとめて引数で指定しても同じファイルが出来る事を確認した。
<br />
</p>
<pre>$ md5sum files.gz
f19efc7a16e6a273925d8be91b5d7176  files.gz
$ md5sum files2.gz
f19efc7a16e6a273925d8be91b5d7176  files2.gz
</pre>

<hr />
<p class="paragraph">
後書き：
<br />
</p>

<p class="paragraph">
zip/gzip/zlibの区別をはっきりさせたいというのが最初の目的で、それは完全に達成できたと思う。それにしても、Wikipediaの内容を抜き書きしてまとめるだけでも一苦労だった。Wikipediaやそれぞれのソフトに付随するドキュメントに目を通しても、当然ながら自身の担当範囲しか書いていない為、PKZIPとARC形式、LZファミリーの関係、LZWの特許とcompressの関係からgzip/zlibへの流れなど全体の関連や大雑把な歴史を理解するのに手間取る。
<br />
</p>

<p class="paragraph">
zip/gzip/zlib/bzip2についての頭の中のもやもやを、この記事ですっきり整理できたなら幸いです。
<br />
</p>

<hr class="full_hr" />
<ul class="plugin_navi">
<li>[&nbsp;<a href="./view-638.html" title="技術/歴史/FAQ/キーボード・マウスコネクタの&quot;PS/2&quot;について">Prev</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-1314.html" title="技術/運用管理/Fabric">Next</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-641.html" title="技術/歴史">Up</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-23.html" title="技術">技術</a>&nbsp;]</li>
</ul>
</div>

<div class="data_attrs_post">
original url: https://www.glamenv-septzen.net/view/495<br>
</div>

</div>
<!-- //data_main -->

</div>


</div>
<!-- /content-wrap end -->

<!-- footer start -->
<div id="footer">
Copyright &copy; 2001 - 2025 Masahiko Sakamoto(msakamoto-sf)<br>
License&nbsp;:&nbsp;<a target="_blank" href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a><br>
Contact&nbsp;:&nbsp;<a target="_blank" href="https://x.com/msakamoto_sf">x(twitter)</a> / <a target="_blank" href="https://github.com/msakamoto-sf/">github</a> / <a class="maillink" target="_blank" href="mailto:&#x73;&#x61;&#x6B;&#x61;&#x6D;&#x6F;&#x74;&#x6F;&#x2E;&#x67;&#x73;&#x79;&#x63;&#x2E;&#x33;&#x73;&#x40;&#x67;&#x6D;&#x61;&#x69;&#x6C;&#x2E;&#x63;&#x6F;&#x6D;">email</a><br>
--&nbsp;Beautiful Icons&nbsp;--<br />
<a href="http://www.famfamfam.com/lab/icons/silk/" target="_blank" title="Mark James Silk icon set 1.3">Mark James Silk icon set 1.3</a> by famfamfam<br />
<a href="http://www.pinvoke.com/" target="_blank" title="Fugue Icons">Fugue Icons</a> by Yusuke Kamiyamane<br />
</div>
<!-- /footer end -->

</div>
<!-- /body end -->

</body>
</html>