<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Why BIOS loads MBR into 0x7C00 in x86 ? - Glamenv-Septzen(en)(archive)</title>
<!-- favicon 2017's reference:
https://developers.google.com/web/fundamentals/design-and-ui/browser-customization/
https://msdn.microsoft.com/ja-jp/library/dn455106(v=vs.85).aspx
https://developer.chrome.com/multidevice/android/installtohomescreen
https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html
-->
<link rel="shortcut icon" href="../favicons/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="icon" href="../favicons/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="apple-touch-icon" sizes="57x57" href="../favicons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="../favicons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="../favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="../favicons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="../favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="../favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="../favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="../favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="../favicons/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="../favicons/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="../favicons/favicon-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="../favicons/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-160x160.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-196x196.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../favicons/favicon-32x32.png" sizes="32x32">

<!-- browserconfig.xml : https://msdn.microsoft.com/ja-jp/library/dn455106(v=vs.85).aspx -->
<meta name="msapplication-TileColor" content="#990000">
<meta name="msapplication-TileImage" content="../favicons/mstile-144x144.png">

<!-- these favicon files were generated by https://ao-system.net/favicongenerator/ , thanks!!(2017-02-18) -->

<style type="text/css"></style>

<link href="./css/pcbrowser.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/pcbrowser_plugins.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/pcbrowser_wiki.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/print.css" rel="stylesheet" type="text/css" media="print"/>
</head>
<body>
<!-- body start -->
<div class="body">
<div style="display: inline"><a name="pagetop"></a></div>
<div id="header-wrap">
<img src="./images/logo1.jpg" style="float: left; margin-right: 1em;"/>
<a href="./index-en.html" title="Glamenv-Septzen(en)(archive)"><img src="./icons/home.png" alt="home"/>&nbsp;Glamenv-Septzen(en)(archive)</a>


<h1 style="margin-bottom: 10px;">Why BIOS loads MBR into 0x7C00 in x86 ?</h1>

<div style="clear: both;"></div>
</div><!-- //header-wrap -->

<!-- content-wrap start -->
<div id="content-wrap"><div class="contents_s">

<!-- data_main -->
<div class="data_main">

<div class="data_attrs_pre">
created at: 2010-05-13 10:41:38 &nbsp; / &nbsp; last updated at: 2017-01-15 16:49:30<br>
category: <a href="category-en-4.html">Assembler</a>&nbsp;<a href="category-en-6.html">BIOS</a>&nbsp;<a href="category-en-7.html">MBR</a>&nbsp;<a href="category-en-5.html">x86</a>&nbsp;</div>

<div class="data_body">
<h3 id="id1ba83e">The mysteries arround &quot;0x7C00&quot; in x86 architecture bios bootloader</h3>

<p class="paragraph">
Do you know &quot;0x7C00&quot;, a magic number, in x86 assembler programming ?
<br />
&quot;0x7C00&quot; is the memory address which BIOS loads MBR(Master Boot Record, a first sector in hdd/fdd) into. OS or bootloader developer must assume that their assembler codes are loaded and start from 0x7C00.
<br />
</p>

<p class="paragraph">
But...<strong>1st</strong>, you may wonder.
<br />
</p>
<blockquote><p class="paragraph">
&quot;I read all of Intel x86(32bit) programmers manual, but did not found the magic number 0x7C00.&quot;
<br />
</p></blockquote>

<p class="paragraph">
Yes.<strong>0x7C00 is NOT related to x86 CPU</strong>. It&#039;s natural that you couldn&#039;t find out it in cpu specifications from intel. Then, you wonder, &quot;Who decided it ?&quot;
<br />
</p>

<p class="paragraph">
<strong>2nd</strong>, you may wonder:
<br />
</p>
<blockquote><p class="paragraph">
&quot;0x7C00 is 32KiB - 1024B at decimal number. What&#039;s this number means ?&quot;
<br />
</p></blockquote>

<p class="paragraph">
Anyone decided it. But, why he/she decided such a halfway address?
<br />
</p>

<p class="paragraph">
Hum...There&#039;re TWO questions(mysteries) arround the magic number &quot;0x7C00&quot;.
<br />
</p>
<ol><li> Who decided &quot;0x7C00&quot; ?</li>
<li> What &quot;0x7C00 = 32KiB - 1024B&quot; means ?</li></ol>

<p class="paragraph">
Okay, let&#039;s dive into the secret of BIOS for &quot;IBM PC 5150&quot;, ancestor of modern x86(32bit) PCs, with me...!!
<br />
</p>




<h3 id="ida6dff8">&quot;0x7C00&quot; First appeared in IBM PC 5150 ROM BIOS INT 19h handler.</h3>

<p class="paragraph">
Wandering arround the history of x86 IBM Compatible PC, you know <strong>IBM PC 5150</strong> is the ancestor of modern x86(32bit) IBM PC/AT Compatible PCs.
<br />
This PC was released at 1981 August, with Intel 8088(16bit) and 16KiB RAM(for minimum memory model). BIOS and Microsoft BASIC was stored in ROM.
<br />
</p>

<p class="paragraph">
When power on, BIOS processes &quot;POST&quot;(Power On Self Test) procedure, and after, <strong>call INT 19h</strong>.
<br />
In INT 19h handler, BIOS checks that PC has any of floppy/hard/fixed diskette or not have.
<br />
If PC has any of available diskkete, BIOS loads a first sector(512B) of diskette into 0x7C00.
<br />
</p>

<p class="paragraph">
Now, you understand why you couldn&#039;t find out this magic number in x86 documents. <strong>This magic number belongs to BIOS specification.</strong>
<br />
</p>

<h3 id="id44778c">The origin of 0x7C00</h3>

<p class="paragraph">
Stories surrounding IBM PC DOS, Microsoft, and SCP&#039;s 86-DOS are famous stories. See: <a class="externallink" href="http://www.patersontech.com/dos/Byte/History.html" target="_blank">&quot;A Short History of MS-DOS&quot;</a>.
<br />
</p>

<p class="paragraph">
SCP&#039;s &quot;86-DOS&quot;(at 1980) is the reference OS for IBM PC DOS 1.0.
<br />
86-DOS(early called &quot;QDOS&quot;) is CP/M compatible OS for 8086/8088 cpu. At 1979, Digital Research Inc didn&#039;t have developed CP/M for 8086/8088 cpu yet.
<br />
</p>

<p class="paragraph">
SCP sold two S-100 bus board, one is 8086 CPU board, two is &quot;CPU Monitor&quot; rom board.
<br />
&quot;CPU Monitor&quot; program provided bootloader and debugger. <strong>This &quot;CPU Monitor&quot; bootloader loaded MBR into &quot;0x200&quot;, NOT &quot;0x7C00&quot;</strong>. In 1981, IBM PC DOS was the NEXT CP/M like OS for 8086/8088.
<br />
</p>

<p class="paragraph">
So, I told you that &quot;0x7C00 <strong>FIRST appeared</strong> in IBM PC 5150 ROM BIOS&quot;.
<br />
Previous one, SCP&#039;s CPU Monitor bootloader loads into 0x200, not 0x7C00.
<br />
</p>

<h4 id="id16b25f">Why that CPU Monitor&#039;s bootloader loeded MBR into &quot;0x200&quot; ?</h4>

<p class="paragraph">
There&#039;re THREE reasons about &quot;0x200&quot;.
<br />
</p>
<ol><li> 8086 Interrupts Vector use 0x0 - 0x3FF.</li>
<li> 86-DOS was loaded from 0x400.</li>
<li> 86-DOS didn&#039;t use interrupts vectors between 0x200 - 0x3FF.</li></ol>

<p class="paragraph">
These reasons mean 0x200 - 0x3FF needed to be reserved and couldn&#039;t be in the way of an OS, no matter where 86-DOS or user application wanted to load.
<br />
</p>

<p class="paragraph">
So Tim Paterson (86-DOS developer) chose 0x200 for MBR load address.
<br />
</p>

<h3 id="idfb1114">Q:Who decided &quot;0x7C00&quot; ? - A: IBM PC 5150 BIOS Developer Team.</h3>

<p class="paragraph">
&quot;0x7C00&quot; was decided by IBM PC 5150 BIOS developer team (Dr. David Bradley).
<br />
As mentioned above, this magic number was born at 1981 and &quot;IBM PC/AT Compat&quot; PC/BIOS vendors did not change this value for BIOS and OS&#039;s backward compatibility.
<br />
</p>

<p class="paragraph">
Not Intel(8086/8088 vendor) nor Microsoft(OS vendor) decided it.
<br />
</p>

<h3 id="id998b47">Q:What &quot;0x7C00 = 32KiB - 1024B&quot; means ? A: Affected by OS requirements and CPU memory layout.</h3>

<p class="paragraph">
IBM PC 5150 minimum memory model had only 16KiB RAM. So, you may have a question.
<br />
</p>
<blockquote><p class="paragraph">
&quot;Could minimum memory model (16KiB) load OS from diskette ? BIOS loads MBR into 32KiB - 1024B address, but physical RAM is not enough...&quot;
<br />
</p></blockquote>

<p class="paragraph">
No, that case was <strong>out of consideration</strong>. One of IBM PC 5150 ROM BIOS Developer Team Members, Dr. David Bradley says:
<br />
</p>
<blockquote><p class="paragraph">
&quot;DOS 1.0 required a minimum of 32KB, so we weren&#039;t concerned about attempting a boot in 16KB.&quot;
<br />
</p></blockquote>
<p class="paragraph">
(Note: DOS 1.0 required 16KiB minimum ? or 32KiB ? I couldn&#039;t find out which correct. But, at least, in 1981&#039;s early BIOS development, they supposed that 32KiB is DOS minimum requirements.)
<br />
</p>

<p class="paragraph">
BIOS developer team decided 0x7C00 because:
<br />
</p>
<ol><li> They wanted to leave as much room as possible for the OS to load itself within the 32KiB.</li>
<li> 8086/8088 used 0x0 - 0x3FF for interrupts vector, and BIOS data area was after it.</li>
<li> The boot sector was 512 bytes, and stack/data area for boot program needed more 512 bytes.</li>
<li> So, 0x7C00, the last 1024B of 32KiB was chosen.</li></ol>

<p class="paragraph">
Once OS loaded and started, boot sector is never used until power reset. So, OS and application can use the last 1024B of 32KiB freely.
<br />
</p>

<p class="paragraph">
After OS loaded, memory layout will be:
<br />
</p>
<pre class="plugin_pre">
+--------------------- 0x0
| Interrupts vectors
+--------------------- 0x400
| BIOS data area
+--------------------- 0x5??
| OS load area
+--------------------- 0x7C00
| Boot sector
+--------------------- 0x7E00
| Boot data/stack
+--------------------- 0x7FFF
| (not used)
+--------------------- (...)
</pre>

<p class="paragraph">
That are the origin and reasons of &quot;0x7C00&quot;, the magic number survived for about three decades in PC/AT Compat BIOS INT 19h handler.
<br />
</p>

<h3 id="idfa476e">References</h3>

<p class="paragraph">
86-DOS related:
<br />
</p>
<ul><li> &quot;8086 Monitor Instruction Manual&quot;(MON 86 - V1.4)</li>
<li> &quot;86-DOS(TM) User&#039;s Manual Version 0.3&quot;</li>
<li> &quot;86-DOS(TM) Programmer&#039;s Manual Version 0.3&quot;</li>
<li> &quot;86-DOS(TM) Instruction Manual Version ??&quot;</li></ul>

<p class="paragraph">
IBM PC 5150 related:
<br />
</p>
<ul><li> &quot;IBM Personal Computer Hardware Reference Library&quot;, &quot;Technical Reference&quot; (IBM Personal Computer Technical Reference manual)</li>
<li> &quot;IBM Personal Computer XT Hardware Reference Library&quot;, &quot;Technical Reference&quot; (IBM Personal Computer XT Technical Reference manual)</li></ul>

<p class="paragraph">
Intel 8086/8088 data sheets:
<br />
</p>
<ul><li> &quot;8086 16-BIT HMOS MICROPROCESSOR&quot;</li>
<li> &quot;M80C86/M80C86-2 16-BIT CHMOS MICROPROCESSOR&quot;</li>
<li> &quot;8088 8-BIT HMOS MICROPROCESSOR&quot;</li></ul>

<p class="paragraph">
CP/M related:
<br />
</p>
<ul><li> The Unofficial CP/M Web Site<ul><li> <a class="externallink" href="http://www.cpm.z80.de/" target="_blank">http://www.cpm.z80.de/</a></li></ul></li>
<li> CP/M Internals : Oscar Vermeulen Personal Web Site<ul><li> <a class="externallink" href="http://www.dcast.vbox.co.uk/cpm.html" target="_blank">http://www.dcast.vbox.co.uk/cpm.html</a></li></ul></li>
<li> Digital Research - CP/M<ul><li> <a class="externallink" href="http://www.digitalresearch.biz/CPM.HTM" target="_blank">http://www.digitalresearch.biz/CPM.HTM</a></li></ul></li>
<li> CP/M Main Page<ul><li> <a class="externallink" href="http://www.seasip.demon.co.uk/Cpm/" target="_blank">http://www.seasip.demon.co.uk/Cpm/</a></li></ul></li></ul>

<p class="paragraph">
86-DOS related:
<br />
</p>
<ul><li> Origins of DOS - Paterson Technology<ul><li> <a class="externallink" href="http://www.patersontech.com/dos/" target="_blank">http://www.patersontech.com/dos/</a></li></ul></li>
<li> 86-DOS Resource Website<ul><li> <a class="externallink" href="http://www.86dos.org/index.htm" target="_blank">http://www.86dos.org/index.htm</a></li></ul></li>
<li> DosMan Drivel<ul><li> <a class="externallink" href="http://dosmandrivel.blogspot.com/" target="_blank">http://dosmandrivel.blogspot.com/</a></li></ul></li></ul>

<p class="paragraph">
And all related Wikipedia pages.
<br />
</p>

<h3 id="id670482">Special Thanks To...</h3>

<p class="paragraph">
Special Thanks To:
<br />
</p>
<ul><li> Tim Peterson</li>
<li> David Bradley</li></ul>

<p class="paragraph">
for japanese article, see: <a href="./view-614.html" target="_blank" >Assembler/なぜx86ではMBRが&quot;0x7C00&quot;にロードされるのか？(完全版)</a>
<br />
</p>

</div>

<div class="data_attrs_post">
original url: https://www.glamenv-septzen.net/en/view/6<br>
</div>

</div>
<!-- //data_main -->

</div>


</div>
<!-- /content-wrap end -->

<!-- footer start -->
<div id="footer">
Copyright &copy; 2001 - 2025 Masahiko Sakamoto(msakamoto-sf)<br>
License&nbsp;:&nbsp;<a target="_blank" href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a><br>
Contact&nbsp;:&nbsp;<a target="_blank" href="https://x.com/msakamoto_sf">x(twitter)</a> / <a target="_blank" href="https://github.com/msakamoto-sf/">github</a> / <a class="maillink" target="_blank" href="mailto:&#x73;&#x61;&#x6B;&#x61;&#x6D;&#x6F;&#x74;&#x6F;&#x2E;&#x67;&#x73;&#x79;&#x63;&#x2E;&#x33;&#x73;&#x40;&#x67;&#x6D;&#x61;&#x69;&#x6C;&#x2E;&#x63;&#x6F;&#x6D;">email</a><br>
--&nbsp;Beautiful Icons&nbsp;--<br />
<a href="http://www.famfamfam.com/lab/icons/silk/" target="_blank" title="Mark James Silk icon set 1.3">Mark James Silk icon set 1.3</a> by famfamfam<br />
<a href="http://www.pinvoke.com/" target="_blank" title="Fugue Icons">Fugue Icons</a> by Yusuke Kamiyamane<br />
</div>
<!-- /footer end -->

</div>
<!-- /body end -->

</body>
</html>