<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Python/setup.pyによるインストール - Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)</title>
<!-- favicon 2017's reference:
https://developers.google.com/web/fundamentals/design-and-ui/browser-customization/
https://msdn.microsoft.com/ja-jp/library/dn455106(v=vs.85).aspx
https://developer.chrome.com/multidevice/android/installtohomescreen
https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html
-->
<link rel="shortcut icon" href="../favicons/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="icon" href="../favicons/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="apple-touch-icon" sizes="57x57" href="../favicons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="../favicons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="../favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="../favicons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="../favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="../favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="../favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="../favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="../favicons/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="../favicons/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="../favicons/favicon-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="../favicons/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-160x160.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-196x196.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../favicons/favicon-32x32.png" sizes="32x32">

<!-- browserconfig.xml : https://msdn.microsoft.com/ja-jp/library/dn455106(v=vs.85).aspx -->
<meta name="msapplication-TileColor" content="#990000">
<meta name="msapplication-TileImage" content="../favicons/mstile-144x144.png">

<!-- these favicon files were generated by https://ao-system.net/favicongenerator/ , thanks!!(2017-02-18) -->

<style type="text/css"></style>

<link href="./css/pcbrowser.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/pcbrowser_plugins.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/pcbrowser_wiki.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/print.css" rel="stylesheet" type="text/css" media="print"/>
</head>
<body>
<!-- body start -->
<div class="body">
<div style="display: inline"><a name="pagetop"></a></div>
<div id="header-wrap">
<img src="./images/logo1.jpg" style="float: left; margin-right: 1em;"/>
<a href="./index.html" title="Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)"><img src="./icons/home.png" alt="home"/>&nbsp;Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)</a>


<h1 style="margin-bottom: 10px;">Python/setup.pyによるインストール</h1>

<div style="clear: both;"></div>
</div><!-- //header-wrap -->

<!-- content-wrap start -->
<div id="content-wrap"><div class="contents_s">

<!-- data_main -->
<div class="data_main">

<div class="data_attrs_pre">
作成日: 2009-04-30 23:11:36 &nbsp; / &nbsp; last updated at: 2009-05-01 00:26:49<br>
カテゴリ: <a href="category-28.html">Python</a>&nbsp;</div>

<div class="data_body">
<ul class="plugin_navi">
<li>[&nbsp;<a href="./view-820.html" title="Python/pydbg, pydasmをPython2.5 on WindowsXPにインストール">Prev</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-374.html" title="Python/setuptools, easy_install, eggパッケージ, pipメモ">Next</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-184.html" title="Python">Python</a>&nbsp;]</li>
</ul>
<hr class="full_hr" />

<p class="paragraph">
Python1.6移行はDistutilsというパッケージが追加され<span class="hidden">(</span><a class="footnote" href="#footnote_373_1" id="footnote_373_1_r"  title="1.5.2までは独立したパッケージだった">*1</a><span class="hidden">)</span>、これに含まれるsetup()メソッドを使ったインストールスクリプトがsetup.py.
<br />
</p>

<p class="paragraph">
サンプルも載っていて分かりやすいので、直接Pythonドキュメントを参照した方が早い。Python 2.5, 2.6.1 共に &quot;Distributing Python Modules&quot; というトップレベルセクションで説明されている。
<br />
</p>




<ul><li><a href="#idbc17a7">モジュール(.py)をインストールするだけの単純な例</a><ul><li><a href="#id893e1a">setup.pyの中身</a></li>
<li><a href="#id07ca69">buildコマンド</a></li>
<li><a href="#id23cafc">sdistコマンド</a></li>
<li><a href="#idda8503">bdistコマンド</a></li>
<li><a href="#id55e718">installコマンド</a></li>
<li><a href="#id33f7cb">アンインストールと&quot;install --record ファイル名&quot;オプション</a></li>
<li><a href="#id0e2dcc">&quot;install --force&quot;による上書きインストール</a></li></ul></li>
<li><a href="#idb9064b">パッケージをインストールするサンプル2種</a><ul><li><a href="#idbaa169">ソースディレクトリ名がパッケージ名と同一の場合</a></li>
<li><a href="#id938f6b">ソースディレクトリ名とパッケージ名が異なる場合</a></li></ul></li>
<li><a href="#idbb8f1b">パッケージ探索ディレクトリの調整</a><ul><li><a href="#id39c566">Pythonスクリプト中で直接sys.pathの要素を操作する</a></li>
<li><a href="#idbfa074">PYTHONPATH環境変数を編集し、探索ディレクトリを追加する</a></li></ul></li></ul>
<hr />
<h3 id="idbc17a7">モジュール(.py)をインストールするだけの単純な例</h3>

<p class="paragraph">
Pythonスクリプトファイル(=モジュール)をインストールするだけの簡単な例を示す。
<br />
</p>

<pre>C:\in_vitro\python\setup_pys\ex1\
    foo.py
    bar.py
    setup.py
</pre>

<h4 id="id893e1a">setup.pyの中身</h4>

<p class="paragraph">
Pythonドキュメントの丸写しになるが、以下のスクリプトで最低限度事足りる。
<br />
setup.py:
<br />
</p>
<pre>from distutils.core import setup
setup(
    name=&#039;foo&#039;,
    version=&#039;1.0&#039;,
    py_modules=[&#039;foo&#039;, &#039;bar&#039;],
    )
</pre>

<p class="paragraph">
py_modulesに、&quot;.py&quot;を除いたファイル名をリストアップする。
<br />
</p>

<h4 id="id07ca69">buildコマンド</h4>

<p class="paragraph">
通常はC言語で記述されたPython拡張モジュールをコンパイルする時に使う。今回はPythonスクリプトファイルしか含まれないので、単にbuildディレクトリの下にコピーされるだけ。
<br />
</p>

<pre>C:\in_vitro\python\setup_pys\ex1&gt;python setup.py build
running build
running build_py
creating build
creating build\lib
copying foo.py -&gt; build\lib
copying bar.py -&gt; build\lib
</pre>
<p class="paragraph">
→
<br />
</p>
<pre>C:\in_vitro\python\setup_pys\ex1
    build\
        lib\
            foo.py
            bar.py
</pre>

<h4 id="id23cafc">sdistコマンド</h4>

<p class="paragraph">
ソース配布用のzipファイルを生成する。 
<br />
</p>
<pre>C:\in_vitro\python\setup_pys\ex1&gt;python setup.py sdist
running sdist
warning: sdist: missing required meta-data: url
warning: sdist: missing meta-data: either (author and author_email) or 
                  (maintainer and maintainer_email) must be supplied
warning: sdist: manifest template &#039;MANIFEST.in&#039; does not exist (using default file list)
warning: sdist: standard file not found: should have one of README, README.txt
writing manifest file &#039;MANIFEST&#039;
creating foo-1.0
copying files to foo-1.0...
copying bar.py -&gt; foo-1.0
copying foo.py -&gt; foo-1.0
copying setup.py -&gt; foo-1.0
creating dist
creating &#039;dist\foo-1.0.zip&#039; and adding &#039;foo-1.0&#039; to it
adding &#039;foo-1.0\bar.py&#039;
adding &#039;foo-1.0\foo.py&#039;
adding &#039;foo-1.0\PKG-INFO&#039;
adding &#039;foo-1.0\setup.py&#039;
removing &#039;foo-1.0&#039; (and everything under it)
</pre>
<p class="paragraph">
→
<br />
</p>
<pre>C:\in_vitro\python\setup_pys\ex1
    dist\
        foo-1.0.zip
</pre>

<h4 id="idda8503">bdistコマンド</h4>

<p class="paragraph">
RPMやWindowsインストーラEXEなど、各platform用の一般的なインストールパッケージを生成する。
<br />
以下の例では、&quot;bdist_wininst&quot;として明示的にWindowsインストーラEXEを生成させている。
<br />
</p>
<pre>C:\in_vitro\python\setup_pys\ex1&gt;python setup.py bdist_wininst
running bdist_wininst
running build
running build_py
installing to build\bdist.win32\wininst
running install_lib
creating build\bdist.win32
creating build\bdist.win32\wininst
creating build\bdist.win32\wininst\PURELIB
copying build\lib\bar.py -&gt; build\bdist.win32\wininst\PURELIB
copying build\lib\foo.py -&gt; build\bdist.win32\wininst\PURELIB
running install_egg_info
Writing build\bdist.win32\wininst\PURELIB\foo-1.0-py2.5.egg-info
creating &#039;c:\docume~1\fengjing\locals~1\temp\tmpcpesih.zip&#039; and adding &#039;.&#039; to it
adding &#039;PURELIB\bar.py&#039;
adding &#039;PURELIB\foo-1.0-py2.5.egg-info&#039;
adding &#039;PURELIB\foo.py&#039;
removing &#039;build\bdist.win32\wininst&#039; (and everything under it)
</pre>
<p class="paragraph">
→
<br />
</p>
<pre>C:\in_vitro\python\setup_pys\ex1
    dist\
        foo-1.0.win32.exe
</pre>

<h4 id="id55e718">installコマンド</h4>

<p class="paragraph">
基本的にsite-packages以下にファイルをコピーする。但しhomeやprefixを指定することでかなり細かくインストール先を制御することもできる。
<br />
ディレクトリ指定のオプションだけでこれだけある。
<br />
</p>
<pre>Options for &#039;install&#039; command:
  --prefix            installation prefix
  --exec-prefix       (Unix only) prefix for platform-specific files
  --home              (Unix only) home directory to install under
  --install-base      base installation directory (instead of --prefix or --
                      home)
  --install-platbase  base installation directory for platform-specific files
                      (instead of --exec-prefix or --home)
  --root              install everything relative to this alternate root
                      directory
  --install-purelib   installation directory for pure Python module
                      distributions
  --install-platlib   installation directory for non-pure module distributions
  --install-lib       installation directory for all module distributions
                      (overrides --install-purelib and --install-platlib)
  --install-headers   installation directory for C/C++ headers
  --install-scripts   installation directory for Python scripts
  --install-data      installation directory for data files
</pre>

<p class="paragraph">
<strong>--dry-run</strong>または<strong>-n</strong>オプションを付けることで実際のファイルコピーの直前までをシミュレートできる。
<br />
</p>
<pre>C:\in_vitro\python\setup_pys\ex1&gt;python setup.py --dry-run install
running install
running build
running build_py
running install_lib
copying build\lib\bar.py -&gt; C:\Python25\Lib\site-packages
copying build\lib\foo.py -&gt; C:\Python25\Lib\site-packages
error: file &#039;C:\Python25\Lib\site-packages\bar.py&#039; does not exist
</pre>

<p class="paragraph">
通常のinstallコマンドではバイトコンパイルまで行ってくれる。
<br />
</p>
<pre>C:\in_vitro\python\setup_pys\ex1&gt;python setup.py install
running install
running build
running build_py
running install_lib
copying build\lib\bar.py -&gt; C:\Python25\Lib\site-packages
copying build\lib\foo.py -&gt; C:\Python25\Lib\site-packages
byte-compiling C:\Python25\Lib\site-packages\bar.py to bar.pyc
byte-compiling C:\Python25\Lib\site-packages\foo.py to foo.pyc
running install_egg_info
Writing C:\Python25\Lib\site-packages\foo-1.0-py2.5.egg-info
</pre>

<h4 id="id33f7cb">アンインストールと&quot;install --record ファイル名&quot;オプション</h4>

<p class="paragraph">
&quot;python setup.py uninstall&quot; で検索すると分かるが、基本的にsetup.pyではアンインストール機能は提供していない。
<br />
但し、installコマンドのオプションで &quot;--record ファイル名&quot;を付けることで、&quot;ファイル名&quot;にコピーされたファイルの一覧が保存される。これを元にファイルを手動あるいはスクリプトを使って削除することができる。
<br />
</p>

<pre>&gt; python setup.py install --record files.txt
running install
running build
running build_py
running install_lib
copying build\lib\bar.py -&gt; C:\Python25\Lib\site-packages
copying build\lib\foo.py -&gt; C:\Python25\Lib\site-packages
byte-compiling C:\Python25\Lib\site-packages\bar.py to bar.pyc
byte-compiling C:\Python25\Lib\site-packages\foo.py to foo.pyc
running install_egg_info
Writing C:\Python25\Lib\site-packages\foo-1.0-py2.5.egg-info
writing list of installed files to &#039;files.txt&#039;
</pre>

<p class="paragraph">
files.txtの中身：
<br />
</p>
<pre>C:\Python25\Lib\site-packages\foo.py
C:\Python25\Lib\site-packages\bar.py
C:\Python25\Lib\site-packages\foo.pyc
C:\Python25\Lib\site-packages\bar.pyc
C:\Python25\Lib\site-packages\foo-1.0-py2.5.egg-info
</pre>

<p class="paragraph">
see, &quot;There is no setup.py uninstall « Motho ke motho ka botho&quot;, 
<br />
<a class="externallink" href="http://kmandla.wordpress.com/2009/01/08/there-is-no-setuppy-uninstall/" target="_blank">http://kmandla.wordpress.com/2009/01/08/there-is-no-setuppy-uninstall/</a>
<br />
</p>

<h4 id="id0e2dcc">&quot;install --force&quot;による上書きインストール</h4>

<p class="paragraph">
&quot;--force&quot;オプションを付けることで、最新のファイルを強制的にコピーすることが出来る。
<br />
</p>
<pre>&gt; python setup.py install --force
running install
running build
running build_py
running install_lib
copying build\lib\bar.py -&gt; C:\Python25\Lib\site-packages
copying build\lib\baz.py -&gt; C:\Python25\Lib\site-packages
copying build\lib\foo.py -&gt; C:\Python25\Lib\site-packages
byte-compiling C:\Python25\Lib\site-packages\bar.py to bar.pyc
byte-compiling C:\Python25\Lib\site-packages\baz.py to baz.pyc
byte-compiling C:\Python25\Lib\site-packages\foo.py to foo.pyc
running install_egg_info
Removing C:\Python25\Lib\site-packages\foo-1.0-py2.5.egg-info
Writing C:\Python25\Lib\site-packages\foo-1.0-py2.5.egg-info
</pre>

<h3 id="idb9064b">パッケージをインストールするサンプル2種</h3>

<p class="paragraph">
Pythonスクリプトファイル(.py)だけで構成されたパッケージをインストールする場合のサンプルを載せる。
<br />
</p>

<h4 id="idbaa169">ソースディレクトリ名がパッケージ名と同一の場合</h4>

<p class="paragraph">
以下のようなソースツリーの場合、setup.pyから見たパッケージ名とディレクトリ名が一致しているので、&quot;packages&quot;にパッケージ名を指定するだけでよい。
<br />
</p>
<pre>C:\in_vitro\python\setup_pys\ex2
│  setup.py
│
├─testpkg1
│      foo.py
│      __init__.py
│
└─testpkg2
    │  bar.py
    │  __init__.py
    │
    └─sub
            baz.py
            __init__.py
</pre>
<p class="paragraph">
setup.py : 
<br />
</p>
<pre>from distutils.core import setup
setup(
    name=&#039;foo&#039;,
    version=&#039;1.0&#039;,
    packages=[&#039;testpkg1&#039;, &#039;testpkg2&#039;, &#039;testpkg2.sub&#039;],
    )
</pre>

<pre class="plugin_pre">
ex2&gt; python setup.py install --record files.txt
running install
running build
running build_py
creating build
creating build\lib
creating build\lib\testpkg1
copying testpkg1\foo.py -&gt; build\lib\testpkg1
copying testpkg1\__init__.py -&gt; build\lib\testpkg1
creating build\lib\testpkg2
copying testpkg2\bar.py -&gt; build\lib\testpkg2
copying testpkg2\__init__.py -&gt; build\lib\testpkg2
creating build\lib\testpkg2\sub
copying testpkg2\sub\baz.py -&gt; build\lib\testpkg2\sub
copying testpkg2\sub\__init__.py -&gt; build\lib\testpkg2\sub
running install_lib
creating C:\Python25\Lib\site-packages\testpkg1
copying build\lib\testpkg1\foo.py -&gt; C:\Python25\Lib\site-packages\testpkg1
copying build\lib\testpkg1\__init__.py -&gt; C:\Python25\Lib\site-packages\testpkg1
creating C:\Python25\Lib\site-packages\testpkg2
copying build\lib\testpkg2\bar.py -&gt; C:\Python25\Lib\site-packages\testpkg2
creating C:\Python25\Lib\site-packages\testpkg2\sub
copying build\lib\testpkg2\sub\baz.py -&gt; C:\Python25\Lib\site-packages\testpkg2\sub
copying build\lib\testpkg2\sub\__init__.py -&gt; C:\Python25\Lib\site-packages\testpkg2\sub
copying build\lib\testpkg2\__init__.py -&gt; C:\Python25\Lib\site-packages\testpkg2
byte-compiling C:\Python25\Lib\site-packages\testpkg1\foo.py to foo.pyc
byte-compiling C:\Python25\Lib\site-packages\testpkg1\__init__.py to __init__.pyc
byte-compiling C:\Python25\Lib\site-packages\testpkg2\bar.py to bar.pyc
byte-compiling C:\Python25\Lib\site-packages\testpkg2\sub\baz.py to baz.pyc
byte-compiling C:\Python25\Lib\site-packages\testpkg2\sub\__init__.py to __init__.pyc
byte-compiling C:\Python25\Lib\site-packages\testpkg2\__init__.py to __init__.pyc
running install_egg_info
Writing C:\Python25\Lib\site-packages\foo-1.0-py2.5.egg-info
writing list of installed files to &#039;files.txt&#039;
</pre>
<p class="paragraph">
files.txt : 
<br />
</p>
<pre>C:\Python25\Lib\site-packages\testpkg1\foo.py
C:\Python25\Lib\site-packages\testpkg1\__init__.py
C:\Python25\Lib\site-packages\testpkg2\bar.py
C:\Python25\Lib\site-packages\testpkg2\__init__.py
C:\Python25\Lib\site-packages\testpkg2\sub\baz.py
C:\Python25\Lib\site-packages\testpkg2\sub\__init__.py
C:\Python25\Lib\site-packages\testpkg1\foo.pyc
C:\Python25\Lib\site-packages\testpkg1\__init__.pyc
C:\Python25\Lib\site-packages\testpkg2\bar.pyc
C:\Python25\Lib\site-packages\testpkg2\__init__.pyc
C:\Python25\Lib\site-packages\testpkg2\sub\baz.pyc
C:\Python25\Lib\site-packages\testpkg2\sub\__init__.pyc
C:\Python25\Lib\site-packages\foo-1.0-py2.5.egg-info
</pre>

<h4 id="id938f6b">ソースディレクトリ名とパッケージ名が異なる場合</h4>

<p class="paragraph">
以下のような場合、setup.pyから見たソースディレクトリ名とパッケージ名が異なるため、別途&quot;package_dir&quot;オプションにてパッケージ名とディレクトリ名のマッチングを指定する。
<br />
</p>
<pre>C:\in_vitro\python\setup_pys\ex3
│  foo.py
│  setup.py
│  __init__.py
│
└─src
    │  bar.py
    │  __init__.py
    │
    └─abc
            baz.py
            __init__.py
</pre>
<p class="paragraph">
setup.py :
<br />
</p>
<pre>from distutils.core import setup
setup(
    name=&#039;foo&#039;,
    version=&#039;1.0&#039;,
    package_dir={&#039;pkg1&#039; : &#039;&#039;, &#039;pkg2&#039; : &#039;src&#039;, &#039;pkg2.sub&#039; : &#039;src/abc&#039;},
    packages=[&#039;pkg1&#039;, &#039;pkg2&#039;, &#039;pkg2.sub&#039;],
    )
</pre>
<p class="paragraph">
package_dirにはパッケージ名をキーとして、setup.pyからの相対パスを値とする辞書を設定する。
<br />
上記例だとpkg1には空文字列を指定しているが、空文字列だとsetup.pyの置かれているディレクトリになる。
<br />
</p>

<p class="paragraph">
<strong>--prefix</strong>オプション付きで、異なるディレクトリにインストールしてみる。
<br />
</p>
<pre class="plugin_pre">
&gt; python setup.py install --prefix C:\in_vitro\tmp\python --record files.txt
running install
running build
running build_py
creating build
creating build\lib
creating build\lib\pkg1
copying foo.py -&gt; build\lib\pkg1
copying __init__.py -&gt; build\lib\pkg1
creating build\lib\pkg2
copying src\bar.py -&gt; build\lib\pkg2
copying src\__init__.py -&gt; build\lib\pkg2
creating build\lib\pkg2\sub
copying src\abc\baz.py -&gt; build\lib\pkg2\sub
copying src\abc\__init__.py -&gt; build\lib\pkg2\sub
running install_lib
creating C:\in_vitro\tmp\python\Lib
creating C:\in_vitro\tmp\python\Lib\site-packages
creating C:\in_vitro\tmp\python\Lib\site-packages\pkg1
copying build\lib\pkg1\foo.py -&gt; C:\in_vitro\tmp\python\Lib\site-packages\pkg1
copying build\lib\pkg1\__init__.py -&gt; C:\in_vitro\tmp\python\Lib\site-packages\pkg1
creating C:\in_vitro\tmp\python\Lib\site-packages\pkg2
copying build\lib\pkg2\bar.py -&gt; C:\in_vitro\tmp\python\Lib\site-packages\pkg2
creating C:\in_vitro\tmp\python\Lib\site-packages\pkg2\sub
copying build\lib\pkg2\sub\baz.py -&gt; C:\in_vitro\tmp\python\Lib\site-packages\pkg2\sub
copying build\lib\pkg2\sub\__init__.py -&gt; C:\in_vitro\tmp\python\Lib\site-packages\pkg2\sub
copying build\lib\pkg2\__init__.py -&gt; C:\in_vitro\tmp\python\Lib\site-packages\pkg2
byte-compiling C:\in_vitro\tmp\python\Lib\site-packages\pkg1\foo.py to foo.pyc
byte-compiling C:\in_vitro\tmp\python\Lib\site-packages\pkg1\__init__.py to __init__.pyc
byte-compiling C:\in_vitro\tmp\python\Lib\site-packages\pkg2\bar.py to bar.pyc
byte-compiling C:\in_vitro\tmp\python\Lib\site-packages\pkg2\sub\baz.py to baz.pyc
byte-compiling C:\in_vitro\tmp\python\Lib\site-packages\pkg2\sub\__init__.py to __init__.pyc
byte-compiling C:\in_vitro\tmp\python\Lib\site-packages\pkg2\__init__.py to __init__.pyc
running install_egg_info
Writing C:\in_vitro\tmp\python\Lib\site-packages\foo-1.0-py2.5.egg-info
writing list of installed files to &#039;files.txt&#039;
</pre>
<p class="paragraph">
files.txt :
<br />
</p>
<pre>C:\in_vitro\tmp\python\Lib\site-packages\pkg1\foo.py
C:\in_vitro\tmp\python\Lib\site-packages\pkg1\__init__.py
C:\in_vitro\tmp\python\Lib\site-packages\pkg2\bar.py
C:\in_vitro\tmp\python\Lib\site-packages\pkg2\__init__.py
C:\in_vitro\tmp\python\Lib\site-packages\pkg2\sub\baz.py
C:\in_vitro\tmp\python\Lib\site-packages\pkg2\sub\__init__.py
C:\in_vitro\tmp\python\Lib\site-packages\pkg1\foo.pyc
C:\in_vitro\tmp\python\Lib\site-packages\pkg1\__init__.pyc
C:\in_vitro\tmp\python\Lib\site-packages\pkg2\bar.pyc
C:\in_vitro\tmp\python\Lib\site-packages\pkg2\__init__.pyc
C:\in_vitro\tmp\python\Lib\site-packages\pkg2\sub\baz.pyc
C:\in_vitro\tmp\python\Lib\site-packages\pkg2\sub\__init__.pyc
C:\in_vitro\tmp\python\Lib\site-packages\foo-1.0-py2.5.egg-info
</pre>

<h3 id="idbb8f1b">パッケージ探索ディレクトリの調整</h3>

<p class="paragraph">
パッケージの探索対象ディレクトリを調整するには、sys.pathを操作する。以下の調整で探索ディレクトリを操作できる。
<br />
</p>
<ol><li> Pythonスクリプト中で直接sys.pathの要素を操作する。</li>
<li> PYTHONHOME環境変数を編集し、プレフィクスを操作する。</li>
<li> PYTHONPATH環境変数を編集し、探索ディレクトリを追加する。</li></ol>

<p class="paragraph">
1. と 3. の方法で、前掲の&quot;C:\in_vitro\tmp\python&quot;にインストールしたパッケージをimportしてみる。
<br />
</p>

<h4 id="id39c566">Pythonスクリプト中で直接sys.pathの要素を操作する</h4>

<p class="paragraph">
単純にsys.path.append()で探索ディレクトリを末尾に追加してみる。
<br />
</p>

<pre class="plugin_pre">
C:\in_vitro&gt;python
Python 2.5.2 (r252:60911, Feb 21 2008, 13:11:45) [MSC v.1310 32 bit (Intel)] on win32
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; import sys
&gt;&gt;&gt; sys.path
[&#039;&#039;, &#039;C:\\WINDOWS\\system32\\python25.zip&#039;, ... , &#039;C:\\Python25\\lib\\site-packages&#039;]

&gt;&gt;&gt; sys.path.append(&#039;C:\\in_vitro\\tmp\\python\\Lib\\site-packages&#039;)

&gt;&gt;&gt; sys.path
[&#039;&#039;, &#039;C:\\WINDOWS\\system32\\python25.zip&#039;, ..., &#039;C:\\Python25\\lib\\site-packages&#039;, 
       &#039;C:\\in_vitro\\tmp\\python\\Lib\\site-packages&#039;]
&gt;&gt;&gt; import pkg1
&gt;&gt;&gt; import pkg2
&gt;&gt;&gt; import pkg2.sub
&gt;&gt;&gt; pkg1.__file__
&#039;C:\\in_vitro\\tmp\\python\\Lib\\site-packages\\pkg1\\__init__.pyc&#039;
</pre>

<h4 id="idbfa074">PYTHONPATH環境変数を編集し、探索ディレクトリを追加する</h4>

<p class="paragraph">
PYTHONPATHで設定した場合、探索ディレクトリの頭に追加される。
<br />
</p>
<pre class="plugin_pre">
C:\in_vitro&gt;set PYTHONPATH=C:\in_vitro\tmp\python\Lib\site-packages

C:\in_vitro&gt;python
Python 2.5.2 (r252:60911, Feb 21 2008, 13:11:45) [MSC v.1310 32 bit (Intel)] on win32
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; import sys
&gt;&gt;&gt; sys.path
[&#039;&#039;, &#039;C:\\in_vitro\\tmp\\python\\Lib\\site-packages&#039;, 
  &#039;C:\\WINDOWS\\system32\\python25.zip&#039;, ..., &#039;C:\\Python25\\lib\\site-packages&#039;]
&gt;&gt;&gt; import pkg1
&gt;&gt;&gt; import pkg2
&gt;&gt;&gt; import pkg2.sub
&gt;&gt;&gt; pkg2.__file__
&#039;C:\\in_vitro\\tmp\\python\\Lib\\site-packages\\pkg2\\__init__.pyc&#039;
</pre>

<hr class="full_hr" />
<ul class="plugin_navi">
<li>[&nbsp;<a href="./view-820.html" title="Python/pydbg, pydasmをPython2.5 on WindowsXPにインストール">Prev</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-374.html" title="Python/setuptools, easy_install, eggパッケージ, pipメモ">Next</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-184.html" title="Python">Up</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-184.html" title="Python">Python</a>&nbsp;]</li>
</ul><div class="footnote">
<a id="footnote_373_1" href="#footnote_373_1_r">*1</a>: 1.5.2までは独立したパッケージだった
</div>
</div>

<div class="data_attrs_post">
original url: https://www.glamenv-septzen.net/view/373<br>
</div>

</div>
<!-- //data_main -->

</div>


</div>
<!-- /content-wrap end -->

<!-- footer start -->
<div id="footer">
Copyright &copy; 2001 - 2025 Masahiko Sakamoto(msakamoto-sf)<br>
License&nbsp;:&nbsp;<a target="_blank" href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a><br>
Contact&nbsp;:&nbsp;<a target="_blank" href="https://x.com/msakamoto_sf">x(twitter)</a> / <a target="_blank" href="https://github.com/msakamoto-sf/">github</a> / <a class="maillink" target="_blank" href="mailto:&#x73;&#x61;&#x6B;&#x61;&#x6D;&#x6F;&#x74;&#x6F;&#x2E;&#x67;&#x73;&#x79;&#x63;&#x2E;&#x33;&#x73;&#x40;&#x67;&#x6D;&#x61;&#x69;&#x6C;&#x2E;&#x63;&#x6F;&#x6D;">email</a><br>
--&nbsp;Beautiful Icons&nbsp;--<br />
<a href="http://www.famfamfam.com/lab/icons/silk/" target="_blank" title="Mark James Silk icon set 1.3">Mark James Silk icon set 1.3</a> by famfamfam<br />
<a href="http://www.pinvoke.com/" target="_blank" title="Fugue Icons">Fugue Icons</a> by Yusuke Kamiyamane<br />
</div>
<!-- /footer end -->

</div>
<!-- /body end -->

</body>
</html>