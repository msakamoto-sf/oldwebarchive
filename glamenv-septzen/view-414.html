<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Erlang/基礎 - Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)</title>
<!-- favicon 2017's reference:
https://developers.google.com/web/fundamentals/design-and-ui/browser-customization/
https://msdn.microsoft.com/ja-jp/library/dn455106(v=vs.85).aspx
https://developer.chrome.com/multidevice/android/installtohomescreen
https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html
-->
<link rel="shortcut icon" href="../favicons/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="icon" href="../favicons/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="apple-touch-icon" sizes="57x57" href="../favicons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="../favicons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="../favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="../favicons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="../favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="../favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="../favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="../favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="../favicons/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="../favicons/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="../favicons/favicon-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="../favicons/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-160x160.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-196x196.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../favicons/favicon-32x32.png" sizes="32x32">

<!-- browserconfig.xml : https://msdn.microsoft.com/ja-jp/library/dn455106(v=vs.85).aspx -->
<meta name="msapplication-TileColor" content="#990000">
<meta name="msapplication-TileImage" content="../favicons/mstile-144x144.png">

<!-- these favicon files were generated by https://ao-system.net/favicongenerator/ , thanks!!(2017-02-18) -->

<style type="text/css"></style>

<link href="./css/pcbrowser.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/pcbrowser_plugins.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/pcbrowser_wiki.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/print.css" rel="stylesheet" type="text/css" media="print"/>
</head>
<body>
<!-- body start -->
<div class="body">
<div style="display: inline"><a name="pagetop"></a></div>
<div id="header-wrap">
<img src="./images/logo1.jpg" style="float: left; margin-right: 1em;"/>
<a href="./index.html" title="Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)"><img src="./icons/home.png" alt="home"/>&nbsp;Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)</a>


<h1 style="margin-bottom: 10px;">Erlang/基礎</h1>

<div style="clear: both;"></div>
</div><!-- //header-wrap -->

<!-- content-wrap start -->
<div id="content-wrap"><div class="contents_s">

<!-- data_main -->
<div class="data_main">

<div class="data_attrs_pre">
作成日: 2009-08-02 07:37:20 &nbsp; / &nbsp; last updated at: 2009-08-03 23:56:12<br>
カテゴリ: <a href="category-47.html">Erlang</a>&nbsp;</div>

<div class="data_body">
<ul class="plugin_navi">
<li>[&nbsp;<a href="./view-420.html" title="Erlang/exercie/echo_server, client">Prev</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-409.html" title="Erlang">Erlang</a>&nbsp;]</li>
</ul>
<hr class="full_hr" />

<p class="paragraph">
Erlangシェルの起動停止, ロードパスの調整, コンパイルと実行などのメモ。
<br />
</p>




<ul><li><a href="#idf0bc4a">Erlangシェル</a><ul><li><a href="#id541b4f">Erlangシェルの実行</a></li>
<li><a href="#id29c792">Erlangシェルの終了方法</a></li>
<li><a href="#id4dd51e">Erlangシェルコマンドのヘルプ</a></li></ul></li>
<li><a href="#id0f105f">パス設定</a><ul><li><a href="#id6c8928">パスの追加</a></li>
<li><a href="#id5c5c8e">ホームディレクトリの取得</a></li></ul></li>
<li><a href="#id94b754">プログラムのコンパイルや実行方法</a><ul><li><a href="#id4adab2">Erlangシェル上でコンパイル＋実行</a></li>
<li><a href="#idb8146e">コマンドプロンプトからコンパイル＋実行</a></li>
<li><a href="#id7aac0e">escriptとして実行</a></li></ul></li>
<li><a href="#id893d64">コマンドライン引数の取得</a><ul><li><a href="#idb204f2">&quot;-run&quot;(-s)経由で取得</a></li>
<li><a href="#id66ed64">&quot;--&quot;に続けて指定</a></li></ul></li>
<li><a href="#id690db6">ドキュメントガイド</a></li></ul>
<hr />
<h3 id="idf0bc4a">Erlangシェル</h3>

<h4 id="id541b4f">Erlangシェルの実行</h4>

<p class="paragraph">
Win:
<br />
</p>
<pre>DOS&gt; erl
</pre>

<p class="paragraph">
UNIX:
<br />
</p>
<pre>$ erl
</pre>

<h4 id="id29c792">Erlangシェルの終了方法</h4>

<pre>1&gt; q().
</pre>
<p class="paragraph">
又は
<br />
</p>
<pre>1&gt; init:stop().
</pre>

<h4 id="id4dd51e">Erlangシェルコマンドのヘルプ</h4>

<pre>1&gt; help().
</pre>
<p class="paragraph">
結果(Eshell V5.6.3):
<br />
</p>
<pre class="plugin_pre">
** shell internal commands **
b()        -- display all variable bindings
e(N)       -- repeat the expression in query &lt;N&gt;
f()        -- forget all variable bindings
f(X)       -- forget the binding of variable X
h()        -- history
history(N) -- set how many previous commands to keep
results(N) -- set how many previous command results to keep
v(N)       -- use the value of query &lt;N&gt;
rd(R,D)    -- define a record
rf()       -- remove all record information
rf(R)      -- remove record information about R
rl()       -- display all record information
rl(R)      -- display record information about R
rp(Term)   -- display Term using the shell&#039;s record information
rr(File)   -- read record information from File (wildcards allowed)
rr(F,R)    -- read selected record information from file(s)
rr(F,R,O)  -- read selected record information with options
** commands in module c **
bt(Pid)    -- stack backtrace for a process
c(File)    -- compile and load code in &lt;File&gt;
cd(Dir)    -- change working directory
flush()    -- flush any messages sent to the shell
help()     -- help info
i()        -- information about the system
ni()       -- information about the networked system
i(X,Y,Z)   -- information about pid &lt;X,Y,Z&gt;
l(Module)  -- load or reload module
lc([File]) -- compile a list of Erlang modules
ls()       -- list files in the current directory
ls(Dir)    -- list files in directory &lt;Dir&gt;
m()        -- which modules are loaded
m(Mod)     -- information about module &lt;Mod&gt;
memory()   -- memory allocation information
memory(T)  -- memory allocation information of type &lt;T&gt;
nc(File)   -- compile and load code in &lt;File&gt; on all nodes
nl(Module) -- load module on all nodes
pid(X,Y,Z) -- convert X,Y,Z to a Pid
pwd()      -- print working directory
q()        -- quit - shorthand for init:stop()
regs()     -- information about registered processes
nregs()    -- information about all registered processes
xm(M)      -- cross reference check a module
y(File)    -- generate a Yecc parser
** commands in module i (interpreter interface) **
ih()       -- print help for the i module
true
</pre>

<h3 id="id0f105f">パス設定</h3>

<p class="paragraph">
コード(=モジュール, モジュール名.beam)のロードパスを確認：
<br />
</p>
<pre class="plugin_pre">
1&gt; code:get_path().
[&quot;.&quot;,&quot;c:/PROGRA~1/ERL56~1.3/lib/kernel-2.12.3/ebin&quot;,
 &quot;c:/PROGRA~1/ERL56~1.3/lib/stdlib-1.15.3/ebin&quot;,
 &quot;c:/PROGRA~1/ERL56~1.3/lib/xmerl-1.1.9/ebin&quot;,
 &quot;c:/PROGRA~1/ERL56~1.3/lib/webtool-0.8.3.2/ebin&quot;,
 &quot;c:/PROGRA~1/ERL56~1.3/lib/typer-0.1.3/ebin&quot;,
 [...]|...].
</pre>

<p class="paragraph">
ロードされている全モジュールの一覧を確認：
<br />
</p>
<pre class="plugin_pre">
1&gt; code:all_loaded().
[{io,&quot;c:/PROGRA~1/ERL56~1.3/lib/stdlib-1.15.3/ebin/io.beam&quot;},
 ...
</pre>

<h4 id="id6c8928">パスの追加</h4>

<p class="paragraph">
ロードパスの先頭に追加：
<br />
</p>
<pre>code:add_patha(Dir)
or
$ erl -pa Dir1 -pa Dir2 ...
</pre>
<p class="paragraph">
ロードパスの末尾に追加：
<br />
</p>
<pre>code:add_pathz(Dir)
or 
$ erl -pz Dir1 -pz Dir2 ...
</pre>

<h4 id="id5c5c8e">ホームディレクトリの取得</h4>

<p class="paragraph">
Erlang起動時に、以下の優先順位で &quot;.erlang&quot; ファイルが読み込まれErlangコードとして実行される。
<br />
</p>
<ol><li> &quot;./.erlang&quot;(カレントディレクトリ)</li>
<li> &quot;$HOME/.erlang&quot;(ホームディレクトリ)</li></ol>

<p class="paragraph">
もしもホームディレクトリに置いたつもりなのに実行されない場合は、Erlangが認識するホームディレクトリを確認し、そちらに置いてみる。
<br />
Erlangが認識するホームディレクトリはinit:get_argument(home)で取得できる。
<br />
</p>
<pre>1&gt; init:get_argument(home).
{ok,[[&quot;C:\\Documents and Settings\\FengJing&quot;]]}
</pre>

<h3 id="id94b754">プログラムのコンパイルや実行方法</h3>

<p class="paragraph">
サンプルで使うプログラム：hello.erl
<br />
</p>
<pre>-module(hello).
-export([start/0]).

start() -&gt; io:format(&quot;Hello, Erlang!~n&quot;).
</pre>

<h4 id="id4adab2">Erlangシェル上でコンパイル＋実行</h4>

<pre class="plugin_pre">
DOS&gt; erl
Eshell V5.6.3  (abort with ^G)
1&gt; ls().
... hello.erl ...
ok
2&gt; c(hello).
{ok,hello}
3&gt; ls().
... hello.beam  hello.erl ...
ok
4&gt; hello:start().
Hello, Erlang!
ok
</pre>

<h4 id="idb8146e">コマンドプロンプトからコンパイル＋実行</h4>

<p class="paragraph">
Erlangシェルを起動せず、OSのコマンドプロンプトだけで完結させる。
<br />
</p>
<pre>DOS&gt; erlc hello.erl
DOS&gt; erl -noshell -s hello start -s init stop
</pre>

<p class="paragraph">
initモジュールのマニュアル(Kernel Reference Manual, init)を読むと&quot;-run&quot;も使える事が分かる。
<br />
</p>
<pre>DOS&gt; erl -noshell -run hello start -run init stop
</pre>

<p class="paragraph">
解説自体も一緒。ただし&quot;-s&quot;の方にだけ次の一文がある。(erl5.6.3/lib/kernel-2.12.3)
<br />
</p>
<pre>Due to the limited length of atoms, it is recommended that -run be used instead.
</pre>
<p class="paragraph">
内部処理の違いかも知れないが、&quot;-run&quot;の方がオススメらしい。&quot;-s&quot;はapply()を使うようだが、それと関連しているのだろうか。
<br />
</p>

<p class="paragraph">
&quot;-noshell&quot;は、&quot;-pa&quot;, &quot;-pz&quot;によるロードパス調整と併せて、シェルスクリプト中で活用できる。
<br />
</p>

<h4 id="id7aac0e">escriptとして実行</h4>

<p class="paragraph">
hello.erls:
<br />
</p>
<pre>#!/usr/bin/env escript
main(Arg) -&gt; 
	io:format(&quot;Argument is ~p~n&quot;, [Arg]), 
	lists:map(fun(X) -&gt; io:format(&quot;~p~n&quot;, [X]) end, init:get_plain_arguments()), 
	io:format(&quot;Hello, Erlang!~n&quot;).
</pre>

<pre class="plugin_pre">
DOS&gt; escript hello.erls
Argument is []
&quot;hello.erls&quot;
Hello, Erlang!

DOS&gt; escript hello.erls a b c
Argument is [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;]
&quot;hello.erls&quot;
&quot;a&quot;
&quot;b&quot;
&quot;c&quot;
Hello, Erlang!
</pre>

<p class="paragraph">
ちなみに、Windowsだからといってシェバン行を省略し、1行目からmain/1を書くと
<br />
</p>
<pre>DOS&gt; escript hello.erls
hello.erls:2: syntax error before: &#039;:&#039;
escript: There were compilation errors.
</pre>
<p class="paragraph">
と怒られます。1行目はコメント又は空行にしておく必要が有るみたいです。普通にシェバン行にして置いた方が無難でしょう。
<br />
</p>

<p class="paragraph">
ちなみに拡張子の&quot;.erls&quot;は適当につけただけです。escript用の拡張子の標準って・・・あるのかな？
<br />
</p>

<h3 id="id893d64">コマンドライン引数の取得</h3>

<p class="paragraph">
escriptの例でコマンドライン引数を受け取ってみたが、実際に何パターンか試してみる。
<br />
</p>

<p class="paragraph">
get_arsg.erl:
<br />
</p>
<pre class="plugin_pre">
-module(get_args).
-export([hello/1]).

hello(Arg) -&gt; 
	io:format(&quot;Argument is ~p~n&quot;, [Arg]), 
	lists:map(fun(X) -&gt; io:format(&quot;~p~n&quot;, [X]) end, init:get_plain_arguments()), 
	io:format(&quot;Hello, Erlang!~n&quot;).
</pre>

<pre>DOS&gt; erl a b c
Eshell V5.6.3  (abort with ^G)
1&gt; get_args:hello(foo).
Argument is foo
Hello, Erlang!
ok
</pre>

<h4 id="idb204f2">&quot;-run&quot;(-s)経由で取得</h4>

<p class="paragraph">
&quot;-run&quot;では引数も追加で指定できるので、次のように関数への引数として、コマンドライン引数を渡す事が出来る。
<br />
</p>

<pre>DOS&gt; erl -noshell -run get_args hello foo -run init stop
Argument is [&quot;foo&quot;]
Hello, Erlang!
</pre>

<p class="paragraph">
ただしこの場合、init:get_plain_arguments/0 は空っぽとなる。
<br />
</p>

<h4 id="id66ed64">&quot;--&quot;に続けて指定</h4>

<p class="paragraph">
&quot;--&quot;に続けると、erl自体のオプションとはならず、init:get_plain_arguments/0 で取得できる。
<br />
</p>

<pre>DOS&gt; erl -noshell -run get_args hello foo -run init stop -- a b c d
Argument is [&quot;foo&quot;]
&quot;a&quot;
&quot;b&quot;
&quot;c&quot;
&quot;d&quot;
Hello, Erlang!
</pre>

<h3 id="id690db6">ドキュメントガイド</h3>

<ul><li> 最新ドキュメント<ul><li> <a class="externallink" href="http://erlang.org/doc/index.html" target="_blank">http://erlang.org/doc/index.html</a></li></ul></li></ul>

<p class="paragraph">
このページを書く時に調べた code, init モジュールのドキュメントは次の順序で辿る。
<br />
&quot;Basic Applications&quot; -&gt; &quot;kernel&quot; -&gt; &quot;Kernel Reference Manual&quot;
<br />
</p>

<p class="paragraph">
erlコマンドやerlcコマンドのヘルプについては次の順序で辿る。
<br />
&quot;Basic Applications&quot; -&gt; &quot;erts&quot; -&gt; &quot;ERTS Reference Manual&quot;
<br />
</p>

<p class="paragraph">
ioやlistsモジュールなど、標準ライブラリのモジュールについては次の順序で辿る。
<br />
&quot;Basic Applications&quot; -&gt; &quot;stdlib&quot; -&gt; &quot;STDLIB Reference Manual&quot;
<br />
</p>

<p class="paragraph">
ファイル操作系は大凡次の4つのモジュールを使う事になる。
<br />
</p>
<ul><li> &quot;Basic Applications&quot; -&gt; &quot;kernel&quot; -&gt; &quot;Kernel Reference Manual&quot;<ul><li> &quot;file&quot; モジュール : ファイルのopen/close/read/writeなど低レベルの操作</li></ul></li>
<li> &quot;Basic Applications&quot; -&gt; &quot;stdlib&quot; -&gt; &quot;STDLIB Reference Manual&quot;<ul><li> &quot;filelib&quot; モジュール : ensure_dir(), is_dir(), is_file(), last_modified()などのショートカット関数</li>
<li> &quot;filename&quot; モジュール : basename(), dirname(), absname() など一般的なパス名操作関数群</li>
<li> &quot;io&quot; モジュール : ファイル操作というよりは標準入出力処理の関数群。io_libも見ておくと良い。</li></ul></li></ul>

<hr class="full_hr" />
<ul class="plugin_navi">
<li>[&nbsp;<a href="./view-420.html" title="Erlang/exercie/echo_server, client">Prev</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-409.html" title="Erlang">Up</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-409.html" title="Erlang">Erlang</a>&nbsp;]</li>
</ul>
</div>

<div class="data_attrs_post">
original url: https://www.glamenv-septzen.net/view/414<br>
</div>

</div>
<!-- //data_main -->

</div>


</div>
<!-- /content-wrap end -->

<!-- footer start -->
<div id="footer">
Copyright &copy; 2007 - 2025 Masahiko Sakamoto(msakamoto-sf)<br>
License&nbsp;:&nbsp;<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a><br>
Contact&nbsp;:&nbsp;<a target="_blank" href="https://x.com/msakamoto_sf">x(twitter)</a> / <a target="_blank" href="https://github.com/msakamoto-sf/">github</a> / <a class="maillink" href="mailto:&#x73;&#x61;&#x6B;&#x61;&#x6D;&#x6F;&#x74;&#x6F;&#x2E;&#x67;&#x73;&#x79;&#x63;&#x2E;&#x33;&#x73;&#x40;&#x67;&#x6D;&#x61;&#x69;&#x6C;&#x2E;&#x63;&#x6F;&#x6D;">email</a><br>
--&nbsp;Beautiful Icons&nbsp;--<br />
<a href="http://www.famfamfam.com/lab/icons/silk/" target="_blank" title="Mark James Silk icon set 1.3">Mark James Silk icon set 1.3</a> by famfamfam<br />
<a href="http://www.pinvoke.com/" target="_blank" title="Fugue Icons">Fugue Icons</a> by Yusuke Kamiyamane<br />
</div>
<!-- /footer end -->

</div>
<!-- /body end -->

</body>
</html>