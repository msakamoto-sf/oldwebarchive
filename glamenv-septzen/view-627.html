<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>C言語系/呼び出し規約/x86/&quot;WINAPI&quot;他 - Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)</title>
<!-- favicon 2017's reference:
https://developers.google.com/web/fundamentals/design-and-ui/browser-customization/
https://msdn.microsoft.com/ja-jp/library/dn455106(v=vs.85).aspx
https://developer.chrome.com/multidevice/android/installtohomescreen
https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html
-->
<link rel="shortcut icon" href="../favicons/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="icon" href="../favicons/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="apple-touch-icon" sizes="57x57" href="../favicons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="../favicons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="../favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="../favicons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="../favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="../favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="../favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="../favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="../favicons/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="../favicons/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="../favicons/favicon-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="../favicons/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-160x160.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-196x196.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../favicons/favicon-32x32.png" sizes="32x32">

<!-- browserconfig.xml : https://msdn.microsoft.com/ja-jp/library/dn455106(v=vs.85).aspx -->
<meta name="msapplication-TileColor" content="#990000">
<meta name="msapplication-TileImage" content="../favicons/mstile-144x144.png">

<!-- these favicon files were generated by https://ao-system.net/favicongenerator/ , thanks!!(2017-02-18) -->

<style type="text/css"></style>

<link href="./css/pcbrowser.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/pcbrowser_plugins.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/pcbrowser_wiki.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/print.css" rel="stylesheet" type="text/css" media="print"/>
</head>
<body>
<!-- body start -->
<div class="body">
<div style="display: inline"><a name="pagetop"></a></div>
<div id="header-wrap">
<img src="./images/logo1.jpg" style="float: left; margin-right: 1em;"/>
<a href="./index.html" title="Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)"><img src="./icons/home.png" alt="home"/>&nbsp;Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)</a>


<h1 style="margin-bottom: 10px;">C言語系/呼び出し規約/x86/&quot;WINAPI&quot;他</h1>

<div style="clear: both;"></div>
</div><!-- //header-wrap -->

<!-- content-wrap start -->
<div id="content-wrap"><div class="contents_s">

<!-- data_main -->
<div class="data_main">

<div class="data_attrs_pre">
作成日: 2010-03-17 17:52:51 &nbsp; / &nbsp; last updated at: 2010-03-19 20:32:19<br>
カテゴリ: <a href="category-48.html">Assembler</a>&nbsp;<a href="category-10.html">C言語</a>&nbsp;<a href="category-8.html">Windows</a>&nbsp;</div>

<div class="data_body">
<ul class="plugin_navi">
<li>[&nbsp;<a href="./view-626.html" title="C言語系/呼び出し規約/x86/&quot;PASCAL&quot;">Prev</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-617.html" title="C言語系/呼び出し規約/x86/cdecl">Next</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-478.html" title="C言語系">C言語系</a>&nbsp;]</li>
</ul>
<hr class="full_hr" />

<p class="paragraph">
<strong>&quot;WINAPI&quot;, &quot;CALLBACK&quot;, &quot;APIENTRY&quot;</strong>はヘッダーファイルで定義された呼び出し規約で、実際にどの呼び出し規約(&quot;__stdcall&quot;, &quot;__cdecl&quot;, &quot;__pascal&quot;, ...)になるかは OS/コンパイラによって異なってくるので、使用する場合は注意が必要。
<br />
</p>

<p class="paragraph">
<strong>ただし、2010年現在の Win32 APIプラットフォームにおいては基本的にどれも &quot;__stdcall&quot; と考えて良い。</strong>
<br />
VC++2008, Borland C++ Compiler, OpenWatcom(32bit), MinGW-gcc 共に、この3つは&quot;__stdcall&quot;にdefineされている。
<br />
</p>



<hr />
<ul><li><a href="#id8b0b1a">サンプルコード(winapis.c)</a></li>
<li><a href="#idd332e6">VC++2008 Express Edtion</a><ul><li><a href="#id62c193">アセンブラ出力(winapis.asm)</a></li></ul></li>
<li><a href="#id7b9da1">Borland C++ Compiler</a><ul><li><a href="#id62c193">アセンブラ出力(winapis.asm)</a></li></ul></li>
<li><a href="#idd87575">OpenWatcom Compiler(16bit)</a><ul><li><a href="#id62c193">アセンブラ出力(winapis.asm)</a></li></ul></li>
<li><a href="#id00b417">OpenWatcom Compiler(32bit)</a><ul><li><a href="#id62c193">アセンブラ出力(winapis.asm)</a></li></ul></li>
<li><a href="#idc8e847">GCC-3.4.5, MinGW-5.1.6, MSYS 1.0</a><ul><li><a href="#id62c193">アセンブラ出力(winapis.asm)</a></li></ul></li></ul>
<hr />
<h3 id="id8b0b1a">サンプルコード(winapis.c)</h3>

<p class="paragraph">
WINAPI, CALLBACK, APIENTRY はWin32API用なので、使うにはWindows用のヘッダーファイルをincludeする必要がある。今回は &quot;windows.h&quot; をincludeした。
<br />
</p>

<div class="hl-main"><pre><span >#include</span><span > </span><span class="hl-quotes">&lt;</span><span class="hl-string">stdio.h</span><span class="hl-quotes">&gt;</span><span ></span><span class="hl-code">
</span><span >#include</span><span > </span><span class="hl-quotes">&lt;</span><span class="hl-string">windows.h</span><span class="hl-quotes">&gt;</span><span ></span><span class="hl-code">
 
</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">WINAPI</span><span class="hl-code">
</span><span class="hl-identifier">foo1</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">d</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> + </span><span class="hl-identifier">b</span><span class="hl-code"> + </span><span class="hl-identifier">c</span><span class="hl-code"> + </span><span class="hl-identifier">d</span><span class="hl-code"> + </span><span class="hl-identifier">e</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">CALLBACK</span><span class="hl-code">
</span><span class="hl-identifier">foo2</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">d</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> + </span><span class="hl-identifier">b</span><span class="hl-code"> + </span><span class="hl-identifier">c</span><span class="hl-code"> + </span><span class="hl-identifier">d</span><span class="hl-code"> + </span><span class="hl-identifier">e</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">APIENTRY</span><span class="hl-code">
</span><span class="hl-identifier">foo3</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">d</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> + </span><span class="hl-identifier">b</span><span class="hl-code"> + </span><span class="hl-identifier">c</span><span class="hl-code"> + </span><span class="hl-identifier">d</span><span class="hl-code"> + </span><span class="hl-identifier">e</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">main</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">argc</span><span class="hl-code">, </span><span >char</span><span class="hl-code"> *</span><span class="hl-identifier">argv</span><span class="hl-brackets">[</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
    </span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">foo1() = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">foo1</span><span class="hl-brackets">(</span><span class="hl-number">1</span><span class="hl-code">, </span><span class="hl-number">2</span><span class="hl-code">, </span><span class="hl-number">3</span><span class="hl-code">, </span><span class="hl-number">4</span><span class="hl-code">, </span><span class="hl-number">5</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">foo2() = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">foo2</span><span class="hl-brackets">(</span><span class="hl-number">6</span><span class="hl-code">, </span><span class="hl-number">7</span><span class="hl-code">, </span><span class="hl-number">8</span><span class="hl-code">, </span><span class="hl-number">9</span><span class="hl-code">, </span><span class="hl-number">0</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">foo3() = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">foo3</span><span class="hl-brackets">(</span><span class="hl-number">10</span><span class="hl-code">, </span><span class="hl-number">20</span><span class="hl-code">, </span><span class="hl-number">30</span><span class="hl-code">, </span><span class="hl-number">40</span><span class="hl-code">, </span><span class="hl-number">50</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-number">0</span><span class="hl-code">;
</span><span class="hl-brackets">}</span></pre></div>

<h3 id="idd332e6">VC++2008 Express Edtion</h3>

<p class="paragraph">
プリプロセス結果およびアセンブラ出力から、&quot;__stdcall&quot; にdefineされている事が分かる。
<br />
</p>

<p class="paragraph">
コンパイル＆リンク＆実行
<br />
</p>
<pre class="plugin_pre">
&gt; cl /FAs /TC /Od /nologo /c winapis.c
&gt; link /SUBSYSTEM:CONSOLE /NOLOGO /OUT:winapis.exe winapis.obj
&gt; winapis.exe
foo1() = 15
foo2() = 30
foo3() = 150
</pre>

<p class="paragraph">
プリプロセス結果を生成：
<br />
</p>
<pre>&gt; cl /P /TC /Od /nologo /c winapis.c
</pre>

<p class="paragraph">
プリプロセス結果：
<br />
</p>
<div class="hl-main"><pre><span >#line</span><span class="hl-code"> </span><span class="hl-number">3</span><span class="hl-code"> </span><span class="hl-quotes">&quot;</span><span class="hl-string">winapis.c</span><span class="hl-quotes">&quot;</span><span ></span><span class="hl-code">
 
</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">__stdcall</span><span class="hl-code">
</span><span class="hl-identifier">foo1</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">d</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> + </span><span class="hl-identifier">b</span><span class="hl-code"> + </span><span class="hl-identifier">c</span><span class="hl-code"> + </span><span class="hl-identifier">d</span><span class="hl-code"> + </span><span class="hl-identifier">e</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">__stdcall</span><span class="hl-code">
</span><span class="hl-identifier">foo2</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">d</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> + </span><span class="hl-identifier">b</span><span class="hl-code"> + </span><span class="hl-identifier">c</span><span class="hl-code"> + </span><span class="hl-identifier">d</span><span class="hl-code"> + </span><span class="hl-identifier">e</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">__stdcall</span><span class="hl-code">
</span><span class="hl-identifier">foo3</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">d</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> + </span><span class="hl-identifier">b</span><span class="hl-code"> + </span><span class="hl-identifier">c</span><span class="hl-code"> + </span><span class="hl-identifier">d</span><span class="hl-code"> + </span><span class="hl-identifier">e</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">main</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">argc</span><span class="hl-code">, </span><span >char</span><span class="hl-code"> *</span><span class="hl-identifier">argv</span><span class="hl-brackets">[</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
    </span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">foo1() = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">foo1</span><span class="hl-brackets">(</span><span class="hl-number">1</span><span class="hl-code">, </span><span class="hl-number">2</span><span class="hl-code">, </span><span class="hl-number">3</span><span class="hl-code">, </span><span class="hl-number">4</span><span class="hl-code">, </span><span class="hl-number">5</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">foo2() = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">foo2</span><span class="hl-brackets">(</span><span class="hl-number">6</span><span class="hl-code">, </span><span class="hl-number">7</span><span class="hl-code">, </span><span class="hl-number">8</span><span class="hl-code">, </span><span class="hl-number">9</span><span class="hl-code">, </span><span class="hl-number">0</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">foo3() = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">foo3</span><span class="hl-brackets">(</span><span class="hl-number">10</span><span class="hl-code">, </span><span class="hl-number">20</span><span class="hl-code">, </span><span class="hl-number">30</span><span class="hl-code">, </span><span class="hl-number">40</span><span class="hl-code">, </span><span class="hl-number">50</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-number">0</span><span class="hl-code">;
</span><span class="hl-brackets">}</span></pre></div>

<h4 id="id62c193">アセンブラ出力(winapis.asm)</h4>
<pre class="plugin_pre">
; Listing generated by Microsoft (R) Optimizing Compiler Version 15.00.30729.01 

	TITLE	C:\in_vitro\c\cc_vc\winapis.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

_DATA	SEGMENT
$SG78612 DB	&#039;foo1() = %d&#039;, 0aH, 00H
	ORG $+3
$SG78613 DB	&#039;foo2() = %d&#039;, 0aH, 00H
	ORG $+3
$SG78614 DB	&#039;foo3() = %d&#039;, 0aH, 00H
_DATA	ENDS
PUBLIC	_foo1@20
; Function compile flags: /Odtp
; File c:\in_vitro\c\cc_vc\winapis.c
_TEXT	SEGMENT
_a$ = 8							; size = 4
_b$ = 12						; size = 4
_c$ = 16						; size = 4
_d$ = 20						; size = 4
_e$ = 24						; size = 4
_foo1@20 PROC

; 6    : { return a + b + c + d + e; }

	push	ebp
	mov	ebp, esp
	mov	eax, DWORD PTR _a$[ebp]
	add	eax, DWORD PTR _b$[ebp]
	add	eax, DWORD PTR _c$[ebp]
	add	eax, DWORD PTR _d$[ebp]
	add	eax, DWORD PTR _e$[ebp]
	pop	ebp
	ret	20					; 00000014H
_foo1@20 ENDP
_TEXT	ENDS
PUBLIC	_foo2@20
; Function compile flags: /Odtp
_TEXT	SEGMENT
_a$ = 8							; size = 4
_b$ = 12						; size = 4
_c$ = 16						; size = 4
_d$ = 20						; size = 4
_e$ = 24						; size = 4
_foo2@20 PROC

; 10   : { return a + b + c + d + e; }

	push	ebp
	mov	ebp, esp
	mov	eax, DWORD PTR _a$[ebp]
	add	eax, DWORD PTR _b$[ebp]
	add	eax, DWORD PTR _c$[ebp]
	add	eax, DWORD PTR _d$[ebp]
	add	eax, DWORD PTR _e$[ebp]
	pop	ebp
	ret	20					; 00000014H
_foo2@20 ENDP
_TEXT	ENDS
PUBLIC	_foo3@20
; Function compile flags: /Odtp
_TEXT	SEGMENT
_a$ = 8							; size = 4
_b$ = 12						; size = 4
_c$ = 16						; size = 4
_d$ = 20						; size = 4
_e$ = 24						; size = 4
_foo3@20 PROC

; 14   : { return a + b + c + d + e; }

	push	ebp
	mov	ebp, esp
	mov	eax, DWORD PTR _a$[ebp]
	add	eax, DWORD PTR _b$[ebp]
	add	eax, DWORD PTR _c$[ebp]
	add	eax, DWORD PTR _d$[ebp]
	add	eax, DWORD PTR _e$[ebp]
	pop	ebp
	ret	20					; 00000014H
_foo3@20 ENDP
_TEXT	ENDS
PUBLIC	_main
EXTRN	_printf:PROC
; Function compile flags: /Odtp
_TEXT	SEGMENT
_argc$ = 8						; size = 4
_argv$ = 12						; size = 4
_main	PROC

; 16   : int main(int argc, char *argv[]) {

	push	ebp
	mov	ebp, esp

; 17   : 	printf(&quot;foo1() = %d\n&quot;, foo1(1, 2, 3, 4, 5));

	push	5
	push	4
	push	3
	push	2
	push	1
	call	_foo1@20
	push	eax
	push	OFFSET $SG78612
	call	_printf
	add	esp, 8

; 18   : 	printf(&quot;foo2() = %d\n&quot;, foo2(6, 7, 8, 9, 0));

	push	0
	push	9
	push	8
	push	7
	push	6
	call	_foo2@20
	push	eax
	push	OFFSET $SG78613
	call	_printf
	add	esp, 8

; 19   : 	printf(&quot;foo3() = %d\n&quot;, foo3(10, 20, 30, 40, 50));

	push	50					; 00000032H
	push	40					; 00000028H
	push	30					; 0000001eH
	push	20					; 00000014H
	push	10					; 0000000aH
	call	_foo3@20
	push	eax
	push	OFFSET $SG78614
	call	_printf
	add	esp, 8

; 20   : 	return 0;

	xor	eax, eax

; 21   : }

	pop	ebp
	ret	0
_main	ENDP
_TEXT	ENDS
END
</pre>

<h3 id="id7b9da1">Borland C++ Compiler</h3>

<p class="paragraph">
プリプロセス結果およびアセンブラ出力から、&quot;__stdcall&quot; にdefineされている事が分かる。
<br />
</p>

<p class="paragraph">
アセンブラコードを生成
<br />
</p>
<pre>&gt; bcc32 -S winapis.c
</pre>

<p class="paragraph">
コンパイル＆実行
<br />
</p>
<pre class="plugin_pre">
&gt; bcc32 winapis.c
&gt; winapis.exe
foo1() = 15
foo2() = 30
foo3() = 150
</pre>

<p class="paragraph">
プリプロセス結果を生成：
<br />
</p>
<pre>&gt; cpp32 winapis.c
</pre>

<p class="paragraph">
プリプロセス結果：
<br />
</p>
<div class="hl-main"><pre><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> winapis.c 3: </span><span class="hl-mlcomment">*/</span><span class="hl-code">
</span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> winapis.c 4: </span><span class="hl-mlcomment">*/</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">__stdcall</span><span class="hl-code">
</span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> winapis.c 5: </span><span class="hl-mlcomment">*/</span><span class="hl-identifier">foo1</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">d</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> winapis.c 6: </span><span class="hl-mlcomment">*/</span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> + </span><span class="hl-identifier">b</span><span class="hl-code"> + </span><span class="hl-identifier">c</span><span class="hl-code"> + </span><span class="hl-identifier">d</span><span class="hl-code"> + </span><span class="hl-identifier">e</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> winapis.c 7: </span><span class="hl-mlcomment">*/</span><span class="hl-code">
</span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> winapis.c 8: </span><span class="hl-mlcomment">*/</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">__stdcall</span><span class="hl-code">
</span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> winapis.c 9: </span><span class="hl-mlcomment">*/</span><span class="hl-identifier">foo2</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">d</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> winapis.c 10: </span><span class="hl-mlcomment">*/</span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> + </span><span class="hl-identifier">b</span><span class="hl-code"> + </span><span class="hl-identifier">c</span><span class="hl-code"> + </span><span class="hl-identifier">d</span><span class="hl-code"> + </span><span class="hl-identifier">e</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> winapis.c 11: </span><span class="hl-mlcomment">*/</span><span class="hl-code">
</span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> winapis.c 12: </span><span class="hl-mlcomment">*/</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">__stdcall</span><span class="hl-code">
</span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> winapis.c 13: </span><span class="hl-mlcomment">*/</span><span class="hl-identifier">foo3</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">d</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> winapis.c 14: </span><span class="hl-mlcomment">*/</span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> + </span><span class="hl-identifier">b</span><span class="hl-code"> + </span><span class="hl-identifier">c</span><span class="hl-code"> + </span><span class="hl-identifier">d</span><span class="hl-code"> + </span><span class="hl-identifier">e</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> winapis.c 15: </span><span class="hl-mlcomment">*/</span><span class="hl-code">
</span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> winapis.c 16: </span><span class="hl-mlcomment">*/</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">main</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">argc</span><span class="hl-code">, </span><span >char</span><span class="hl-code"> *</span><span class="hl-identifier">argv</span><span class="hl-brackets">[</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> winapis.c 17: </span><span class="hl-mlcomment">*/</span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">foo1() = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">foo1</span><span class="hl-brackets">(</span><span class="hl-number">1</span><span class="hl-code">, </span><span class="hl-number">2</span><span class="hl-code">, </span><span class="hl-number">3</span><span class="hl-code">, </span><span class="hl-number">4</span><span class="hl-code">, </span><span class="hl-number">5</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> winapis.c 18: </span><span class="hl-mlcomment">*/</span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">foo2() = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">foo2</span><span class="hl-brackets">(</span><span class="hl-number">6</span><span class="hl-code">, </span><span class="hl-number">7</span><span class="hl-code">, </span><span class="hl-number">8</span><span class="hl-code">, </span><span class="hl-number">9</span><span class="hl-code">, </span><span class="hl-number">0</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> winapis.c 19: </span><span class="hl-mlcomment">*/</span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">foo3() = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">foo3</span><span class="hl-brackets">(</span><span class="hl-number">10</span><span class="hl-code">, </span><span class="hl-number">20</span><span class="hl-code">, </span><span class="hl-number">30</span><span class="hl-code">, </span><span class="hl-number">40</span><span class="hl-code">, </span><span class="hl-number">50</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> winapis.c 20: </span><span class="hl-mlcomment">*/</span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-number">0</span><span class="hl-code">;
</span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> winapis.c 21: </span><span class="hl-mlcomment">*/</span><span class="hl-brackets">}</span></pre></div>

<h4 id="id62c193">アセンブラ出力(winapis.asm)</h4>
<pre class="plugin_pre">
	.386p
	ifdef ??version
	if    ??version GT 500H
	.mmx
	endif
	endif
	model flat
	ifndef	??version
	?debug	macro
	endm
	endif
	?debug	S &quot;winapis.c&quot;
	?debug	T &quot;winapis.c&quot;
_TEXT	segment dword public use32 &#039;CODE&#039;
_TEXT	ends
_DATA	segment dword public use32 &#039;DATA&#039;
_DATA	ends
_BSS	segment dword public use32 &#039;BSS&#039;
_BSS	ends
DGROUP	group	_BSS,_DATA
_TEXT	segment dword public use32 &#039;CODE&#039;
foo1	proc	near
?live1@0:
   ;	
   ;	foo1(int a, int b, int c, int d, int e)
   ;	
	push      ebp
	mov       ebp,esp
   ;	
   ;	{ return a + b + c + d + e; }
   ;	
@1:
	mov       eax,dword ptr [ebp+8]
	add       eax,dword ptr [ebp+12]
	add       eax,dword ptr [ebp+16]
	add       eax,dword ptr [ebp+20]
	add       eax,dword ptr [ebp+24]
@3:
@2:
	pop       ebp
	ret       20
foo1	endp
foo2	proc	near
?live1@48:
   ;	
   ;	foo2(int a, int b, int c, int d, int e)
   ;	
	push      ebp
	mov       ebp,esp
   ;	
   ;	{ return a + b + c + d + e; }
   ;	
@4:
	mov       eax,dword ptr [ebp+8]
	add       eax,dword ptr [ebp+12]
	add       eax,dword ptr [ebp+16]
	add       eax,dword ptr [ebp+20]
	add       eax,dword ptr [ebp+24]
@6:
@5:
	pop       ebp
	ret       20
foo2	endp
foo3	proc	near
?live1@96:
   ;	
   ;	foo3(int a, int b, int c, int d, int e)
   ;	
	push      ebp
	mov       ebp,esp
   ;	
   ;	{ return a + b + c + d + e; }
   ;	
@7:
	mov       eax,dword ptr [ebp+8]
	add       eax,dword ptr [ebp+12]
	add       eax,dword ptr [ebp+16]
	add       eax,dword ptr [ebp+20]
	add       eax,dword ptr [ebp+24]
@9:
@8:
	pop       ebp
	ret       20
foo3	endp
_main	proc	near
?live1@144:
   ;	
   ;	int main(int argc, char *argv[]) {
   ;	
	push      ebp
	mov       ebp,esp
   ;	
   ;		printf(&quot;foo1() = %d\n&quot;, foo1(1, 2, 3, 4, 5));
   ;	
@10:
	push      5
	push      4
	push      3
	push      2
	push      1
	call      foo1
	push      eax
	push      offset s@
	call      _printf
	add       esp,8
   ;	
   ;		printf(&quot;foo2() = %d\n&quot;, foo2(6, 7, 8, 9, 0));
   ;	
	push      0
	push      9
	push      8
	push      7
	push      6
	call      foo2
	push      eax
	push      offset s@+13
	call      _printf
	add       esp,8
   ;	
   ;		printf(&quot;foo3() = %d\n&quot;, foo3(10, 20, 30, 40, 50));
   ;	
	push      50
	push      40
	push      30
	push      20
	push      10
	call      foo3
	push      eax
	push      offset s@+26
	call      _printf
	add       esp,8
   ;	
   ;		return 0;
   ;	
	xor       eax,eax
   ;	
   ;	}
   ;	
@12:
@11:
	pop       ebp
	ret 
_main	endp
_TEXT	ends
_DATA	segment dword public use32 &#039;DATA&#039;
s@	label	byte
	;	s@+0:
	db	&quot;foo1() = %d&quot;,10,0
	;	s@+13:
	db	&quot;foo2() = %d&quot;,10,0
	;	s@+26:
	db	&quot;foo3() = %d&quot;,10,0
	align	4
_DATA	ends
_TEXT	segment dword public use32 &#039;CODE&#039;
_TEXT	ends
	public	foo1
	public	foo2
	public	foo3
	public	_main
 extrn   __setargv__:near
 extrn   _printf:near
 ?debug  C 9F757569642E6C6962
 ?debug  C 9F757569642E6C6962
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\imm.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\mcx.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\winsvc.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\commdlg.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\oleauto.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\propidl.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\oaidl.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\msxml.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\servprov.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\oleidl.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\urlmon.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\cguid.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\objidl.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\unknwn.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\search.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\stdlib.h&quot; 10521 10272
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\objbase.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\ole2.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\prsht.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\winspool.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\winsmcrd.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\winioctl.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\rpcnsip.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\rpcndr.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\wtypes.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\winscard.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\winefs.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\wincrypt.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\qos.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\winsock2.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\winperf.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\shellapi.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\rpcasync.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\rpcnterr.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\rpcnsi.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\rpcdcep.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\rpcdce.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\rpc.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\nb30.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\mmsystem.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\lzexpand.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\dlgs.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\ddeml.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\dde.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\cderr.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\winnetwk.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\winreg.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\winver.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\wincon.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\winnls.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\tvout.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\winuser.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\pshpack1.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\wingdi.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\winerror.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\winbase.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\pshpack8.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\pshpack2.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\poppack.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\pshpack4.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\mem.h&quot; 10521 10272
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\_loc.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\locale.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\_str.h&quot; 10521 10272
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\string.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\guiddef.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\basetsd.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\mbctype.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\ctype.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\winnt.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\windef.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\stdarg.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\excpt.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\windows.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\_nfile.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\_null.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\_defs.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\_stddef.h&quot; 10339 10240
	?debug	D &quot;C:\in_vitro\apps\borland\bcc55\include\stdio.h&quot; 10339 10240
	?debug	D &quot;winapis.c&quot; 15473 36482
	end
</pre>

<h3 id="idd87575">OpenWatcom Compiler(16bit)</h3>

<p class="paragraph">
プリプロセス結果およびアセンブラ出力から、&quot;WINAPI&quot;と&quot;CALLBACK&quot; は &quot;__far __pascal&quot; にdefineされている事が分かる。
<br />
<strong>※16bit用のヘッダーファイルではAPIENTRYが未定義の為、コメントアウトして確認している。</strong>
<br />
</p>

<p class="paragraph">
コンパイル＆リンク＆実行 
<br />
</p>
<pre>&gt; set INCLUDE=%WATCOM%\h;%WATCOM%\h\win
&gt; wcl winapis.c
</pre>

<p class="paragraph">
アセンブラ生成：
<br />
</p>
<pre>&gt; wdis -a -l=winapis.asm winapis.obj
</pre>

<p class="paragraph">
プリプロセス結果を生成：
<br />
</p>
<pre>&gt; wcl -pcl -fo winapis.i winapis.c
</pre>

<p class="paragraph">
プリプロセス結果：
<br />
</p>
<div class="hl-main"><pre><span >#line</span><span class="hl-code"> </span><span class="hl-number">2</span><span class="hl-code"> </span><span class="hl-quotes">&quot;</span><span class="hl-string">winapis.c</span><span class="hl-quotes">&quot;</span><span ></span><span class="hl-code">
 
</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">__far</span><span class="hl-code"> </span><span class="hl-identifier">__pascal</span><span class="hl-code">
</span><span class="hl-identifier">foo1</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">d</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> + </span><span class="hl-identifier">b</span><span class="hl-code"> + </span><span class="hl-identifier">c</span><span class="hl-code"> + </span><span class="hl-identifier">d</span><span class="hl-code"> + </span><span class="hl-identifier">e</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">__far</span><span class="hl-code"> </span><span class="hl-identifier">__pascal</span><span class="hl-code">
</span><span class="hl-identifier">foo2</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">d</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> + </span><span class="hl-identifier">b</span><span class="hl-code"> + </span><span class="hl-identifier">c</span><span class="hl-code"> + </span><span class="hl-identifier">d</span><span class="hl-code"> + </span><span class="hl-identifier">e</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment">
int APIENTRY
foo3(int a, int b, int c, int d, int e)
{ return a + b + c + d + e; }
</span><span class="hl-mlcomment">*/</span><span class="hl-code">
 
</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">main</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">argc</span><span class="hl-code">, </span><span >char</span><span class="hl-code"> *</span><span class="hl-identifier">argv</span><span class="hl-brackets">[</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
    </span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">foo1() = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">foo1</span><span class="hl-brackets">(</span><span class="hl-number">1</span><span class="hl-code">, </span><span class="hl-number">2</span><span class="hl-code">, </span><span class="hl-number">3</span><span class="hl-code">, </span><span class="hl-number">4</span><span class="hl-code">, </span><span class="hl-number">5</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">foo2() = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">foo2</span><span class="hl-brackets">(</span><span class="hl-number">6</span><span class="hl-code">, </span><span class="hl-number">7</span><span class="hl-code">, </span><span class="hl-number">8</span><span class="hl-code">, </span><span class="hl-number">9</span><span class="hl-code">, </span><span class="hl-number">0</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment">printf(&quot;foo3() = %d\n&quot;, foo3(10, 20, 30, 40, 50));</span><span class="hl-mlcomment">*/</span><span class="hl-code">
    </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-number">0</span><span class="hl-code">;
</span><span class="hl-brackets">}</span></pre></div>

<h4 id="id62c193">アセンブラ出力(winapis.asm)</h4>
<pre class="plugin_pre">
.387
		PUBLIC	FOO1
		PUBLIC	FOO2
		PUBLIC	main_
		EXTRN	__STK:BYTE
		EXTRN	printf_:BYTE
		EXTRN	__argc:BYTE
		EXTRN	_small_code_:BYTE
		EXTRN	_cstart_:BYTE
DGROUP		GROUP	CONST,CONST2,_DATA
_TEXT		SEGMENT	BYTE PUBLIC USE16 &#039;CODE&#039;
		ASSUME CS:_TEXT, DS:DGROUP, SS:DGROUP
FOO1:
    mov         ax,6 
L$1:
    call        near ptr __STK 
    push        bp 
    mov         bp,sp 
    mov         ax,word ptr 0eH[bp] 
    add         ax,word ptr 0cH[bp] 
    add         ax,word ptr 0aH[bp] 
    add         ax,word ptr 8[bp] 
    add         ax,word ptr 6[bp] 
    pop         bp 
    retf        0aH 
FOO2:
    mov         ax,6 
    jmp         L$1 
main_:
    push        ax 
    mov         ax,10H 
    call        near ptr __STK 
    pop         ax 
    push        bx 
    push        cx 
    mov         ax,1 
    push        ax 
    mov         ax,2 
    push        ax 
    mov         ax,3 
    push        ax 
    mov         ax,4 
    push        ax 
    mov         ax,5 
    push        ax 
    push        cs 
    call        near ptr FOO1 
    push        ax 
    mov         ax,offset DGROUP:L$2 
    push        ax 
    call        near ptr printf_ 
    add         sp,4 
    mov         ax,6 
    push        ax 
    mov         ax,7 
    push        ax 
    mov         ax,8 
    push        ax 
    mov         ax,9 
    push        ax 
    xor         ax,ax 
    push        ax 
    push        cs 
    call        near ptr FOO2 
    push        ax 
    mov         ax,offset DGROUP:L$3 
    push        ax 
    call        near ptr printf_ 
    add         sp,4 
    xor         ax,ax 
    pop         cx 
    pop         bx 
    ret         
_TEXT		ENDS
CONST		SEGMENT	WORD PUBLIC USE16 &#039;DATA&#039;
L$2:
    DB	66H, 6fH, 6fH, 31H, 28H, 29H, 20H, 3dH
    DB	20H, 25H, 64H, 0aH, 0
L$3:
    DB	66H, 6fH, 6fH, 32H, 28H, 29H, 20H, 3dH
    DB	20H, 25H, 64H, 0aH, 0

CONST		ENDS
CONST2		SEGMENT	WORD PUBLIC USE16 &#039;DATA&#039;
CONST2		ENDS
_DATA		SEGMENT	WORD PUBLIC USE16 &#039;DATA&#039;
_DATA		ENDS
		END
</pre>

<h3 id="id00b417">OpenWatcom Compiler(32bit)</h3>

<p class="paragraph">
プリプロセス結果およびアセンブラ出力から、&quot;__stdcall&quot; にdefineされている事が分かる。
<br />
</p>

<p class="paragraph">
コンパイル＆リンク＆実行 
<br />
</p>
<pre>&gt; set INCLUDE=%WATCOM%\h;%WATCOM%\h\nt
&gt; wcl386 winapis.c
</pre>

<p class="paragraph">
アセンブラ生成：
<br />
</p>
<pre>&gt; wdis -a -l=winapis.asm winapis.obj
</pre>

<p class="paragraph">
プリプロセス結果を生成：
<br />
</p>
<pre>&gt; wcl386 -pcl -fo winapis.i winapis.c
</pre>

<p class="paragraph">
プリプロセス結果：
<br />
</p>
<div class="hl-main"><pre><span >#line</span><span class="hl-code"> </span><span class="hl-number">2</span><span class="hl-code"> </span><span class="hl-quotes">&quot;</span><span class="hl-string">winapis.c</span><span class="hl-quotes">&quot;</span><span ></span><span class="hl-code">
 
</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">__stdcall</span><span class="hl-code">
</span><span class="hl-identifier">foo1</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">d</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> + </span><span class="hl-identifier">b</span><span class="hl-code"> + </span><span class="hl-identifier">c</span><span class="hl-code"> + </span><span class="hl-identifier">d</span><span class="hl-code"> + </span><span class="hl-identifier">e</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">__stdcall</span><span class="hl-code">
</span><span class="hl-identifier">foo2</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">d</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> + </span><span class="hl-identifier">b</span><span class="hl-code"> + </span><span class="hl-identifier">c</span><span class="hl-code"> + </span><span class="hl-identifier">d</span><span class="hl-code"> + </span><span class="hl-identifier">e</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">__stdcall</span><span class="hl-code">
</span><span class="hl-identifier">foo3</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">d</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> + </span><span class="hl-identifier">b</span><span class="hl-code"> + </span><span class="hl-identifier">c</span><span class="hl-code"> + </span><span class="hl-identifier">d</span><span class="hl-code"> + </span><span class="hl-identifier">e</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">main</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">argc</span><span class="hl-code">, </span><span >char</span><span class="hl-code"> *</span><span class="hl-identifier">argv</span><span class="hl-brackets">[</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
    </span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">foo1() = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">foo1</span><span class="hl-brackets">(</span><span class="hl-number">1</span><span class="hl-code">, </span><span class="hl-number">2</span><span class="hl-code">, </span><span class="hl-number">3</span><span class="hl-code">, </span><span class="hl-number">4</span><span class="hl-code">, </span><span class="hl-number">5</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">foo2() = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">foo2</span><span class="hl-brackets">(</span><span class="hl-number">6</span><span class="hl-code">, </span><span class="hl-number">7</span><span class="hl-code">, </span><span class="hl-number">8</span><span class="hl-code">, </span><span class="hl-number">9</span><span class="hl-code">, </span><span class="hl-number">0</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">foo3() = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">foo3</span><span class="hl-brackets">(</span><span class="hl-number">10</span><span class="hl-code">, </span><span class="hl-number">20</span><span class="hl-code">, </span><span class="hl-number">30</span><span class="hl-code">, </span><span class="hl-number">40</span><span class="hl-code">, </span><span class="hl-number">50</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-number">0</span><span class="hl-code">;
</span><span class="hl-brackets">}</span></pre></div>

<h4 id="id62c193">アセンブラ出力(winapis.asm)</h4>
<pre class="plugin_pre">
.387
.386p
.model flat
		PUBLIC	`_foo1@20`
		PUBLIC	`_foo2@20`
		PUBLIC	`_foo3@20`
		PUBLIC	main_
		EXTRN	__CHK:BYTE
		EXTRN	printf_:BYTE
		EXTRN	__argc:BYTE
		EXTRN	_cstart_:BYTE
DGROUP		GROUP	CONST,CONST2,_DATA
_TEXT		SEGMENT	BYTE PUBLIC USE32 &#039;CODE&#039;
		ASSUME CS:_TEXT, DS:DGROUP, SS:DGROUP
`_foo1@20`:
    push        4 
    call        near ptr FLAT:__CHK 
    mov         eax,dword ptr 4[esp] 
    add         eax,dword ptr 8[esp] 
    add         eax,dword ptr 0cH[esp] 
    add         eax,dword ptr 10H[esp] 
    add         eax,dword ptr 14H[esp] 
    ret         14H 
`_foo2@20`:
    push        4 
    call        near ptr FLAT:__CHK 
    mov         eax,dword ptr 4[esp] 
    add         eax,dword ptr 8[esp] 
    add         eax,dword ptr 0cH[esp] 
    add         eax,dword ptr 10H[esp] 
    add         eax,dword ptr 14H[esp] 
    ret         14H 
`_foo3@20`:
    push        4 
    call        near ptr FLAT:__CHK 
    mov         eax,dword ptr 4[esp] 
    add         eax,dword ptr 8[esp] 
    add         eax,dword ptr 0cH[esp] 
    add         eax,dword ptr 10H[esp] 
    add         eax,dword ptr 14H[esp] 
    ret         14H 
main_:
    push        1cH 
    call        near ptr FLAT:__CHK 
    push        ecx 
    push        5 
    push        4 
    push        3 
    push        2 
    push        1 
    call        near ptr FLAT:`_foo1@20` 
    push        eax 
    push        offset FLAT:L$1 
    call        near ptr FLAT:printf_ 
    add         esp,8 
    push        0 
    push        9 
    push        8 
    push        7 
    push        6 
    call        near ptr FLAT:`_foo2@20` 
    push        eax 
    push        offset FLAT:L$2 
    call        near ptr FLAT:printf_ 
    add         esp,8 
    push        32H 
    push        28H 
    push        1eH 
    push        14H 
    push        0aH 
    call        near ptr FLAT:`_foo3@20` 
    push        eax 
    push        offset FLAT:L$3 
    call        near ptr FLAT:printf_ 
    add         esp,8 
    xor         eax,eax 
    pop         ecx 
    ret         
_TEXT		ENDS
CONST		SEGMENT	DWORD PUBLIC USE32 &#039;DATA&#039;
L$1:
    DB	66H, 6fH, 6fH, 31H, 28H, 29H, 20H, 3dH
    DB	20H, 25H, 64H, 0aH, 0
L$2:
    DB	66H, 6fH, 6fH, 32H, 28H, 29H, 20H, 3dH
    DB	20H, 25H, 64H, 0aH, 0
L$3:
    DB	66H, 6fH, 6fH, 33H, 28H, 29H, 20H, 3dH
    DB	20H, 25H, 64H, 0aH, 0

CONST		ENDS
CONST2		SEGMENT	DWORD PUBLIC USE32 &#039;DATA&#039;
CONST2		ENDS
_DATA		SEGMENT	DWORD PUBLIC USE32 &#039;DATA&#039;
_DATA		ENDS
		END
</pre>

<h3 id="idc8e847">GCC-3.4.5, MinGW-5.1.6, MSYS 1.0</h3>

<p class="paragraph">
プリプロセス結果およびアセンブラ出力から、&quot;__attribute__()&quot;版stdcall にdefineされている事が分かる。
<br />
</p>

<p class="paragraph">
コンパイル＆リンク＆実行
<br />
</p>
<pre class="plugin_pre">
$ gcc -O0 -Wall --save-temps -o winapis winapis.c       
$ winapis.exe 
foo1() = 15
foo2() = 30
foo3() = 150
</pre>

<p class="paragraph">
プリプロセス結果：
<br />
</p>
<div class="hl-main"><pre><span class="hl-code"># </span><span class="hl-number">3</span><span class="hl-code"> </span><span class="hl-quotes">&quot;</span><span class="hl-string">winapis.c</span><span class="hl-quotes">&quot;</span><span class="hl-code"> </span><span class="hl-number">2</span><span class="hl-code">
 
</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">__attribute__</span><span class="hl-brackets">(</span><span class="hl-brackets">(</span><span class="hl-identifier">__stdcall__</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-identifier">foo1</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">d</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> + </span><span class="hl-identifier">b</span><span class="hl-code"> + </span><span class="hl-identifier">c</span><span class="hl-code"> + </span><span class="hl-identifier">d</span><span class="hl-code"> + </span><span class="hl-identifier">e</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">__attribute__</span><span class="hl-brackets">(</span><span class="hl-brackets">(</span><span class="hl-identifier">__stdcall__</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-identifier">foo2</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">d</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> + </span><span class="hl-identifier">b</span><span class="hl-code"> + </span><span class="hl-identifier">c</span><span class="hl-code"> + </span><span class="hl-identifier">d</span><span class="hl-code"> + </span><span class="hl-identifier">e</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">__attribute__</span><span class="hl-brackets">(</span><span class="hl-brackets">(</span><span class="hl-identifier">__stdcall__</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-identifier">foo3</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">d</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> + </span><span class="hl-identifier">b</span><span class="hl-code"> + </span><span class="hl-identifier">c</span><span class="hl-code"> + </span><span class="hl-identifier">d</span><span class="hl-code"> + </span><span class="hl-identifier">e</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">main</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">argc</span><span class="hl-code">, </span><span >char</span><span class="hl-code"> *</span><span class="hl-identifier">argv</span><span class="hl-brackets">[</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
 </span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">foo1() = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">foo1</span><span class="hl-brackets">(</span><span class="hl-number">1</span><span class="hl-code">, </span><span class="hl-number">2</span><span class="hl-code">, </span><span class="hl-number">3</span><span class="hl-code">, </span><span class="hl-number">4</span><span class="hl-code">, </span><span class="hl-number">5</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
 </span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">foo2() = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">foo2</span><span class="hl-brackets">(</span><span class="hl-number">6</span><span class="hl-code">, </span><span class="hl-number">7</span><span class="hl-code">, </span><span class="hl-number">8</span><span class="hl-code">, </span><span class="hl-number">9</span><span class="hl-code">, </span><span class="hl-number">0</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
 </span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">foo3() = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">foo3</span><span class="hl-brackets">(</span><span class="hl-number">10</span><span class="hl-code">, </span><span class="hl-number">20</span><span class="hl-code">, </span><span class="hl-number">30</span><span class="hl-code">, </span><span class="hl-number">40</span><span class="hl-code">, </span><span class="hl-number">50</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
 </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-number">0</span><span class="hl-code">;
</span><span class="hl-brackets">}</span></pre></div>

<h4 id="id62c193">アセンブラ出力(winapis.asm)</h4>
<pre class="plugin_pre">
	.file	&quot;winapis.c&quot;
	.text
.globl _foo1@20
	.def	_foo1@20;	.scl	2;	.type	32;	.endef
_foo1@20:
	pushl	%ebp
	movl	%esp, %ebp
	movl	12(%ebp), %eax
	addl	8(%ebp), %eax
	addl	16(%ebp), %eax
	addl	20(%ebp), %eax
	addl	24(%ebp), %eax
	popl	%ebp
	ret	$20
.globl _foo2@20
	.def	_foo2@20;	.scl	2;	.type	32;	.endef
_foo2@20:
	pushl	%ebp
	movl	%esp, %ebp
	movl	12(%ebp), %eax
	addl	8(%ebp), %eax
	addl	16(%ebp), %eax
	addl	20(%ebp), %eax
	addl	24(%ebp), %eax
	popl	%ebp
	ret	$20
.globl _foo3@20
	.def	_foo3@20;	.scl	2;	.type	32;	.endef
_foo3@20:
	pushl	%ebp
	movl	%esp, %ebp
	movl	12(%ebp), %eax
	addl	8(%ebp), %eax
	addl	16(%ebp), %eax
	addl	20(%ebp), %eax
	addl	24(%ebp), %eax
	popl	%ebp
	ret	$20
	.def	___main;	.scl	2;	.type	32;	.endef
	.section .rdata,&quot;dr&quot;
LC0:
	.ascii &quot;foo1() = %d\12\0&quot;
LC1:
	.ascii &quot;foo2() = %d\12\0&quot;
LC2:
	.ascii &quot;foo3() = %d\12\0&quot;
	.text
.globl _main
	.def	_main;	.scl	2;	.type	32;	.endef
_main:
	pushl	%ebp
	movl	%esp, %ebp
	subl	$24, %esp
	andl	$-16, %esp
	movl	$0, %eax
	addl	$15, %eax
	addl	$15, %eax
	shrl	$4, %eax
	sall	$4, %eax
	movl	%eax, -4(%ebp)
	movl	-4(%ebp), %eax
	call	__alloca
	call	___main
	movl	$5, 16(%esp)
	movl	$4, 12(%esp)
	movl	$3, 8(%esp)
	movl	$2, 4(%esp)
	movl	$1, (%esp)
	call	_foo1@20
	subl	$20, %esp
	movl	%eax, 4(%esp)
	movl	$LC0, (%esp)
	call	_printf
	movl	$0, 16(%esp)
	movl	$9, 12(%esp)
	movl	$8, 8(%esp)
	movl	$7, 4(%esp)
	movl	$6, (%esp)
	call	_foo2@20
	subl	$20, %esp
	movl	%eax, 4(%esp)
	movl	$LC1, (%esp)
	call	_printf
	movl	$50, 16(%esp)
	movl	$40, 12(%esp)
	movl	$30, 8(%esp)
	movl	$20, 4(%esp)
	movl	$10, (%esp)
	call	_foo3@20
	subl	$20, %esp
	movl	%eax, 4(%esp)
	movl	$LC2, (%esp)
	call	_printf
	movl	$0, %eax
	leave
	ret
	.def	_printf;	.scl	2;	.type	32;	.endef
</pre>

<hr class="full_hr" />
<ul class="plugin_navi">
<li>[&nbsp;<a href="./view-626.html" title="C言語系/呼び出し規約/x86/&quot;PASCAL&quot;">Prev</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-617.html" title="C言語系/呼び出し規約/x86/cdecl">Next</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-615.html" title="C言語系/呼び出し規約/x86">Up</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-478.html" title="C言語系">C言語系</a>&nbsp;]</li>
</ul>
</div>

<div class="data_attrs_post">
original url: https://www.glamenv-septzen.net/view/627<br>
</div>

</div>
<!-- //data_main -->

</div>


</div>
<!-- /content-wrap end -->

<!-- footer start -->
<div id="footer">
Copyright &copy; 2007 - 2025 Masahiko Sakamoto(msakamoto-sf)<br>
License&nbsp;:&nbsp;<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a><br>
Contact&nbsp;:&nbsp;<a target="_blank" href="https://x.com/msakamoto_sf">x(twitter)</a> / <a target="_blank" href="https://github.com/msakamoto-sf/">github</a> / <a class="maillink" href="mailto:&#x73;&#x61;&#x6B;&#x61;&#x6D;&#x6F;&#x74;&#x6F;&#x2E;&#x67;&#x73;&#x79;&#x63;&#x2E;&#x33;&#x73;&#x40;&#x67;&#x6D;&#x61;&#x69;&#x6C;&#x2E;&#x63;&#x6F;&#x6D;">email</a><br>
--&nbsp;Beautiful Icons&nbsp;--<br />
<a href="http://www.famfamfam.com/lab/icons/silk/" target="_blank" title="Mark James Silk icon set 1.3">Mark James Silk icon set 1.3</a> by famfamfam<br />
<a href="http://www.pinvoke.com/" target="_blank" title="Fugue Icons">Fugue Icons</a> by Yusuke Kamiyamane<br />
</div>
<!-- /footer end -->

</div>
<!-- /body end -->

</body>
</html>