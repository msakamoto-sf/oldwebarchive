<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>技術/HTML/tableレイアウト(IE6とFirefox1.5) - Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)</title>
<!-- favicon 2017's reference:
https://developers.google.com/web/fundamentals/design-and-ui/browser-customization/
https://msdn.microsoft.com/ja-jp/library/dn455106(v=vs.85).aspx
https://developer.chrome.com/multidevice/android/installtohomescreen
https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html
-->
<link rel="shortcut icon" href="../favicons/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="icon" href="../favicons/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="apple-touch-icon" sizes="57x57" href="../favicons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="../favicons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="../favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="../favicons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="../favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="../favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="../favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="../favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="../favicons/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="../favicons/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="../favicons/favicon-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="../favicons/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-160x160.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-196x196.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../favicons/favicon-32x32.png" sizes="32x32">

<!-- browserconfig.xml : https://msdn.microsoft.com/ja-jp/library/dn455106(v=vs.85).aspx -->
<meta name="msapplication-TileColor" content="#990000">
<meta name="msapplication-TileImage" content="../favicons/mstile-144x144.png">

<!-- these favicon files were generated by https://ao-system.net/favicongenerator/ , thanks!!(2017-02-18) -->

<style type="text/css"></style>

<link href="./css/pcbrowser.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/pcbrowser_plugins.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/pcbrowser_wiki.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/print.css" rel="stylesheet" type="text/css" media="print"/>
</head>
<body>
<!-- body start -->
<div class="body">
<div style="display: inline"><a name="pagetop"></a></div>
<div id="header-wrap">
<img src="./images/logo1.jpg" style="float: left; margin-right: 1em;"/>
<a href="./index.html" title="Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)"><img src="./icons/home.png" alt="home"/>&nbsp;Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)</a>


<h1 style="margin-bottom: 10px;">技術/HTML/tableレイアウト(IE6とFirefox1.5)</h1>

<div style="clear: both;"></div>
</div><!-- //header-wrap -->

<!-- content-wrap start -->
<div id="content-wrap"><div class="contents_s">

<!-- data_main -->
<div class="data_main">

<div class="data_attrs_pre">
作成日: 2006-05-22 14:52:56 &nbsp; / &nbsp; last updated at: 2008-12-23 15:00:48<br>
カテゴリ: <a href="category-19.html">HTML</a>&nbsp;</div>

<div class="data_body">
<p class="paragraph">
Webデザインで今も昔も非常に重要な要素である、tableのレイアウトについて気になる点があったので調査しました。
<br />
</p>

<ul><li><a href="#id592083">目的</a></li>
<li><a href="#id83a8c1">基礎知識</a><ul><li><a href="#id82cc54">table関連のスタイルシートプロパティ</a></li>
<li><a href="#id4a4c34">table-layout</a></li>
<li><a href="#idd72361">border-collapse</a></li>
<li><a href="#id3ec863">スタイルシートにおけるサイズ指定の単位</a><ul><li><a href="#ide0d29b">em, ex 指定に関する誤認識について</a></li>
<li><a href="#id089fd0">pt &lt;&gt; px 変換</a></li></ul></li></ul></li>
<li><a href="#ide3ec32">実験</a><ul><li><a href="#id792cb1">実験内容</a></li>
<li><a href="#ida4e626">実験結果</a></li></ul></li>
<li><a href="#ide211d9">結論</a></li>
<li><a href="#idef6687">雑感</a></li>
<li><a href="#ideb1942">参考リンク</a></li></ul>
<hr />
<h3 id="id592083">目的</h3>

<p class="paragraph">
table用のスタイルシートである「table-layout」プロパティを調査し、カラムの幅を固定できるようにする。カラムの幅はem, ex, pt, pxのいずれかで決定できるようにする。
<br />
</p>

<p class="paragraph">
Webデザイン系、業務アプリケーション系を問わず、tableのカラム幅の設定は頭痛のタネである。中に表示するデータの文字数や文字種によって様々に変動してしまうtableに対して、どうやって列幅を固定するか。そのための具体的な手法を調査することで、今後の開発時におけるHTMLレイアウト修正作業を軽減する。
<br />
</p>

<h3 id="id83a8c1">基礎知識</h3>

<h4 id="id82cc54">table関連のスタイルシートプロパティ</h4>
<p class="paragraph">
<a class="externallink" href="http://www.htmq.com/style/index.shtml#tab" target="_blank">http://www.htmq.com/style/index.shtml#tab</a>
<br />
</p>

<p class="paragraph">
今回調査対象としたもののみを挙げる。
<br />
</p>

<h4 id="id4a4c34">table-layout</h4>

<dl>
<dt> auto </dt>
<dd>テーブル（表）全体を読み込んでから、各縦列の幅を決定して表示する。デフォルト。</dd>
<dt> fixed </dt>
<dd>最初の横一行を読み込んだ時点で、各縦列の幅を決定して表示を開始する。</dd>
</dl>

<h4 id="idd72361">border-collapse</h4>

<dl>
<dt> collapse </dt>
<dd>隣接するセルのボーダーを重ねて表示する。</dd>
<dt> separate </dt>
<dd>隣接するセルのボーダーを間隔をあけて表示する。デフォルト。</dd>
</dl>

<p class="paragraph">
他に以下のプロパティがあるが、IEに対応していなかったり使用頻度が著しく低かったりするため今回の調査では対象外とした。
<br />
</p>
<dl>
<dt> caption-side </dt>
<dd>テーブル（表）のキャプションの位置を指定する</dd>
<dt> border-spacing </dt>
<dd>セルのボーダーの間隔を指定する</dd>
<dt> empty-cells </dt>
<dd>空白セルのボーダーの表示・非表示を指定する</dd>
</dl>

<h4 id="id3ec863">スタイルシートにおけるサイズ指定の単位</h4>
<p class="paragraph">
今回調査対象とした四つの単位についてまとめる。
<br />
</p>
<dl>
<dt> em </dt>
<dd>ブラウザデフォルトにおける、文字&quot;M&quot;の<strong> 高さ </strong>を基準とする。</dd>
<dt> ex </dt>
<dd>ブラウザデフォルトにおける、文字&quot;x&quot;(小文字のエックス)の<strong> 高さ </strong>を基準とする。</dd>
<dt> px </dt>
<dd>PCの画面を構成する要素、&quot;ドット&quot;を基準とする。画面の論理サイズで&quot;1024ピクセル&quot;といえば、すなわち1024ドット。</dd>
<dt> pt </dt>
<dd>実世界上の単位で、<strong> 72pt(ポイント) = 1 inch </strong>となる長さ。PCが画面上で扱うためには、<strong> DPI(dots per inch) </strong>を通して変換する。</dd>
</dl>

<h5 id="ide0d29b">em, ex 指定に関する誤認識について</h5>

<p class="paragraph">
em, ex指定は文字Mあるいはxの<strong> 高さ </strong>を基準にしているのであって、幅を基準にしているのではない点に十分注意する必要がある。
<br />
</p>

<p class="paragraph">
通常、サイズ指定を考えるときは「このセルの幅は何文字か」という具合に桁数ベースで考える。もしもこのとき、em/exを幅の単位と考えて使用してしまうと、想定していた幅通りにならない。<strong> 桁数ベースで幅を決定するなら、高さと幅が同一の（ように見える）全角文字の等幅フォントを使用するほかない。（文字種も全角文字のみとなる） </strong>
<br />
</p>

<h5 id="id089fd0">pt &lt;&gt; px 変換</h5>

<p class="paragraph">
pt &lt;&gt; px 変換の中心となるのが、DPIである。<strong> DPIはOSによって異なり、例えばWindowsであれば72DPI, Macであれば96DPIとなっている。 </strong>これより、以下の計算式が成立する。<span class="hidden">(</span><a class="footnote" href="#footnote_102_1" id="footnote_102_1_r"  title="macというのはOS9までのmacを指す。MacOS X 以降のmacや、その他のUNIX, Linux系OSについては未調査">*1</a><span class="hidden">)</span>
<br />
</p>
<pre>1pt = 1/72 inch
1px(dot) = 1/72 (win) 1/96 (mac) inch
-&gt;
(win) 1px = 1/72 inch * 72 px = 1 pt
(mac) 1px = 1/96 inch * 72 px = 3/4 pt
win : mac = 1 : 3/4 = 4 : 3
</pre>
<p class="paragraph">
よって、<strong> macでの1ptはwinでの4/3ptになる。 </strong>ちなみにこれをpx単位で考えると、逆にwinでの1pxはmacでの3/4pxに相当する。
<br />
</p>

<p class="paragraph">
実はこれまでの計算はOS内部における論理的な扱いである。これを実世界のデバイスであるディスプレイに表示する場合は、<strong> PPI(pixels per inch) </strong>が関わってくる。これはディスプレイにより変わってくる。
<br />
</p>

<p class="paragraph">
以上見てきたように<strong> ユーザーのOSやディスプレイのより、1ピクセルの現実世界における表示サイズが変わってしまう </strong>点に十分留意する必要がある。
<br />
</p>

<h3 id="ide3ec32">実験</h3>

<h4 id="id792cb1">実験内容</h4>

<p class="paragraph">
数種類のバリエーションのtableを作成し、Firefox 1.5 と IE6 とで表示を比較する。実際に作成したファイルを次のリンクに示す。
<br />
</p>

<p class="paragraph">
<a href="./../medias/reports_2006052101_01.html" target="_blank" >reports_2006052101_01.html</a>
<br />
</p>

<p class="paragraph">
作成するテーブルのバリエーションの観点を以下に示す。
<br />
</p>
<ol><li> &quot;border-collapse: collapse;&quot; バリエーション<ol><li> cellspacing属性× + cellpadding属性×</li>
<li> cellspacing属性○ + cellpadding属性○</li></ol></li>
<li> &quot;border-collapse: separate;&quot; バリエーション<ol><li> cellspacing属性× + cellpadding属性×</li>
<li> cellspacing属性○ + cellpadding属性○</li></ol></li>
<li> &quot;table-layout: fixed;&quot; バリエーション<ol><li> (table)width属性× + (td)width属性○</li>
<li> (table)width属性○ + (td)width属性○<ol><li> tableのwidth属性 &gt; tdのwidth属性の合計値</li>
<li> tableのwidth属性 &lt; tdのwidth属性の合計値</li></ol></li>
<li> table/tdの幅をstyle=&quot;width: **em;&quot;によりem単位で指定するバリエーション<ol><li> 半角のみ</li>
<li> 全角のみ</li>
<li> 想定文字数を超えた場合(widthプロパティでem指定時)</li>
<li> 想定文字数を超えた場合(width属性指定時)</li>
<li> 想定文字数を超えた場合 + tdタグにoverflowプロパティ</li></ol></li></ol></li></ol>

<h4 id="ida4e626">実験結果</h4>

<p class="paragraph">
幾つか注目に値するバリエーションについて、FF1.5およびIE6での結果を載せる。
<br />
</p>

<ul><li> &quot;border-collapse: collapse;&quot;<ul><li> FF1.5 : <a href="./files/画像/reports_2006052101_01ff15.jpg" title="画像/reports_2006052101_01ff15.jpg" target="_blank"><img src="./files/画像/reports_2006052101_01ff15.jpg" alt="画像/reports_2006052101_01ff15.jpg" title="画像/reports_2006052101_01ff15.jpg"  /></a></li>
<li> IE6 : <a href="./files/画像/reports_2006052101_01ie6.jpg" title="画像/reports_2006052101_01ie6.jpg" target="_blank"><img src="./files/画像/reports_2006052101_01ie6.jpg" alt="画像/reports_2006052101_01ie6.jpg" title="画像/reports_2006052101_01ie6.jpg"  /></a></li></ul></li></ul>

<p class="paragraph">
FF1.5ではtdタグのborderがtableタグのborderを上書きしているように見える。一方のIE6ではその逆のように見える。枠線と、その中のセルを区切る罫線についてはデザイン上重要な要素であるが、ここまで挙動に違いがあると、border-collapseだけでFF1.5/IE6で同じ見栄えにするのは難しい。
<br />
</p>

<ul><li> &quot;border-collapse: collapse;&quot; + cellspacing属性○ + cellpadding属性○<ul><li> FF1.5 : <a href="./files/画像/reports_2006052101_02ff15.jpg" title="画像/reports_2006052101_02ff15.jpg" target="_blank"><img src="./files/画像/reports_2006052101_02ff15.jpg" alt="画像/reports_2006052101_02ff15.jpg" title="画像/reports_2006052101_02ff15.jpg"  /></a></li>
<li> IE6 : <a href="./files/画像/reports_2006052101_02ie6.jpg" title="画像/reports_2006052101_02ie6.jpg" target="_blank"><img src="./files/画像/reports_2006052101_02ie6.jpg" alt="画像/reports_2006052101_02ie6.jpg" title="画像/reports_2006052101_02ie6.jpg"  /></a></li></ul></li></ul>

<p class="paragraph">
これもFF1.5とIE6では全く挙動が異なる。
<br />
</p>

<ul><li> &quot;table-layout: fixed;&quot; + 想定文字数を超えた場合(widthプロパティでem指定時)<ul><li> FF1.5 : <a href="./files/画像/reports_2006052101_03ff15.jpg" title="画像/reports_2006052101_03ff15.jpg" target="_blank"><img src="./files/画像/reports_2006052101_03ff15.jpg" alt="画像/reports_2006052101_03ff15.jpg" title="画像/reports_2006052101_03ff15.jpg"  /></a></li>
<li> IE6 : <a href="./files/画像/reports_2006052101_03ie6.jpg" title="画像/reports_2006052101_03ie6.jpg" target="_blank"><img src="./files/画像/reports_2006052101_03ie6.jpg" alt="画像/reports_2006052101_03ie6.jpg" title="画像/reports_2006052101_03ie6.jpg"  /></a></li></ul></li></ul>

<p class="paragraph">
tdの幅を超えた部分の文字列をどうするかで、中身の文字列の種類に応じ、FF1.5/IE6でそれぞれ挙動が異なる。まとめると、次のようになる。
<br />
</p>
<table>
	<tr>
		<th> 文字列種類 </th>
		<th> FF1.5 </th>
		<th> IE6 </th>
	</tr>
	<tr>
		<td> 連続文字列 </td>
		<td> はみ出して表示 </td>
		<td> 切り捨て </td>
	</tr>
	<tr>
		<td> 全角英語・日本語混在の連続文字列 </td>
		<td> 文字種の切れ目を適当に折り返し表示 </td>
		<td> 文字種にかかわらず折り返し表示 </td>
	</tr>
	<tr>
		<td> 空白混じり </td>
		<td> 折り返して表示 </td>
		<td> 折り返して表示 </td>
	</tr>
</table>

<p class="paragraph">
特に注意が必要なのが連続文字列で、FF1.5だとデフォルトでははみ出して表示してしまう。他の周りのTRやTABLEの属性指定やスタイル指定の影響がどう出るのかは不明だが、いずれにせよこの差異を認識していないと、頭痛のタネになることは間違いない。
<br />
</p>

<h3 id="ide211d9">結論</h3>

<ul><li> 列幅を固定するには、&quot;table-layout: fixed;&quot;が有効である。</li>
<li> W3Cの仕様上、文字の&quot;幅&quot;を基準として各種のwidthを決定することはできない。</li>
<li> 文字の&quot;幅&quot;を基準としたい場合、テーブルの各セルに表示する文字種を全角を基本とすることで、文字の高さ=幅<span class="hidden">(</span><a class="footnote" href="#footnote_102_2" id="footnote_102_2_r"  title="見た目上の話。実際には異なる">*2</a><span class="hidden">)</span>と見なし、CSSでemを単位にすることである程度は指定可能である。</li>
<li> FF1.5とIE6とでは、border-collapse周りの枠線表示および連続文字列表示における挙動がまるで異なるので、注意と対策を要する。</li></ul>

<h3 id="idef6687">雑感</h3>

<p class="paragraph">
MS-DOS/Windowsクライアント系の画面と、HTMLの画面はそもそも制御方法がまるで異なると言うことを理解して欲しい。
<br />
その上で、真実、<strong> 文字の幅・桁数を基準にして幅を「精密に」指定することは、HTMLでは「技術的に不可能」 </strong>のようである。
<br />
</p>

<p class="paragraph">
ただし、emやexというのは恐らく、どんな文字でもこの幅を超えることはないという基準点なのではあるまいか？であれば、ぴったり○○文字の幅という制御はできなくとも、&quot;最大&quot;○○文字まで入る、という使い方は十分に出来るはずである。精密に幅を指定するのが不可能であっても、最大文字数幅で合わせておけば、少なくとも途中で情報が切れてしまうことは避けられる。恐らく対応を迫られた場合、その辺りが妥協点となるのではないだろうか。
<br />
</p>

<h3 id="ideb1942">参考リンク</h3>

<ul><li> <a class="externallink" href="http://www.tohoho-web.com/www.htm" target="_blank">http://www.tohoho-web.com/www.htm</a></li>
<li> <a class="externallink" href="http://www.htmq.com/index.htm" target="_blank">http://www.htmq.com/index.htm</a></li>
<li> <a class="externallink" href="http://www.aboutfont.com/manual/fontsyurui.html" target="_blank">http://www.aboutfont.com/manual/fontsyurui.html</a></li>
<li> <a class="externallink" href="http://msugai.fc2web.com/web/app/font.html" target="_blank">http://msugai.fc2web.com/web/app/font.html</a></li>
<li> <a class="externallink" href="http://wisdom.sakura.ne.jp/system/winapi/win32/win133.html" target="_blank">http://wisdom.sakura.ne.jp/system/winapi/win32/win133.html</a></li>
<li> <a class="externallink" href="http://www.styletype.jp/2004/10/post_2.html" target="_blank">http://www.styletype.jp/2004/10/post_2.html</a></li>
<li> <a class="externallink" href="http://neta.ywcafe.net/000349.html" target="_blank">http://neta.ywcafe.net/000349.html</a></li>
<li> <a class="externallink" href="http://www.fromdfj.net/html/fontsize.html" target="_blank">http://www.fromdfj.net/html/fontsize.html</a></li>
<li> <a class="externallink" href="http://blog.asura.co.jp/takehara/5219ac5dcee34422a506ab9f3df120df/entry.aspx" target="_blank">http://blog.asura.co.jp/takehara/5219ac5dcee34422a506ab9f3df120df/entry.aspx</a></li></ul><div class="footnote">
<a id="footnote_102_1" href="#footnote_102_1_r">*1</a>: macというのはOS9までのmacを指す。MacOS X 以降のmacや、その他のUNIX, Linux系OSについては未調査<br />
<a id="footnote_102_2" href="#footnote_102_2_r">*2</a>: 見た目上の話。実際には異なる
</div>
</div>

<div class="data_attrs_post">
original url: https://www.glamenv-septzen.net/view/102<br>
</div>

</div>
<!-- //data_main -->

</div>


</div>
<!-- /content-wrap end -->

<!-- footer start -->
<div id="footer">
Copyright &copy; 2001 - 2025 Masahiko Sakamoto(msakamoto-sf)<br>
License&nbsp;:&nbsp;<a target="_blank" href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a><br>
Contact&nbsp;:&nbsp;<a target="_blank" href="https://x.com/msakamoto_sf">x(twitter)</a> / <a target="_blank" href="https://github.com/msakamoto-sf/">github</a> / <a class="maillink" target="_blank" href="mailto:&#x73;&#x61;&#x6B;&#x61;&#x6D;&#x6F;&#x74;&#x6F;&#x2E;&#x67;&#x73;&#x79;&#x63;&#x2E;&#x33;&#x73;&#x40;&#x67;&#x6D;&#x61;&#x69;&#x6C;&#x2E;&#x63;&#x6F;&#x6D;">email</a><br>
--&nbsp;Beautiful Icons&nbsp;--<br />
<a href="http://www.famfamfam.com/lab/icons/silk/" target="_blank" title="Mark James Silk icon set 1.3">Mark James Silk icon set 1.3</a> by famfamfam<br />
<a href="http://www.pinvoke.com/" target="_blank" title="Fugue Icons">Fugue Icons</a> by Yusuke Kamiyamane<br />
</div>
<!-- /footer end -->

</div>
<!-- /body end -->

</body>
</html>