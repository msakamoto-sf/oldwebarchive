<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>技術/Linux/dpkg,aptコマンドメモ1 - Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)</title>
<!-- favicon 2017's reference:
https://developers.google.com/web/fundamentals/design-and-ui/browser-customization/
https://msdn.microsoft.com/ja-jp/library/dn455106(v=vs.85).aspx
https://developer.chrome.com/multidevice/android/installtohomescreen
https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html
-->
<link rel="shortcut icon" href="../favicons/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="icon" href="../favicons/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="apple-touch-icon" sizes="57x57" href="../favicons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="../favicons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="../favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="../favicons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="../favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="../favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="../favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="../favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="../favicons/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="../favicons/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="../favicons/favicon-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="../favicons/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-160x160.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-196x196.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../favicons/favicon-32x32.png" sizes="32x32">

<!-- browserconfig.xml : https://msdn.microsoft.com/ja-jp/library/dn455106(v=vs.85).aspx -->
<meta name="msapplication-TileColor" content="#990000">
<meta name="msapplication-TileImage" content="../favicons/mstile-144x144.png">

<!-- these favicon files were generated by https://ao-system.net/favicongenerator/ , thanks!!(2017-02-18) -->

<style type="text/css"></style>

<link href="./css/pcbrowser.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/pcbrowser_plugins.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/pcbrowser_wiki.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/print.css" rel="stylesheet" type="text/css" media="print"/>
</head>
<body>
<!-- body start -->
<div class="body">
<div style="display: inline"><a name="pagetop"></a></div>
<div id="header-wrap">
<img src="./images/logo1.jpg" style="float: left; margin-right: 1em;"/>
<a href="./index.html" title="Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)"><img src="./icons/home.png" alt="home"/>&nbsp;Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)</a>


<h1 style="margin-bottom: 10px;">技術/Linux/dpkg,aptコマンドメモ1</h1>

<div style="clear: both;"></div>
</div><!-- //header-wrap -->

<!-- content-wrap start -->
<div id="content-wrap"><div class="contents_s">

<!-- data_main -->
<div class="data_main">

<div class="data_attrs_pre">
作成日: 2011-09-19 12:05:37 &nbsp; / &nbsp; last updated at: 2013-11-24 23:08:35<br>
カテゴリ: <a href="category-20.html">Linux</a>&nbsp;</div>

<div class="data_body">
<ul class="plugin_navi">
<li>[&nbsp;<a href="./view-326.html" title="技術/Linux/dateコマンドメモ">Prev</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-325.html" title="技術/Linux/etc/issue(.net)ファイル">Next</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-23.html" title="技術">技術</a>&nbsp;]</li>
</ul>
<hr class="full_hr" />

<p class="paragraph">
Debian, Ubuntu系のdpkgとaptコマンドのメモ。Ubuntu10.04 LTSにて確認。
<br />
</p>

<p class="paragraph">
参考：
<br />
</p>
<ul><li> Chapter 3. Package Management<ul><li> <a class="externallink" href="https://help.ubuntu.com/10.04/serverguide/C/package-management.html" target="_blank">https://help.ubuntu.com/10.04/serverguide/C/package-management.html</a></li></ul></li>
<li> Ubuntu Manpage: dpkg - package manager for Debian<ul><li> <a class="externallink" href="http://manpages.ubuntu.com/manpages/lucid/en/man1/dpkg.1.html" target="_blank">http://manpages.ubuntu.com/manpages/lucid/en/man1/dpkg.1.html</a></li></ul></li>
<li> Ubuntu Manpage: apt-get - APT package handling utility -- command-line interface<ul><li> <a class="externallink" href="http://manpages.ubuntu.com/manpages/lucid/en/man8/apt-get.8.html" target="_blank">http://manpages.ubuntu.com/manpages/lucid/en/man8/apt-get.8.html</a></li></ul></li>
<li> Ubuntu Manpage: apt-cache - APT package handling utility -- cache manipulator<ul><li> <a class="externallink" href="http://manpages.ubuntu.com/manpages/lucid/en/man8/apt-cache.8.html" target="_blank">http://manpages.ubuntu.com/manpages/lucid/en/man8/apt-cache.8.html</a></li></ul></li>
<li> APT HOWTO (Obsolete Documentation)<ul><li> <a class="externallink" href="http://www.debian.org/doc/manuals/apt-howto/" target="_blank">http://www.debian.org/doc/manuals/apt-howto/</a></li></ul></li>
<li> apt-cache・apt-file・apt-get・gdebiの使い方 - Ubuntu Japanese Wiki<ul><li> <a class="externallink" href="https://wiki.ubuntulinux.jp/UbuntuTips/Application/PackageManagementSystem/Apt" target="_blank">https://wiki.ubuntulinux.jp/UbuntuTips/Application/PackageManagementSystem/Apt</a></li></ul></li></ul>

<h3 id="idfb487a">dpkgコマンド</h3>

<p class="paragraph">
・インストール済みのパッケージ一覧。
<br />
</p>
<pre>$ dpkg -l
</pre>

<p class="paragraph">
・あるファイルを含んでいるパッケージはどれか。
<br />
</p>
<pre>$ which python
/usr/bin/python
$ dpkg -S /usr/bin/python
python-minimal: /usr/bin/python
</pre>
<p class="paragraph">
フルパスでなくても良い。
<br />
</p>
<pre>$ dpkg -S stdio.h
libc6-dev: /usr/include/bits/stdio.h
libstdc++6-4.4-dev: /usr/include/c++/4.4/tr1/stdio.h
libc6-dev: /usr/include/stdio.h
perl: /usr/lib/perl/5.10.1/CORE/nostdio.h
</pre>

<p class="paragraph">
・そのパッケージの情報を表示する。
<br />
</p>
<pre>$ dpkg -s python-minimal
Package: python-minimal
Essential: yes
Status: install ok installed
...
</pre>

<p class="paragraph">
・そのパッケージが提供しているファイルの一覧を表示する。
<br />
</p>
<pre>$ dpkg -L python-minimal
/.
/usr
/usr/bin
/usr/bin/pycompile
/usr/bin/pyclean
...
</pre>

<p class="paragraph">
・&quot;.deb&quot;ファイルの情報を表示する。
<br />
</p>
<pre>$ cd /var/cache/apt/archives
$ dpkg -I php5-cli_5.3.2-1ubuntu4.9_i386.deb   # 大文字の&quot;I&quot;
new debian package, version 2.0.
size 2817008 bytes: control archive= 1530 bytes.
   1626 bytes,    26 lines      control
    181 bytes,     3 lines      md5sums
    307 bytes,    19 lines   *  postinst             #!/bin/sh
    166 bytes,    18 lines   *  postrm               #!/bin/sh
    133 bytes,    11 lines   *  prerm                #!/bin/sh
Package: php5-cli
Source: php5
Version: 5.3.2-1ubuntu4.9
Architecture: i386
...
</pre>
<p class="paragraph">
小文字の&quot;-l&quot;(エル)だとインストールしたパッケージの一覧になってしまうので注意。
<br />
</p>

<p class="paragraph">
・&quot;.deb&quot;ファイルの提供するファイル一覧を表示する。
<br />
</p>
<pre class="plugin_pre">
$ dpkg -c php5-cli_5.3.2-1ubuntu4.9_i386.deb
drwxr-xr-x root/root         0 2011-05-02 18:00 ./
drwxr-xr-x root/root         0 2011-05-02 17:58 ./etc/
drwxr-xr-x root/root         0 2011-05-02 17:58 ./etc/php5/
drwxr-xr-x root/root         0 2011-05-02 18:00 ./etc/php5/cli/
drwxr-xr-x root/root         0 2011-05-02 17:59 ./usr/
drwxr-xr-x root/root         0 2011-05-02 18:00 ./usr/bin/
-rwxr-xr-x root/root   7467156 2011-05-02 18:00 ./usr/bin/php5
drwxr-xr-x root/root         0 2011-05-02 17:59 ./usr/share/
drwxr-xr-x root/root         0 2011-05-02 17:58 ./usr/share/man/
drwxr-xr-x root/root         0 2011-05-02 18:00 ./usr/share/man/man1/
-rw-r--r-- root/root      3229 2011-05-02 17:59 ./usr/share/man/man1/php5.1.gz
drwxr-xr-x root/root         0 2011-05-02 17:59 ./usr/share/lintian/
drwxr-xr-x root/root         0 2011-05-02 17:59 ./usr/share/lintian/overrides/
-rw-r--r-- root/root       318 2011-05-02 17:59 ./usr/share/lintian/overrides/php5-cli
drwxr-xr-x root/root         0 2011-05-02 18:00 ./usr/share/doc/
drwxr-xr-x root/root         0 2011-05-02 17:59 ./usr/lib/
drwxr-xr-x root/root         0 2011-05-02 17:59 ./usr/lib/php5/
drwxr-xr-x root/root         0 2011-05-02 17:59 ./usr/lib/php5/20090626+lfs/
lrwxrwxrwx root/root         0 2011-05-02 18:00 ./etc/php5/cli/conf.d -&gt; ../conf.d
lrwxrwxrwx root/root         0 2011-05-02 18:00 ./usr/share/doc/php5-cli -&gt; php5-common
</pre>

<p class="paragraph">
・設定ファイル、ディレクトリなど
<br />
</p>
<pre>/etc/dpkg/dpkg.cfg : 設定ファイル
/var/lib/dpkg/available : 利用可能なパッケージ
/var/log/dpkg.log : ログファイル
</pre>

<h3 id="idf6b4ec">apt-cache, apt-getコマンド</h3>

<p class="paragraph">
・利用可能なパッケージを探す。
<br />
</p>
<pre>$ apt-cache search ^php5
dwoo - PHP5 template engine
libgv-php5 - Php5 bindings for graphviz
php5-adodb - Extension optimising the ADOdb database abstraction library
php5-auth-pam - A PHP5 extension for PAM authentication
...
</pre>

<p class="paragraph">
・利用可能なパッケージの情報を取得する。
<br />
</p>
<pre class="plugin_pre">
$ apt-cache show php-pear
Package: php-pear
Priority: optional
Section: php
Installed-Size: 2600
Maintainer: Ubuntu Developers &lt;ubuntu-devel-discuss@lists.ubuntu.com&gt;
Original-Maintainer: Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt;
Architecture: all
Source: php5
Version: 5.3.2-1ubuntu4.9
...
</pre>

<p class="paragraph">
・パッケージの「仮」インストールを行なってみる(&quot;-s&quot; or &quot;--dry-run&quot;オプション)。
<br />
</p>
<pre class="plugin_pre">
$ sudo apt-get install --dry-run php5-cli
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following extra packages will be installed:
  php5-common
Suggested packages:
  php-pear php5-suhosin
The following NEW packages will be installed:
  php5-cli php5-common
0 upgraded, 2 newly installed, 0 to remove and 0 not upgraded.
Inst php5-common (5.3.2-1ubuntu4.9 Ubuntu:10.04/lucid-updates)
Inst php5-cli (5.3.2-1ubuntu4.9 Ubuntu:10.04/lucid-updates)
Conf php5-common (5.3.2-1ubuntu4.9 Ubuntu:10.04/lucid-updates)
Conf php5-cli (5.3.2-1ubuntu4.9 Ubuntu:10.04/lucid-updates)
</pre>

<p class="paragraph">
・パッケージをダウンロードするだけで、インストールはしない(&quot;-d&quot;, &quot;--download-only&quot;)。
<br />
</p>
<pre class="plugin_pre">
$ sudo apt-get install -d php5-cli
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following extra packages will be installed:
  php5-common
Suggested packages:
  php-pear php5-suhosin
The following NEW packages will be installed:
  php5-cli php5-common
0 upgraded, 2 newly installed, 0 to remove and 0 not upgraded.
Need to get 3,363kB of archives.
After this operation, 8,610kB of additional disk space will be used.
Do you want to continue [Y/n]?
Get:1 http://us.archive.ubuntu.com/ubuntu/ lucid-updates/main php5-common 5.3.2-1ubuntu4.9 [546kB]
Get:2 http://us.archive.ubuntu.com/ubuntu/ lucid-updates/main php5-cli 5.3.2-1ubuntu4.9 [2,817kB]
Fetched 3,363kB in 7s (429kB/s)
Download complete and in download only mode
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ &lt;- インストールまでは実行していない。
</pre>

<p class="paragraph">
デフォルトでは&quot;/var/cache/apt/archives/&quot;に保存される。
<br />
</p>

<p class="paragraph">
・（まだインストールしていないパッケージも含めて）あるファイルを含むパッケージを探す。
<br />
事前に&quot;apt-file&quot;パッケージをインストールしておくこと。
<br />
</p>
<pre class="plugin_pre">
$ dpkg -l | grep -i ruby | wc -l
0
$ apt-file search /usr/bin/ruby
libglade2-ruby1.8: /usr/bin/ruby-glade-create-template
libruby1.8-dbg: /usr/lib/debug/usr/bin/ruby1.8
libruby1.9: /usr/lib/debug/usr/bin/ruby1.9
libruby1.9.1-dbg: /usr/lib/debug/usr/bin/ruby1.9.1
ruby: /usr/bin/ruby
ruby-prof: /usr/bin/ruby-prof
ruby1.8: /usr/bin/ruby1.8
ruby1.9: /usr/bin/ruby1.9
ruby1.9.1: /usr/bin/ruby1.9.1
sloccount: /usr/bin/ruby_count
</pre>

<p class="paragraph">
・ソースコードのURIを表示する。
<br />
</p>
<pre class="plugin_pre">
$ apt-get source --print-uris libpng
Reading package lists... Done
Building dependency tree
Reading state information... Done
Need to get 693kB of source archives.
&#039;http://us.archive.ubuntu.com/ubuntu/pool/main/libp/libpng/libpng_1.2.42-1ubuntu2.2.dsc&#039; \
    libpng_1.2.42-1ubuntu2.2.dsc 1939 MD5Sum:77bdd4a86079d816f208d23e6a56d8e8
&#039;http://us.archive.ubuntu.com/ubuntu/pool/main/libp/libpng/libpng_1.2.42.orig.tar.bz2&#039; \
    libpng_1.2.42.orig.tar.bz2 670811 MD5Sum:9a5cbe9798927fdf528f3186a8840ebe
&#039;http://us.archive.ubuntu.com/ubuntu/pool/main/libp/libpng/libpng_1.2.42-1ubuntu2.2.debian.tar.bz2&#039; \
    libpng_1.2.42-1ubuntu2.2.debian.tar.bz2 20532 MD5Sum:f0eb3be297e03dd258d73c36bb3dff8d
</pre>

<p class="paragraph">
・ソースコードをカレントディレクトリにダウンロードする。
<br />
</p>
<pre class="plugin_pre">
$ apt-get source --download-only libpng
Reading package lists... Done
Building dependency tree
Reading state information... Done
Need to get 693kB of source archives.
Get:1 http://us.archive.ubuntu.com/ubuntu/ lucid-updates/main libpng 1.2.42-1ubuntu2.2 (dsc) [1,939B]
Get:2 http://us.archive.ubuntu.com/ubuntu/ lucid-updates/main libpng 1.2.42-1ubuntu2.2 (tar) [671kB]
Get:3 http://us.archive.ubuntu.com/ubuntu/ lucid-updates/main libpng 1.2.42-1ubuntu2.2 (diff) [20.5kB]
Fetched 693kB in 5s (125kB/s)
Download complete and in download only mode
</pre>

<p class="paragraph">
・設定ファイル・ディレクトリなど
<br />
</p>
<pre>/etc/apt/sources.list : リポジトリのリスト
/etc/apt/apt.conf : 設定ファイル
/var/cache/apt/archives/ : ダウンロードしたパッケージの保存先
</pre>

<h3 id="id646ac5">apt-fileコマンド</h3>

<pre>$ apt-file search xxxxx
</pre>
<p class="paragraph">
→ ファイル名をもとに、そのファイルを提供しているパッケージを検索してくれる。
<br />
</p>

<hr class="full_hr" />
<ul class="plugin_navi">
<li>[&nbsp;<a href="./view-326.html" title="技術/Linux/dateコマンドメモ">Prev</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-325.html" title="技術/Linux/etc/issue(.net)ファイル">Next</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-509.html" title="技術/Linux">Up</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-23.html" title="技術">技術</a>&nbsp;]</li>
</ul>
</div>

<div class="data_attrs_post">
original url: https://www.glamenv-septzen.net/view/1018<br>
</div>

</div>
<!-- //data_main -->

</div>


</div>
<!-- /content-wrap end -->

<!-- footer start -->
<div id="footer">
Copyright &copy; 2001 - 2025 Masahiko Sakamoto(msakamoto-sf)<br>
License&nbsp;:&nbsp;<a target="_blank" href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a><br>
Contact&nbsp;:&nbsp;<a target="_blank" href="https://x.com/msakamoto_sf">x(twitter)</a> / <a target="_blank" href="https://github.com/msakamoto-sf/">github</a> / <a class="maillink" target="_blank" href="mailto:&#x73;&#x61;&#x6B;&#x61;&#x6D;&#x6F;&#x74;&#x6F;&#x2E;&#x67;&#x73;&#x79;&#x63;&#x2E;&#x33;&#x73;&#x40;&#x67;&#x6D;&#x61;&#x69;&#x6C;&#x2E;&#x63;&#x6F;&#x6D;">email</a><br>
--&nbsp;Beautiful Icons&nbsp;--<br />
<a href="http://www.famfamfam.com/lab/icons/silk/" target="_blank" title="Mark James Silk icon set 1.3">Mark James Silk icon set 1.3</a> by famfamfam<br />
<a href="http://www.pinvoke.com/" target="_blank" title="Fugue Icons">Fugue Icons</a> by Yusuke Kamiyamane<br />
</div>
<!-- /footer end -->

</div>
<!-- /body end -->

</body>
</html>