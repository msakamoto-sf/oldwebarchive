<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>技術/MacOSX/シェルスクリプトを&quot;.app&quot;(&quot;Bundle&quot;)化する - Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)</title>
<!-- favicon 2017's reference:
https://developers.google.com/web/fundamentals/design-and-ui/browser-customization/
https://msdn.microsoft.com/ja-jp/library/dn455106(v=vs.85).aspx
https://developer.chrome.com/multidevice/android/installtohomescreen
https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html
-->
<link rel="shortcut icon" href="../favicons/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="icon" href="../favicons/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="apple-touch-icon" sizes="57x57" href="../favicons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="../favicons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="../favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="../favicons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="../favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="../favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="../favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="../favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="../favicons/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="../favicons/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="../favicons/favicon-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="../favicons/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-160x160.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-196x196.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../favicons/favicon-32x32.png" sizes="32x32">

<!-- browserconfig.xml : https://msdn.microsoft.com/ja-jp/library/dn455106(v=vs.85).aspx -->
<meta name="msapplication-TileColor" content="#990000">
<meta name="msapplication-TileImage" content="../favicons/mstile-144x144.png">

<!-- these favicon files were generated by https://ao-system.net/favicongenerator/ , thanks!!(2017-02-18) -->

<style type="text/css"></style>

<link href="./css/pcbrowser.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/pcbrowser_plugins.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/pcbrowser_wiki.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/print.css" rel="stylesheet" type="text/css" media="print"/>
</head>
<body>
<!-- body start -->
<div class="body">
<div style="display: inline"><a name="pagetop"></a></div>
<div id="header-wrap">
<img src="./images/logo1.jpg" style="float: left; margin-right: 1em;"/>
<a href="./index.html" title="Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)"><img src="./icons/home.png" alt="home"/>&nbsp;Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)</a>


<h1 style="margin-bottom: 10px;">技術/MacOSX/シェルスクリプトを&quot;.app&quot;(&quot;Bundle&quot;)化する</h1>

<div style="clear: both;"></div>
</div><!-- //header-wrap -->

<!-- content-wrap start -->
<div id="content-wrap"><div class="contents_s">

<!-- data_main -->
<div class="data_main">

<div class="data_attrs_pre">
作成日: 2013-07-06 23:49:43 &nbsp; / &nbsp; last updated at: 2013-08-17 14:05:21<br>
カテゴリ: <a href="category-55.html">Apple</a>&nbsp;<a href="category-63.html">Eclipse</a>&nbsp;<a href="category-11.html">Java</a>&nbsp;<a href="category-39.html">シェルスクリプト</a>&nbsp;</div>

<div class="data_body">
<ul class="plugin_navi">
<li>[&nbsp;<a href="./view-808.html" title="技術/MacOSX/FinderとTerminalのPATH設定">Prev</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-1067.html" title="技術/MacOSX/テキストエディタ環境">Next</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-23.html" title="技術">技術</a>&nbsp;]</li>
</ul>
<hr class="full_hr" />
<p class="paragraph">
Javaアプリで、&quot;java -jar xxxx.jar&quot;だけで動くようなアプリの場合、Mac OS XのLaunchPadやSpotlightなどのランチャーアプリから検索して実行するのに支障があります。それに限らず、シェルスクリプトを介して実行したかったり、諸事情で&quot;xxxx.app&quot;の中身の構成を若干調整したい場合の参考資料などを勉強がてらまとめました。
<br />
</p>

<pre>環境 : Mac OS X 10.8.4
</pre>



<ul><li><a href="#id5393dd">基本 : &quot;xxxx.app&quot; = &quot;Bundle&quot;</a></li>
<li><a href="#idc0dfef">シェルスクリプトを&quot;.app&quot;(=&quot;Bundle&quot;)化するには</a><ul><li><a href="#id17eb83">最小構成</a></li>
<li><a href="#id438420">アイコン画像の追加</a></li></ul></li>
<li><a href="#idc42525">実践例</a><ul><li><a href="#idbb8061">PortSwiggerのBurpSuite 1.5 (Free版)を&quot;.app&quot;化する</a></li>
<li><a href="#idb3aed7">Eclipseの&quot;.app&quot;と複数バージョンについて</a></li></ul></li></ul>
<hr />

<h3 id="id5393dd">基本 : &quot;xxxx.app&quot; = &quot;Bundle&quot;</h3>

<p class="paragraph">
まず&quot;xxxx.app&quot;のディレクトリは、&quot;Mac Developer Library&quot;では &quot;Bundle&quot; と呼ばれており、&quot;Bundle Programming Guide&quot;にその構成方法が紹介されています。
<br />
</p>

<ul><li> <a class="externallink" href="http://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFBundles/Introduction/Introduction.html" target="_blank">http://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFBundles/Introduction/Introduction.html</a></li></ul>

<p class="paragraph">
&quot;Bundle&quot;は &quot;iOS Application&quot; と &quot;OS X Application&quot; の両方で使われているテクノロジーです。今回はシェルスクリプトを&quot;.app&quot;として扱いたいので、&quot;Anatomy of an OS X Application Bundle&quot; が参考になります。
<br />
</p>

<ul><li> <a class="externallink" href="http://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFBundles/BundleTypes/BundleTypes.html" target="_blank">http://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFBundles/BundleTypes/BundleTypes.html</a></li></ul>

<p class="paragraph">
簡単にまとめると以下の様なディレクトリ構成になってるようです。
<br />
</p>
<pre class="plugin_pre">
xxxx.app/
  Contents/
    Info.plist : アプリ用のPropertyList
    MacOS/
      実行ファイルやフレームワークライブラリなど
    Resources/
      アイコンや画像、メッセージなどリソースファイル
</pre>

<p class="paragraph">
Info.plistではXML形式で、&quot;MacOS&quot;ディレクトリに入っている実行ファイルを指定したり、アプリの名前やアイコン、&quot;Preference&quot;設定などを記載するようです。
<br />
</p>

<ul><li> PropertyListの一般的な説明<ul><li> <a class="externallink" href="http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/Introduction/Introduction.html" target="_blank">http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/Introduction/Introduction.html</a></li></ul></li>
<li> &quot;Bundle&quot;などアプリケーション設定に関わるPropertyListの設定の説明<ul><li> <a class="externallink" href="http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPRuntimeConfig/000-Introduction/introduction.html" target="_blank">http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPRuntimeConfig/000-Introduction/introduction.html</a></li></ul></li></ul>

<h3 id="idc0dfef">シェルスクリプトを&quot;.app&quot;(=&quot;Bundle&quot;)化するには</h3>

<p class="paragraph">
本記事のお題である、シェルスクリプトの&quot;.app&quot;化はそんなに難しくありません。決められたディレクトリ構成と、最小限度のInfo.plistで簡単に実現できます。
<br />
</p>

<h4 id="id17eb83">最小構成</h4>

<p class="paragraph">
&quot;xxxx.app&quot;ディレクトリの構成:
<br />
</p>
<pre class="plugin_pre">
xxxx.app/
  Contents/
    Info.plist
    MacOS/
      xxxx.sh (chmod +x して実行権限をつけておく)
    Resources/
      (空)
</pre>

<p class="paragraph">
Info.plist:
<br />
</p>
<pre class="plugin_pre">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE plist PUBLIC &quot;-//Apple Computer//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;
&lt;plist version=&quot;1.0&quot;&gt;
  &lt;dict&gt;
    &lt;key&gt;CFBundleExecutable&lt;/key&gt;
    &lt;string&gt;xxxx.sh&lt;/string&gt;
    &lt;key&gt;CFBundlePackageType&lt;/key&gt;
    &lt;string&gt;APPL&lt;/string&gt;
    &lt;key&gt;CFBundleSignature&lt;/key&gt;
    &lt;string&gt;????&lt;/string&gt;
  &lt;/dict&gt;
&lt;/plist&gt;
</pre>

<p class="paragraph">
参考：
<br />
</p>
<ul><li> Karuku Mac: シェルスクリプトをMacのアプリケーション化するシェルスクリプト<ul><li> <a class="externallink" href="http://karukumac.blogspot.jp/2013/02/mac.html" target="_blank">http://karukumac.blogspot.jp/2013/02/mac.html</a></li></ul></li>
<li> シェルスクリプトなどの CUI アプリケーションを Mac OS X 方式の .app にする方法<ul><li> <a class="externallink" href="https://pqrs.org/tekezo/macosx/doc/makeapp/" target="_blank">https://pqrs.org/tekezo/macosx/doc/makeapp/</a></li></ul></li>
<li> Macはじめました。: シェルスクリプトを「.app」形式にする方法 - 「SayKanji.app」を作ってみる。<ul><li> <a class="externallink" href="http://hajimemasita.blogspot.jp/2009/05/app-saykanjiapp.html" target="_blank">http://hajimemasita.blogspot.jp/2009/05/app-saykanjiapp.html</a></li></ul></li>
<li> シェルスクリプトを Mac OS X 方式の .app にする方法 [簡単 2 ステップ] - うむらうす<ul><li> <a class="externallink" href="http://umu.hustle.ne.jp/blog/archives/001288.html" target="_blank">http://umu.hustle.ne.jp/blog/archives/001288.html</a></li></ul></li></ul>

<p class="paragraph">
上記で構成した &quot;xxxx.app&quot; を &quot;/Applications/&quot; に移せば、Spotlight検索からも見つかるし、LaunchPadからも起動できるようになります。
<br />
&quot;/Applications/&quot; をFinderで開いて、&quot;xxxx.app&quot; のアイコンをDockにDrag&amp;Dropすれば、Dockからも起動できるようになります。
<br />
</p>

<h4 id="id438420">アイコン画像の追加</h4>

<p class="paragraph">
アイコンを追加するには、&quot;.icns&quot;ファイルをどうにかして用意して、&quot;Resources&quot;ディレクトリの下に配置し、Info.plistにアイコンファイルの設定を追記します。
<br />
</p>
<pre class="plugin_pre">
追加：
xxxx.app/Contents/MacOS/Resources/xxxx.icns

Info.plist追加：
...
&lt;plist version=&quot;1.0&quot;&gt;
  &lt;dict&gt;
    ...
    &lt;key&gt;CFBundleIconFile&lt;/key&gt;
    &lt;string&gt;app.icns&lt;/string&gt;
  &lt;/dict&gt;
&lt;/plist&gt;
</pre>

<p class="paragraph">
なおFinderで確認するとアイコン画像が更新されない場合は（多分確実に更新されてないと思います）、一旦マシンを再起動すると良いでしょう。
<br />
今回試した環境では、再起動するだけで追加したアイコン画像がちゃんと表示されました。再起動でもダメな場合は、&quot;~/Library/Cache/&quot;以下を削除してから再起動してみてください。
<br />
</p>

<p class="paragraph">
（Finderのアイコンも含めた）Mac OSXでのキャッシュのクリア方法：
<br />
</p>
<ul><li> How to Delete Cache Files in Mac OS X | eHow<ul><li> <a class="externallink" href="http://www.ehow.com/how_8352019_delete-files-mac-os-x.html" target="_blank">http://www.ehow.com/how_8352019_delete-files-mac-os-x.html</a></li></ul></li>
<li> OSX Lion - Clear your caches! - Techbeast.net<ul><li> <a class="externallink" href="http://www.techbeast.net/2011/07/24/osx-lion-clear-your-caches/" target="_blank">http://www.techbeast.net/2011/07/24/osx-lion-clear-your-caches/</a></li></ul></li>
<li> Icon Cache | NSLog();<ul><li> <a class="externallink" href="http://nslog.com/2004/04/21/icon_cache" target="_blank">http://nslog.com/2004/04/21/icon_cache</a></li></ul></li>
<li> OS X Icon Cache Cleaner-Upper - Other - Snipplr Social Snippet Repository<ul><li> <a class="externallink" href="http://snipplr.com/view/259/" target="_blank">http://snipplr.com/view/259/</a><ul><li> Safariのiconキャッシュのクリアの参考例 : &quot;find $HOME/Library/Safari/Icons -type f -atime +30 -name &quot;*.cache&quot; -delete&quot;</li></ul></li></ul></li></ul>

<h3 id="idc42525">実践例</h3>

<p class="paragraph">
本記事を作るきっかけは、仕事や趣味でよく使うPortSwiggerのBurpSuiteを&quot;xxxx.app&quot;として起動したかったり、Eclipseの&quot;.app&quot;ファイルをもっと柔軟に取り扱いたい、という動機でした。
<br />
OSXで使えるランチャーを調べてみたりして、Alfred2で2,000円近くはたいて有料版のPowerPackまで購入してみたのですが、workflowとか余計なのを作らされた挙句Terminalが立ち上がってしまったりして、なかなか「単にシェルスクリプトをTerminalを表示せず起動したいだけのランチャー」というのが見つからず（誰か知ってます？）、止む無く&quot;java -jar xxxx.jar&quot;を実行するシェルスクリプトを&quot;.app&quot;化してLaunchPadなどで起動できるようにした次第です。Automator使っても可能といえば可能なんですが・・・アイコンのカスタマイズが効かなかったり、そもそもシェルスクリプトを&quot;.app&quot;化したいだけであそこまで大仰な仕組みを使うのも何だか収まりが悪かったのです。
<br />
</p>

<h4 id="idbb8061">PortSwiggerのBurpSuite 1.5 (Free版)を&quot;.app&quot;化する</h4>

<p class="paragraph">
準備：Javaを入れておきます。javaとjarコマンドを使えるようにしておきます。
<br />
</p>

<p class="paragraph">
まずBurpSutieのjarファイルをDLします。今回は burpsuite_free_v1.5.jar をDLしました。
<br />
</p>
<ul><li> Download Burp Suite<ul><li> <a class="externallink" href="http://www.portswigger.net/burp/download.html" target="_blank">http://www.portswigger.net/burp/download.html</a></li></ul></li></ul>

<p class="paragraph">
次に、作業用のディレクトリで&quot;.app&quot;ディレクトリを作成し、&quot;Bundle&quot;の基本構成を作っておきます。
<br />
</p>
<pre>$ mkdir (...)/burp-1.5.app
$ cd (...)/burp-1.5.app
$ mkdir -p (...)/burp-1.5.app/Contents
$ mkdir -p (...)/burp-1.5.app/Contents/MacOS
$ mkdir -p (...)/burp-1.5.app/Contents/Resources
$ mkdir -p (...)/burp-1.5.app/Contents/Resources
</pre>

<p class="paragraph">
ここでちょっと寄り道して、アイコンを作成しておきます。&quot;jar xf burpsuite_free_v1.5.jar&quot; でjarの中身を展開し、&quot;burp/media/icon64.png&quot; などを&quot;.icns&quot;に変換します。
<br />
具体的な変換方法や使用するツールについては省略します。
<br />
今回は &quot;app.icns&quot; という名前にして、&quot;Resources&quot;ディレクトリの下に置きました。
<br />
</p>

<p class="paragraph">
続いて実行するシェルスクリプトを用意します。&quot;Contents/MacOS&quot;ディレクトリの下に次のシェルスクリプトを作成し、&quot;chmod +x&quot;で実行権限をつけておきます。
<br />
</p>

<p class="paragraph">
burp-1.5.sh:
<br />
</p>
<pre class="plugin_pre">
#!/bin/sh
# AppleのJavaを使わず、好みのJDK/JREを使うようカスタマイズしたい場合に以下2行を追加・調整。
export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.7.0_21.jdk/Contents/Home
export PATH=$JAVA_HOME/bin:$PATH
JAR_DIR=`dirname $0`
java -Xdock:name=&quot;BurpSuite 1.5&quot; -Xdock:icon=$JAR_DIR/../Resources/app.icns -jar $JAR_DIR/burpsuite_free_v1.5.jar
</pre>

<p class="paragraph">
上記スクリプトでは、実行するjarファイルがshファイルと同じフォルダに置いておくことを前提としてます。jarファイルをMacOSディレクトリに置くことになるわけですが、お作法としてこれでOKかちょっと分かりません・・・。jarファイルを実行ファイルと考えればここでも良いような気がします。また、一応ちゃんと動いています。
<br />
というわけで、burpsuite_free_v1.5.jarをMacOSディレクトリの下に移しておきます。
<br />
また、上記スクリプトでは&quot;-Xdoc:name&quot;と&quot;-Xdock:icon&quot;というJVMオプションを指定して、実行時にDock上でも名前が分かるようにしています。
<br />
</p>

<p class="paragraph">
最後にInfo.plistを作成します。今回は以下の様な内容にしました。
<br />
&quot;burp-1.5.app/Contents/Info.plist&quot;:
<br />
</p>
<pre class="plugin_pre">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE plist PUBLIC &quot;-//Apple Computer//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;
&lt;plist version=&quot;1.0&quot;&gt;
  &lt;dict&gt;
    &lt;key&gt;CFBundleName&lt;/key&gt;
    &lt;string&gt;Burp-1.5&lt;/string&gt;
    &lt;key&gt;CFBundleDisplayName&lt;/key&gt;
    &lt;string&gt;Burp-1.5&lt;/string&gt;
    &lt;key&gt;CFBundleExecutable&lt;/key&gt;
    &lt;string&gt;burp-1.5.sh&lt;/string&gt;
    &lt;key&gt;CFBundlePackageType&lt;/key&gt;
    &lt;string&gt;APPL&lt;/string&gt;
    &lt;key&gt;CFBundleSignature&lt;/key&gt;
    &lt;string&gt;????&lt;/string&gt;
    &lt;key&gt;CFBundleIconFile&lt;/key&gt;
    &lt;string&gt;app.icns&lt;/string&gt;
  &lt;/dict&gt;
&lt;/plist&gt;
</pre>

<p class="paragraph">
&quot;CFBundleName&quot;と&quot;CFBundleDisplayName&quot;については何となーくあったほうが良いかな？レベルでつけてますので、削除しても良いかもです。
<br />
ポイントは &quot;CFBundleExecutable&quot; で実行権限をつけたシェルスクリプトを指定しているのと、&quot;CFBundleIconFile&quot; でアイコンファイル名を追加している点になります。
<br />
</p>

<p class="paragraph">
最終的なディレクトリ構成としては以下のようになりました。
<br />
</p>
<pre class="plugin_pre">
burp-1.5.app/
  Contents/
    Info.plist
    MacOS/
      burp-1.5.sh
      burpsuite_free_v1.5.jar
    Resources/
      app.icns
</pre>

<p class="paragraph">
この段階でFinderで表示してみると、アイコンが反映されてないため、マシンを再起動します。アイコンが無事更新されたら、実際にクリックしてみてBurpSuiteが起動するか確認します。起動しない場合は、普通にTerminalから直接burp-1.5.shを起動してデバッグしてみて下さい。
<br />
動作確認できたら、あとは&quot;/Applications/&quot;ディレクトリに移動してあげれば、少し待つとLaunchPadにも追加されますし、Spotlight検索からも検索できるようになりました。
<br />
</p>

<p class="paragraph">
追記：結局、&quot;burp-1.5&quot; ではちょっと見た目が短すぎるだろう、ということで、&quot;BurpSuite v1.5(Free).app&quot; というディレクトリ名に変更しました
<br />
。
<br />
</p>
<pre>/Applications/BurpSuite v1.5(Free).app/
  Contents/
    Info.plist
    ...
</pre>
<p class="paragraph">
Info.plist:
<br />
</p>
<pre>&lt;plist version=&quot;1.0&quot;&gt;
  &lt;dict&gt;
    &lt;key&gt;CFBundleName&lt;/key&gt;
    &lt;string&gt;BurpSuite v1.5(Free)&lt;/string&gt;
    &lt;key&gt;CFBundleDisplayName&lt;/key&gt;
    &lt;string&gt;BurpSuite v1.5(Free)&lt;/string&gt;
...
</pre>

<p class="paragraph">
それに伴い、&quot;dirname $0&quot; などで空白が混ざるようになりましたので、shファイルも以下のように修正しました。また、今までshの実行プロセスが残ってしまっていたので、javaコマンドに &quot;&amp;&quot; を後ろにつけて切り離して実行するようにして、shの方はすぐに終わるように修正してます。
<br />
burp-1.5.sh:
<br />
</p>
<pre class="plugin_pre">
...
JAR_DIR=`dirname &quot;$0&quot;`
java -Xdock:name=&quot;BurpSuite v1.5(Free)&quot; -Xdock:icon=&quot;$JAR_DIR/../Resources/app.icns&quot; -jar &quot;$JAR_DIR/burpsuite_free_v1.5.jar&quot; &amp;
</pre>

<p class="paragraph">
結局、こんな感じになりました。LaunchPad上は・・・
<br />
<a href="./../images/macosx_bundle_app/burp-app1.png" title="" target="_blank"><img src="./../images/macosx_bundle_app/burp-app1.png" alt="" title=""  /></a>
<br />
</p>

<p class="paragraph">
FinderからDockにDrag &amp; Drop してみるといい感じに収まりました。
<br />
<a href="./../images/macosx_bundle_app/burp-app2.png" title="" target="_blank"><img src="./../images/macosx_bundle_app/burp-app2.png" alt="" title=""  /></a>
<br />
</p>

<h4 id="idb3aed7">Eclipseの&quot;.app&quot;と複数バージョンについて</h4>

<p class="paragraph">
Eclipseはメジャーなアップデートは分けてインストールしておきたいタイプですので、単にEclipseのzipを解凍して&quot;/Applications/&quot; に放り込むだけは避けたいと考えています。
<br />
まずはOSX用のEclipseをDLします・・・が・・・すでに4.3 Keplerまで上がっちょる・・・。
<br />
自分、数ヶ月前にDLした eclipse-jee-juno-SR2-macosx-cocoa-x86_64.tar.gz を使おうと思ってたのです・・・。
<br />
</p>

<p class="paragraph">
とりあえず eclipse-jee-juno-SR2-macosx-cocoa-x86_64.tar.gz を解凍すると、こんなディレクトリ構成ができました。
<br />
</p>
<pre class="plugin_pre">
Eclipse.app/
artifacts.xml
configuration/
eclipse@ -&gt; Eclipse.app/Contents/MacOS/eclipse
epl-v10.html
features/
notice.html
p2/
plugins/
readme/
</pre>
<p class="paragraph">
実は、以前Eclipse 3.7と4.0を同居させた時、何も考えずに上記のような構成のフォルダを、&quot;/Applications/Eclipse/&quot; の下に&quot;3.7&quot;と&quot;4.0&quot;に分けてごっそり放り込んだんですよ。そしたら・・・
<br />
</p>
<pre class="plugin_pre">
/Applications/Eclipse/
  3.7/
    ...
    Eclipse.app/
    ...
  4.0/
    ...
    Eclipse.app/
    ...
</pre>
<p class="paragraph">
となってしまい、LaunchPad上、&quot;Eclipse.app&quot;が２つ見えるようになり、どっちがどっちか分からなくなってしまったんですね。
<br />
今回はそうした自体を避けたいな・・・というところでした。
<br />
</p>

<p class="paragraph">
eclipse-jee-juno-SR2-macosx-cocoa-x86_64.tar.gz を解凍したディレクトリの中にある &quot;Eclipse.app&quot;の中を覗いてみるとシンプルな構成になっていました。
<br />
&quot;Eclipse.app&quot;:
<br />
</p>
<pre class="plugin_pre">
Contents/
  Info.plist
  MacOS/
    eclipse
    eclipse.ini
  Resources/
    Eclipse.icns
</pre>

<p class="paragraph">
Info.plist:
<br />
</p>
<pre class="plugin_pre">
...
&lt;plist version=&quot;1.0&quot;&gt;
&lt;dict&gt;
  &lt;key&gt;CFBundleExecutable&lt;/key&gt;
  &lt;string&gt;eclipse&lt;/string&gt;
  &lt;key&gt;CFBundleGetInfoString&lt;/key&gt;
  &lt;string&gt;Eclipse 3.8 for Mac OS X, Copyright IBM Corp. and others 2002, 2011. All rights reserved.&lt;/string&gt;
  &lt;key&gt;CFBundleIconFile&lt;/key&gt;
  &lt;string&gt;Eclipse.icns&lt;/string&gt;
  &lt;key&gt;CFBundleIdentifier&lt;/key&gt;
  &lt;string&gt;org.eclipse.eclipse&lt;/string&gt;
  &lt;key&gt;CFBundleInfoDictionaryVersion&lt;/key&gt;
  &lt;string&gt;6.0&lt;/string&gt;
  &lt;key&gt;CFBundleName&lt;/key&gt;
  &lt;string&gt;Eclipse&lt;/string&gt;
  &lt;key&gt;CFBundlePackageType&lt;/key&gt;
  &lt;string&gt;APPL&lt;/string&gt;
  &lt;key&gt;CFBundleShortVersionString&lt;/key&gt;
  &lt;string&gt;3.8&lt;/string&gt;
  &lt;key&gt;CFBundleSignature&lt;/key&gt;
  &lt;string&gt;????&lt;/string&gt;
  &lt;key&gt;CFBundleVersion&lt;/key&gt;
  &lt;string&gt;3.8&lt;/string&gt;
  ...
  &lt;key&gt;Eclipse&lt;/key&gt;
  &lt;array&gt;
    &lt;!-- to use a specific Java version (instead of the platform&#039;s default) uncomment one of the following options:
    &lt;string&gt;-vm&lt;/string&gt;&lt;string&gt;/System/Library/Frameworks/JavaVM.framework/Versions/1.4.2/Commands/java&lt;/string&gt;
    &lt;string&gt;-vm&lt;/string&gt;&lt;string&gt;/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Commands/java&lt;/string&gt;
    --&gt;
    &lt;string&gt;-keyring&lt;/string&gt;&lt;string&gt;~/.eclipse_keyring&lt;/string&gt;
    &lt;string&gt;-showlocation&lt;/string&gt;
    &lt;!-- WARNING:
      If you try to add a single VM argument (-vmargs) here,
      *all* vmargs specified in eclipse.ini will be ignored.
      We recommend to add all arguments in eclipse.ini
    --&gt;
  &lt;/array&gt;
&lt;/dict&gt;
&lt;/plist&gt;
</pre>

<p class="paragraph">
なんかバージョン番号っぽいのに&quot;3.8&quot;とか入ってるんですが・・・とりあえず気にしないことにします。
<br />
また、JVMオプションをInfo.plistで指定できるっぽいですが、eclipse.iniで設定するほうがオススメっぽいことも書かれてます。
<br />
</p>

<p class="paragraph">
Contents/MacOS/eclipse.ini:
<br />
</p>
<pre class="plugin_pre">
-startup
../../../plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
../../../plugins/org.eclipse.equinox.launcher.cocoa.macosx.x86_64_1.1.200.v20120913-144807
-product
org.eclipse.epp.package.jee.product
--launcher.defaultAction
openFile
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Dhelp.lucene.tokenizer=standard
-XstartOnFirstThread
-Dorg.eclipse.swt.internal.carbon.smallFonts
-XX:MaxPermSize=256m
-Xms40m
-Xmx512m
-Xdock:icon=../Resources/Eclipse.icns
-XstartOnFirstThread
-Dorg.eclipse.swt.internal.carbon.smallFonts
</pre>

<p class="paragraph">
&quot;Eclipse.app&quot; をリネームして Info.plistの CFBundleNameもリネームして衝突しないようにすれば、&quot;/Application/Eclipse/バージョン番号&quot;別に配置しても問題ない感じがして来ました。
<br />
</p>

<p class="paragraph">
ということで、以下の様な構成にしてみます。
<br />
</p>
<pre>/Applications/
  Eclipse/
    e4.2-juno-jee-SR2/
      configurations/
      features/
      p2/
      plugins/
      Eclipse 4.2 Juno JEE SR2.app/  &lt;- &quot;Eclipse.app&quot;をリネーム
      ...
</pre>
<p class="paragraph">
Info.plistのCFBundleNameも &quot;Eclipse 4.2 Juno JEE SR2&quot; に変更しておきました。
<br />
</p>

<p class="paragraph">
→LaunchPad上で、以下の様なグループアイコンが表示されました。
<br />
<a href="./../images/macosx_bundle_app/eclipse-app1.png" title="" target="_blank"><img src="./../images/macosx_bundle_app/eclipse-app1.png" alt="" title=""  /></a>
<br />
</p>

<p class="paragraph">
→クリックしてみると、以下のように &quot;Eclipse 4.2 Juno JEE SR2.app&quot; が表示されました！なお、ラベルは当初&quot;Eclipse(その他&quot;みたいになってたので、&quot;Eclipse&quot;だけに変更してます。
<br />
<a href="./../images/macosx_bundle_app/eclipse-app2.png" title="" target="_blank"><img src="./../images/macosx_bundle_app/eclipse-app2.png" alt="" title=""  /></a>
<br />
</p>

<p class="paragraph">
これで、将来新しいバージョンのEclipseをインストールするときも衝突せずに導入できるようになりました（多分）。
<br />
</p>

<hr class="full_hr" />
<ul class="plugin_navi">
<li>[&nbsp;<a href="./view-808.html" title="技術/MacOSX/FinderとTerminalのPATH設定">Prev</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-1067.html" title="技術/MacOSX/テキストエディタ環境">Next</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-23.html" title="技術">技術</a>&nbsp;]</li>
</ul>
</div>

<div class="data_attrs_post">
original url: https://www.glamenv-septzen.net/view/1201<br>
</div>

</div>
<!-- //data_main -->

</div>


</div>
<!-- /content-wrap end -->

<!-- footer start -->
<div id="footer">
Copyright &copy; 2001 - 2025 Masahiko Sakamoto(msakamoto-sf)<br>
License&nbsp;:&nbsp;<a target="_blank" href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a><br>
Contact&nbsp;:&nbsp;<a target="_blank" href="https://x.com/msakamoto_sf">x(twitter)</a> / <a target="_blank" href="https://github.com/msakamoto-sf/">github</a> / <a class="maillink" target="_blank" href="mailto:&#x73;&#x61;&#x6B;&#x61;&#x6D;&#x6F;&#x74;&#x6F;&#x2E;&#x67;&#x73;&#x79;&#x63;&#x2E;&#x33;&#x73;&#x40;&#x67;&#x6D;&#x61;&#x69;&#x6C;&#x2E;&#x63;&#x6F;&#x6D;">email</a><br>
--&nbsp;Beautiful Icons&nbsp;--<br />
<a href="http://www.famfamfam.com/lab/icons/silk/" target="_blank" title="Mark James Silk icon set 1.3">Mark James Silk icon set 1.3</a> by famfamfam<br />
<a href="http://www.pinvoke.com/" target="_blank" title="Fugue Icons">Fugue Icons</a> by Yusuke Kamiyamane<br />
</div>
<!-- /footer end -->

</div>
<!-- /body end -->

</body>
</html>