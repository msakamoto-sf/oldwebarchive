<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>C言語系/memos/VC++/12, フレームポインタ省略(FPO)と&quot;Oy&quot;オプション - Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)</title>
<!-- favicon 2017's reference:
https://developers.google.com/web/fundamentals/design-and-ui/browser-customization/
https://msdn.microsoft.com/ja-jp/library/dn455106(v=vs.85).aspx
https://developer.chrome.com/multidevice/android/installtohomescreen
https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html
-->
<link rel="shortcut icon" href="../favicons/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="icon" href="../favicons/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="apple-touch-icon" sizes="57x57" href="../favicons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="../favicons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="../favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="../favicons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="../favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="../favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="../favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="../favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="../favicons/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="../favicons/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="../favicons/favicon-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="../favicons/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-160x160.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-196x196.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../favicons/favicon-32x32.png" sizes="32x32">

<!-- browserconfig.xml : https://msdn.microsoft.com/ja-jp/library/dn455106(v=vs.85).aspx -->
<meta name="msapplication-TileColor" content="#990000">
<meta name="msapplication-TileImage" content="../favicons/mstile-144x144.png">

<!-- these favicon files were generated by https://ao-system.net/favicongenerator/ , thanks!!(2017-02-18) -->

<style type="text/css"></style>

<link href="./css/pcbrowser.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/pcbrowser_plugins.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/pcbrowser_wiki.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/print.css" rel="stylesheet" type="text/css" media="print"/>
</head>
<body>
<!-- body start -->
<div class="body">
<div style="display: inline"><a name="pagetop"></a></div>
<div id="header-wrap">
<img src="./images/logo1.jpg" style="float: left; margin-right: 1em;"/>
<a href="./index.html" title="Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)"><img src="./icons/home.png" alt="home"/>&nbsp;Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)</a>


<h1 style="margin-bottom: 10px;">C言語系/memos/VC++/12, フレームポインタ省略(FPO)と&quot;Oy&quot;オプション</h1>

<div style="clear: both;"></div>
</div><!-- //header-wrap -->

<!-- content-wrap start -->
<div id="content-wrap"><div class="contents_s">

<!-- data_main -->
<div class="data_main">

<div class="data_attrs_pre">
作成日: 2011-02-01 16:40:33 &nbsp; / &nbsp; last updated at: 2011-02-01 17:12:27<br>
カテゴリ: <a href="category-10.html">C言語</a>&nbsp;<a href="category-8.html">Windows</a>&nbsp;<a href="category-23.html">セキュリティ</a>&nbsp;</div>

<div class="data_body">
<ul class="plugin_navi">
<li>[&nbsp;<a href="./view-769.html" title="C言語系/memos/VC++/11, 構造化例外処理と&quot;/SAFESEH&quot;リンカオプション">Prev</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-920.html" title="C言語系/memos/VC++/13, _NT_SYMBOL_PATH環境変数に注意">Next</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-478.html" title="C言語系">C言語系</a>&nbsp;]</li>
</ul>
<hr class="full_hr" />

<p class="paragraph">
VC++では &quot;/Oy&quot; オプションによりフレームポインタを省略(&quot;FPO&quot; : Frame Pointer Omission)する最適化を利用できます。
<br />
ちなみに、&quot;FPO&quot;の最後の&quot;O&quot;は省略(Omission)を表します。ですので、「最適化」まで付けると
<br />
</p>
<pre>FPOO : Frame Pointer Omission Optimization
</pre>
<p class="paragraph">
になっちゃいます。かわいいですね。
<br />
</p>

<p class="paragraph">
この最適化なんですが、Windows開発チームはXP(SP2)以降は無効にしているようです。
<br />
FPOを有効にすると、PDBファイルのシンボル情報が無いとスタックトレース情報を復元できず、アセンブラレベルでのデバッグに支障が出る恐れがあります。
<br />
またマシンスペック向上のおかげで、FPOの有無は殆ど速度に影響を与えないそうです。
<br />
</p>

<p class="paragraph">
&quot;Responder&quot;という逆解析ソフトを使うとFPO有効な関数でもスタック上のデータを解析できるようなので、逆解析を難しくするという効果も低くなります。
<br />
</p>

<p class="paragraph">
以上のような事情で、少なくとも最近のWindows開発においては、FPOによる最適化はあまり人気が無いようです。
<br />
</p>

<p class="paragraph">
参考：
<br />
</p>
<ul><li> Consider not using the Frame Pointer Optimization when building your software - Yves Dolce - Site Home - MSDN Blogs<ul><li> <a class="externallink" href="http://blogs.msdn.com/b/yvesdolc/archive/2009/09/15/consider-not-using-the-frame-pointer-optimization-when-building-your-software.aspx" target="_blank">http://blogs.msdn.com/b/yvesdolc/archive/2009/09/15/consider-not-using-the-frame-pointer-optimization-when-building-your-software.aspx</a></li></ul></li>
<li> FPO フレーム - Web/DB プログラミング徹底解説<ul><li> <a class="externallink" href="http://keicode.com/debug/dbg215.php" target="_blank">http://keicode.com/debug/dbg215.php</a></li></ul></li>
<li> Responder is better than IDA Pro for analyzing malware | HBGary<ul><li> <a class="externallink" href="https://www.hbgary.com/martinblog/responder-is-better-than-ida-pro-for-analyzing-malware/" target="_blank">https://www.hbgary.com/martinblog/responder-is-better-than-ida-pro-for-analyzing-malware/</a></li></ul></li></ul>

<p class="paragraph">
Advanced Windows Debugging, Chapter 2, p74:
<br />
</p>
<pre>This section (and the remainder of the book), ignores frame pointer omission (FPO) optimization,
simply because it is not used in Windows XP SP2 and later operating system.
Since FPO optimization makes debugging nearly impossible without symbols,
the current recommendation is to avoid it completely.
</pre>

<hr class="full_hr" />
<ul class="plugin_navi">
<li>[&nbsp;<a href="./view-769.html" title="C言語系/memos/VC++/11, 構造化例外処理と&quot;/SAFESEH&quot;リンカオプション">Prev</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-920.html" title="C言語系/memos/VC++/13, _NT_SYMBOL_PATH環境変数に注意">Next</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-582.html" title="C言語系/memos/VC++">Up</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-478.html" title="C言語系">C言語系</a>&nbsp;]</li>
</ul>
</div>

<div class="data_attrs_post">
original url: https://www.glamenv-septzen.net/view/915<br>
</div>

</div>
<!-- //data_main -->

</div>


</div>
<!-- /content-wrap end -->

<!-- footer start -->
<div id="footer">
Copyright &copy; 2007 - 2025 Masahiko Sakamoto(msakamoto-sf)<br>
License&nbsp;:&nbsp;<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a><br>
Contact&nbsp;:&nbsp;<a target="_blank" href="https://x.com/msakamoto_sf">x(twitter)</a> / <a target="_blank" href="https://github.com/msakamoto-sf/">github</a> / <a class="maillink" href="mailto:&#x73;&#x61;&#x6B;&#x61;&#x6D;&#x6F;&#x74;&#x6F;&#x2E;&#x67;&#x73;&#x79;&#x63;&#x2E;&#x33;&#x73;&#x40;&#x67;&#x6D;&#x61;&#x69;&#x6C;&#x2E;&#x63;&#x6F;&#x6D;">email</a><br>
--&nbsp;Beautiful Icons&nbsp;--<br />
<a href="http://www.famfamfam.com/lab/icons/silk/" target="_blank" title="Mark James Silk icon set 1.3">Mark James Silk icon set 1.3</a> by famfamfam<br />
<a href="http://www.pinvoke.com/" target="_blank" title="Fugue Icons">Fugue Icons</a> by Yusuke Kamiyamane<br />
</div>
<!-- /footer end -->

</div>
<!-- /body end -->

</body>
</html>