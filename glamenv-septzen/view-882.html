<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Java/IOストリームメモ - Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)</title>
<!-- favicon 2017's reference:
https://developers.google.com/web/fundamentals/design-and-ui/browser-customization/
https://msdn.microsoft.com/ja-jp/library/dn455106(v=vs.85).aspx
https://developer.chrome.com/multidevice/android/installtohomescreen
https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html
-->
<link rel="shortcut icon" href="../favicons/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="icon" href="../favicons/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="apple-touch-icon" sizes="57x57" href="../favicons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="../favicons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="../favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="../favicons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="../favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="../favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="../favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="../favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="../favicons/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="../favicons/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="../favicons/favicon-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="../favicons/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-160x160.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-196x196.png" sizes="96x96">
<link rel="icon" type="image/png" href="../favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../favicons/favicon-32x32.png" sizes="32x32">

<!-- browserconfig.xml : https://msdn.microsoft.com/ja-jp/library/dn455106(v=vs.85).aspx -->
<meta name="msapplication-TileColor" content="#990000">
<meta name="msapplication-TileImage" content="../favicons/mstile-144x144.png">

<!-- these favicon files were generated by https://ao-system.net/favicongenerator/ , thanks!!(2017-02-18) -->

<style type="text/css"></style>

<link href="./css/pcbrowser.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/pcbrowser_plugins.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/pcbrowser_wiki.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="./css/print.css" rel="stylesheet" type="text/css" media="print"/>
</head>
<body>
<!-- body start -->
<div class="body">
<div style="display: inline"><a name="pagetop"></a></div>
<div id="header-wrap">
<img src="./images/logo1.jpg" style="float: left; margin-right: 1em;"/>
<a href="./index.html" title="Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)"><img src="./icons/home.png" alt="home"/>&nbsp;Glamenv-Septzen(ぐらめぬ・ぜぷつぇん)(archive)</a>


<h1 style="margin-bottom: 10px;">Java/IOストリームメモ</h1>

<div style="clear: both;"></div>
</div><!-- //header-wrap -->

<!-- content-wrap start -->
<div id="content-wrap"><div class="contents_s">

<!-- data_main -->
<div class="data_main">

<div class="data_attrs_pre">
作成日: 2010-12-24 15:15:03 &nbsp; / &nbsp; last updated at: 2010-12-25 10:15:17<br>
カテゴリ: <a href="category-11.html">Java</a>&nbsp;</div>

<div class="data_body">
<ul class="plugin_navi">
<li>[&nbsp;<a href="./view-1377.html" title="Java/HTTP Proxyとしてカスタマイズ可能なライブラリ参考メモ">Prev</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-1442.html" title="Java/IntelliJ IDEA/プラグイン参考メモ(2018-12時点調査段階)">Next</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-457.html" title="Java">Java</a>&nbsp;]</li>
</ul>
<hr class="full_hr" />

<p class="paragraph">
IOストリーム関連のメモ。自分がよく使うクラスに絞って、使い分けやコツなどをまとめてみた。
<br />
</p>


<ul><li><a href="#idaf42fe">基本的な考え方と参考資料</a></li>
<li><a href="#idb0c877">バイト単位の入出力(InputStream/OutputStream系)</a></li>
<li><a href="#id96fe02">文字単位の入出力(Reader/Writer系)</a></li>
<li><a href="#idac9298">文字列(行)単位出力の便利クラス(PrintWriter/PrintStream)</a></li>
<li><a href="#id5a73fc">トークン単位の読み込み(構文解析用)</a></li>
<li><a href="#idc86b98">標準入出力と外部プロセスの起動</a></li>
<li><a href="#id7992b9">サンプル</a><ul><li><a href="#id11d10d">バイト単位・文字単位・文字列単位の入出力サンプル</a></li>
<li><a href="#idb0d21e">FilterInput/OutputStreamを使った16進ダンプのサンプル</a></li></ul></li></ul>
<hr />
<h3 id="idaf42fe">基本的な考え方と参考資料</h3>

<ul><li> 「ストリーム」 : read/writeで一方通行が基本。read系はひたすら前進して読み込んでいく。write系はひたすら書きこんでいくだけ。</li>
<li> java.ioやjava.nioにまとめられている。基本的にランダムアクセスは無し。</li>
<li> ランダムアクセスしたい場合(=seek()を使いたい場合)はjava.io.RandomAccessFileクラスを使う。</li>
<li> 入出力先でファイルを指定する場合は java.io.File を使える。java.io.Fileを使わず、直接ファイル名で指定できる場合もある。</li></ul>

<p class="paragraph">
入出力の単位：
<br />
</p>
<ul><li> バイト(byte)単位：InputStream/OutpuptStream系</li>
<li> 文字(char)単位：Reader/Write系<ul><li> InputStream/OutputStream系のインスタンスをコンストラクタに渡す場合が多い。</li>
<li> 文字符号化方式(encoding schema)を指定できる場合が多い。</li>
<li> 出力処理のイメージとしては、文字(char)を文字符号化方式でバイトデータに変換し、コンストラクタで渡されたOutputStream系に渡すイメージ。入力処理はその逆。<ul><li> Javaは文字をUnicodeでcharやString型に保存するので、外部との入出力でバイトデータと変換するときは文字符号化方式の指定が必要。</li>
<li> 文字符号化方式の指定が不要な場合は、システムのデフォルトの方式を使う場合が多い。</li></ul></li>
<li> あくまでも「１文字(char/int)」が入出力の単位。実用上は「文字列(String)」単位で扱うことが多く、後述のBufferedReaderやPrintWriteを使うと便利。</li></ul></li></ul>

<p class="paragraph">
自分なりのイメージとしては、バイト単位の入出力機能がまずベースとしてあり、その上に文字符号化方式と組み合わせることで文字単位の入出力機能が存在すると考えると分かりやすい。
<br />
</p>

<p class="paragraph">
参考資料：
<br />
</p>
<ul><li> Java 入門 | I/O Streams<ul><li> <a class="externallink" href="http://nextindex.jp/java/IO/index.html" target="_blank">http://nextindex.jp/java/IO/index.html</a></li></ul></li>
<li> &quot;JDK 6 ドキュメント&quot; &gt; &quot;機能リファレンスガイド&quot; &gt; &quot;基本ライブラリ&quot; &gt; &quot;その他のパッケージ&quot; &gt; &quot;I/O&quot; &gt; &quot;拡張&quot; &gt; &quot;以前の拡張機能&quot; &gt; &quot;文字ストリーム (JDKTM 1.1 から導入)&quot;<ul><li> <a class="externallink" href="http://java.sun.com/javase/ja/6/docs/ja/technotes/guides/io/io.html" target="_blank">http://java.sun.com/javase/ja/6/docs/ja/technotes/guides/io/io.html</a></li></ul></li>
<li> JDK 6 I/O 関連 API &amp; 開発者ガイド<ul><li> <a class="externallink" href="http://java.sun.com/javase/ja/6/docs/ja/technotes/guides/io/index.html" target="_blank">http://java.sun.com/javase/ja/6/docs/ja/technotes/guides/io/index.html</a></li></ul></li>
<li> Lesson: Basic I/O (The Java(TM) Tutorials &gt; Essential Classes)<ul><li> <a class="externallink" href="http://download.oracle.com/javase/tutorial/essential/io/index.html" target="_blank">http://download.oracle.com/javase/tutorial/essential/io/index.html</a></li></ul></li></ul>

<h3 id="idb0c877">バイト単位の入出力(InputStream/OutputStream系)</h3>

<dl>
<dt> 入力(InputStream) </dt>
<dd>
<p class="paragraph">
java.io.InputStream が抽象クラスとして提供されている。これをインターフェイスとして、各種実装クラスが派生している。
<br />
</p>
<pre>java.io.InputStream
--&gt; java.io.FilterInputStream : フィルタ処理向けラッパークラス
    --&gt; java.io.BufferedInputStream : 内部バッファによる効率化を図る
    --&gt; java.io.DataInputStream : プリミティブ型を読むときに使う
--&gt; java.io.FileInputStream : ファイルから読むときに使う
--&gt; java.io.ByteArrayInputStream : 既存のbyte配列を入力ソースにする
</pre>

<p class="paragraph">
FilterInputStreamはコンストラクタで渡されたInputStreamのインスタンスを入力ソースに使う。
<br />
例えばファイルを入力ソースとして、内部バッファによる効率化を図るときは次のように組み合わせる。
<br />
</p>
<pre>new BufferedInputStream(new FileInputStream(&quot;foo/bar.dat&quot;));
</pre></dd>
<dt> 出力(OutputStream) </dt>
<dd>
<p class="paragraph">
java.io.OutputStream が抽象クラスとして提供されている。これをインターフェイスとして、各種実装クラスが派生している。
<br />
</p>
<pre>java.io.OutputStream
--&gt; java.io.FilterOutputStream : フィルタ処理向けラッパークラス
    --&gt; java.io.BufferedOutputStream : 内部バッファによる効率化を図る
    --&gt; java.io.DataOutputStream : プリミティブ型を書くときに使う
--&gt; java.io.FileOutputStream : ファイルに書くときに使う
--&gt; java.io.ByteArrayOutputStream : 自動拡張するbyte配列を出力先にする
</pre>

<p class="paragraph">
FilterOutputStreamはコンストラクタで渡されたOutputStreamのインスタンスを出力先に使う。
<br />
例えばファイルを出力先として、内部バッファによる効率化を図るときは次のように組み合わせる。
<br />
</p>
<pre>new BufferedOutputStream(new FileOutputStream(&quot;foo/bar.dat&quot;));
</pre></dd>
</dl>

<p class="paragraph">
多くの参考書やWeb資料ではBufferedInput/OutputStreamと組み合わせているが、原理的には直接FileInput/OutputStreamを使っても問題ない。
<br />
</p>

<h3 id="id96fe02">文字単位の入出力(Reader/Writer系)</h3>

<dl>
<dt> 入力(Reader) </dt>
<dd>
<p class="paragraph">
java.io.Reader が抽象クラスとして提供されている。これをインターフェイスとして、各種実装クラスが派生している。
<br />
</p>
<pre>java.io.Reader
--&gt; java.io.BufferedReader : 他のReaderインスタンスをラップし、内部バッファによる効率化を図る
--&gt; java.io.InputStreamReader : InputStreamインスタンスをラップする
    --&gt; java.io.FileReader : テキストファイル読み込み用の簡易クラス
</pre>

<p class="paragraph">
ポイントとなるのがInputStreamReaderで、これによりバイト単位のInputStreamを文字単位のReaderに変換できる。コンストラクタに文字符号化方式を指定することができる。
<br />
</p>
<pre>例：
/* システムのデフォルトの文字符号化方式を使う */
InputStreamReader(InputStream in);

/* 文字符号化方式をjava.nio.charset.Charsetで指定する */
InputStreamReader(InputStream in, java.nio.charset.Charset cs);
</pre>
<p class="paragraph">
実用上はInputStreamReaderをBufferedReaderでラップし、BufferedReaderのreadLine()により文字列(String)単位でテキストを読み込む使い方が多い。
<br />
</p>
<pre>new BufferedReader(new InputStreamReader(new FileInputStream(&quot;foo/bar.txt&quot;)))
</pre>
<p class="paragraph">
個人的には、BufferedInputStreamまで挟むのはやり過ぎだと思う。
<br />
</p>
<pre>/* 多分やり過ぎ */
new BufferedReader(
    new InputStreamReader(
        new BufferedInputStream(
            new FileInputStream(&quot;foo/bar.txt&quot;)
        )
    )
)
</pre>

<p class="paragraph">
readLine()はBufferedReader独自のメソッド。readLine()を使いたい場合、コンストラクタを受けるインスタンスの型は、インターフェイスであるReaderではなく実装クラスであるBufferedReaderにする必要がある。
<br />
</p>
<pre>Reader r = new BufferedReader(...);
String line = r.readLine(); /* コンパイルエラー : ReaderクラスにはreadLine()が未定義 */
→
BufferedReader br = new BufferedReader(...);
String line = br.readLine();
</pre></dd>
<dt> 出力(Writer) </dt>
<dd>
<p class="paragraph">
java.io.Writer が抽象クラスとして提供されている。これをインターフェイスとして、各種実装クラスが派生している。
<br />
</p>
<pre>java.io.Writer
--&gt; java.io.BufferedWriter : 他のWriterインスタンスをラップし、内部バッファによる効率化を図る
--&gt; java.io.OutputStreamWriter : OutputStreamインスタンスをラップする
    --&gt; java.io.FileWriter : テキストファイル書き込み用の簡易クラス
</pre>

<p class="paragraph">
ポイントとなるのがOutputStreamWriterで、これによりバイト単位のOutputStreamを文字単位のWriterに変換できる。コンストラクタによる文字符号化方式などはInputStreamReaderと同様。
<br />
実用上はOutputStreamWriterをBufferedWriterでラップし、さらに後述のPrintWriterでラップする使い方が多い。
<br />
</p>

<p class="paragraph">
JavaDocのサンプルを少し改変：
<br />
</p>
<pre>PrintWriter out = new PrintWriter(
    new BufferedWriter(
        new OutputStreamWriter(
            new FileOutputStream(&quot;foo/bar.txt&quot;)
        )
    )
);
</pre>

<p class="paragraph">
readLine()と同様、PrintWriter独自の便利メソッドを使うため、コンストラクタを受けるインスタンスの型は、インターフェイスであるWriterではなく実装クラスであるPrintWriterにしている。
<br />
</p></dd>
</dl>

<p class="paragraph">
Reader/Writerが使われるのは大抵、外部データとの入出力処理である。
<br />
そのため、殆どのケースでInputStreamReader/OutputStreamWriterによる「バイト単位＜＞文字単位」変換処理が必要となる。
<br />
ファイルからの入出力を扱う場合は、FileReader/FileWriterがInputStreamReader/OutputStreamWriter不要の簡易クラスとして提供されている。ただし文字符号化方式がシステムのデフォルトに固定されるため、それ以外の文字符号化方式を使ったテキストファイルを使う場面には向いていない。
<br />
</p>

<p class="paragraph">
バイト単位と同様、原理的にはBufferedReader/Writerを挟まなくても使える。ただし、read/writeするたびにバイト＜＞文字変換が発生するため、効率が悪い。BufferedReader/BufferedWriterを使えば内部バッファでまとめて変換してくれるので効率的。特に理由がなければ、BufferedReader/BufferedWriterを組み合わせることになる。
<br />
</p>

<h3 id="idac9298">文字列(行)単位出力の便利クラス(PrintWriter/PrintStream)</h3>

<p class="paragraph">
プリミティブ型やインスタンスを文字列に変換して出力してくれる便利クラス：
<br />
</p>
<pre>java.io.PrintWriter : 任意の文字符号化方式と組み合わせられる
java.io.PrintStream : システムのデフォルトの文字符号化方式に固定される
</pre>

<p class="paragraph">
print()が改行なし、println()が改行付き。テキスト出力に便利で、前述のようにBufferedWriterをラップして使ったりする。
<br />
</p>

<dl>
<dt> PrintStream/PrintWriterのどちらを使えば良いか？ </dt>
<dd>PrintStreamは主にデバッグ用途で使われ、System.err, System.out で使われている。通常はPrintWriterを使えば良い。</dd>
</dl>

<h3 id="id5a73fc">トークン単位の読み込み(構文解析用)</h3>

<p class="paragraph">
java.io.StreamTokenizerのJavaDocを参照。
<br />
</p>

<h3 id="idc86b98">標準入出力と外部プロセスの起動</h3>

<p class="paragraph">
標準入出力：
<br />
</p>
<pre>System.in  : java.io.InputStream
System.out : java.io.PrintStream
System.err : java.io.PrintStream
</pre>

<p class="paragraph">
外部プロセスの起動：
<br />
</p>
<ul><li> java.lang.Runtimeクラスのexec()メソッドファミリーを使う。</li>
<li> Runtimeは直接インスタンスを生成できない。getRuntime()により取得する。</li>
<li> exec()メソッドでは実行ファイルと引数、環境変数、作業ディレクトリを指定できる。<ul><li> 環境変数と作業ディレクトリは省略できる。</li>
<li> 環境変数は&quot;KEY=VALUE&quot;形式の文字列の配列で指定する。</li></ul></li>
<li> exec()メソッドの戻り値は java.lang.Process クラスのインスタンス。</li></ul>

<p class="paragraph">
起動した外部プロセスの標準入出力との対話：
<br />
</p>
<dl>
<dt> Process#getOutputStream() </dt>
<dd>外部プロセスの標準入力 = 呼び出し側から見ればwrite先となるので、OutputStreamが返される。</dd>
<dt> Process#getInputStream() </dt>
<dd>外部プロセスの標準出力 = 呼び出し側から見ればread元となるので、InputStreamが返される。</dd>
<dt> Process#getErrorStream() </dt>
<dd>外部プロセスの標準エラー出力 = 呼び出し側から見ればread元となるので、InputStreamが返される。</dd>
</dl>

<p class="paragraph">
JDK1.5以上の場合、環境変数をKey/ValueのMapで指定できるなど、使いやすくラップしてくれるProcessBuilderクラスが利用出来る。
<br />
</p>

<h3 id="id7992b9">サンプル</h3>

<p class="paragraph">
バイト単位・文字単位・文字列単位の入出力サンプルと、FilterInput/OutputStreamを使った16進ダンプのサンプル。
<br />
</p>

<h4 id="id11d10d">バイト単位・文字単位・文字列単位の入出力サンプル</h4>

<p class="paragraph">
Foo.java:
<br />
</p>
<div class="hl-main"><pre><span class="hl-reserved">import</span><span class="hl-code"> </span><span class="hl-identifier">java</span><span class="hl-code">.</span><span class="hl-identifier">io</span><span class="hl-code">.*;
</span><span class="hl-reserved">import</span><span class="hl-code"> </span><span class="hl-identifier">java</span><span class="hl-code">.</span><span class="hl-identifier">nio</span><span class="hl-code">.*;
 
</span><span class="hl-reserved">public</span><span class="hl-code"> </span><span class="hl-reserved">class</span><span class="hl-code"> </span><span class="hl-identifier">Foo</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
    </span><span class="hl-comment">//</span><span class="hl-comment"> バイト(byte)単位の入出力例</span><span class="hl-comment"></span><span class="hl-code">
    </span><span >static</span><span class="hl-code"> </span><span >void</span><span class="hl-code"> </span><span class="hl-identifier">byte_io</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-reserved">throws</span><span class="hl-code"> </span><span class="hl-identifier">Exception</span><span class="hl-code">
    </span><span class="hl-brackets">{</span><span class="hl-code">
        </span><span >byte</span><span class="hl-brackets">[</span><span class="hl-brackets">]</span><span class="hl-code"> </span><span class="hl-identifier">data</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span >byte</span><span class="hl-brackets">[</span><span class="hl-number">10</span><span class="hl-brackets">]</span><span class="hl-code">;
        </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">len</span><span class="hl-code"> = </span><span class="hl-number">0</span><span class="hl-code">;
        </span><span class="hl-identifier">InputStream</span><span class="hl-code"> </span><span class="hl-identifier">is</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">BufferedInputStream</span><span class="hl-brackets">(</span><span class="hl-code">
                </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">FileInputStream</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">test.dat</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">OutputStream</span><span class="hl-code"> </span><span class="hl-identifier">os</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">BufferedOutputStream</span><span class="hl-brackets">(</span><span class="hl-code">
                </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">FileOutputStream</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">test2.dat</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
 
        </span><span class="hl-comment">//</span><span class="hl-comment"> サンプルなので、コピーするだけ。</span><span class="hl-comment"></span><span class="hl-code">
        </span><span class="hl-reserved">while</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-code">-</span><span class="hl-number">1</span><span class="hl-code"> != </span><span class="hl-brackets">(</span><span class="hl-identifier">len</span><span class="hl-code"> = </span><span class="hl-identifier">is</span><span class="hl-code">.</span><span class="hl-identifier">read</span><span class="hl-brackets">(</span><span class="hl-identifier">data</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
            </span><span class="hl-identifier">os</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-identifier">data</span><span class="hl-code">, </span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-identifier">len</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">
 
        </span><span class="hl-identifier">is</span><span class="hl-code">.</span><span class="hl-identifier">close</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">os</span><span class="hl-code">.</span><span class="hl-identifier">close</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">
 
    </span><span class="hl-comment">//</span><span class="hl-comment"> １文字(char)単位の入出力例</span><span class="hl-comment"></span><span class="hl-code">
    </span><span >static</span><span class="hl-code"> </span><span >void</span><span class="hl-code"> </span><span class="hl-identifier">char_io</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-reserved">throws</span><span class="hl-code"> </span><span class="hl-identifier">Exception</span><span class="hl-code">
    </span><span class="hl-brackets">{</span><span class="hl-code">
        </span><span >char</span><span class="hl-brackets">[</span><span class="hl-brackets">]</span><span class="hl-code"> </span><span class="hl-identifier">data</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span >char</span><span class="hl-brackets">[</span><span class="hl-number">10</span><span class="hl-brackets">]</span><span class="hl-code">;
        </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">len</span><span class="hl-code"> = </span><span class="hl-number">0</span><span class="hl-code">;
        </span><span class="hl-identifier">Reader</span><span class="hl-code"> </span><span class="hl-identifier">r</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">BufferedReader</span><span class="hl-brackets">(</span><span class="hl-code">
                </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">InputStreamReader</span><span class="hl-brackets">(</span><span class="hl-code">
                    </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">FileInputStream</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">test.txt</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">,
                    </span><span class="hl-quotes">&quot;</span><span class="hl-string">Windows-31J</span><span class="hl-quotes">&quot;</span><span class="hl-code">
                    </span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">Writer</span><span class="hl-code"> </span><span class="hl-identifier">w</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">BufferedWriter</span><span class="hl-brackets">(</span><span class="hl-code">
                </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">OutputStreamWriter</span><span class="hl-brackets">(</span><span class="hl-code">
                    </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">FileOutputStream</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">test2.txt</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">,
                    </span><span class="hl-quotes">&quot;</span><span class="hl-string">UTF-8</span><span class="hl-quotes">&quot;</span><span class="hl-code">
                    </span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
 
        </span><span class="hl-comment">//</span><span class="hl-comment"> サンプルなので、コピーするだけ。</span><span class="hl-comment"></span><span class="hl-code">
        </span><span class="hl-reserved">while</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-code">-</span><span class="hl-number">1</span><span class="hl-code"> != </span><span class="hl-brackets">(</span><span class="hl-identifier">len</span><span class="hl-code"> = </span><span class="hl-identifier">r</span><span class="hl-code">.</span><span class="hl-identifier">read</span><span class="hl-brackets">(</span><span class="hl-identifier">data</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
            </span><span class="hl-identifier">w</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-identifier">data</span><span class="hl-code">, </span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-identifier">len</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">
 
        </span><span class="hl-identifier">r</span><span class="hl-code">.</span><span class="hl-identifier">close</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">w</span><span class="hl-code">.</span><span class="hl-identifier">close</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">
 
    </span><span class="hl-comment">//</span><span class="hl-comment"> 文字列(String)単位の入出力例</span><span class="hl-comment"></span><span class="hl-code">
    </span><span >static</span><span class="hl-code"> </span><span >void</span><span class="hl-code"> </span><span class="hl-identifier">line_text_io</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-reserved">throws</span><span class="hl-code"> </span><span class="hl-identifier">Exception</span><span class="hl-code">
    </span><span class="hl-brackets">{</span><span class="hl-code">
        </span><span class="hl-identifier">BufferedReader</span><span class="hl-code"> </span><span class="hl-identifier">r</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">BufferedReader</span><span class="hl-brackets">(</span><span class="hl-code">
                </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">InputStreamReader</span><span class="hl-brackets">(</span><span class="hl-code">
                    </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">FileInputStream</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">line.txt</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">,
                    </span><span class="hl-quotes">&quot;</span><span class="hl-string">Windows-31J</span><span class="hl-quotes">&quot;</span><span class="hl-code">
                    </span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">PrintWriter</span><span class="hl-code"> </span><span class="hl-identifier">w</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">PrintWriter</span><span class="hl-brackets">(</span><span class="hl-code">
                </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">BufferedWriter</span><span class="hl-brackets">(</span><span class="hl-code">
                    </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">OutputStreamWriter</span><span class="hl-brackets">(</span><span class="hl-code">
                        </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">FileOutputStream</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">line2.txt</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">,
                        </span><span class="hl-quotes">&quot;</span><span class="hl-string">UTF-8</span><span class="hl-quotes">&quot;</span><span class="hl-code">
                        </span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
 
        </span><span class="hl-comment">//</span><span class="hl-comment"> サンプルなので、コピーするだけ。</span><span class="hl-comment"></span><span class="hl-code">
        </span><span class="hl-identifier">String</span><span class="hl-code"> </span><span class="hl-identifier">line</span><span class="hl-code">;
        </span><span class="hl-reserved">while</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-reserved">null</span><span class="hl-code"> != </span><span class="hl-brackets">(</span><span class="hl-identifier">line</span><span class="hl-code"> = </span><span class="hl-identifier">r</span><span class="hl-code">.</span><span class="hl-identifier">readLine</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
            </span><span class="hl-identifier">w</span><span class="hl-code">.</span><span class="hl-identifier">println</span><span class="hl-brackets">(</span><span class="hl-identifier">line</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">
        </span><span class="hl-identifier">r</span><span class="hl-code">.</span><span class="hl-identifier">close</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">w</span><span class="hl-code">.</span><span class="hl-identifier">close</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">
 
    </span><span class="hl-reserved">public</span><span class="hl-code"> </span><span >static</span><span class="hl-code"> </span><span >void</span><span class="hl-code"> </span><span class="hl-identifier">main</span><span class="hl-brackets">(</span><span class="hl-identifier">String</span><span class="hl-code"> </span><span class="hl-identifier">args</span><span class="hl-brackets">[</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-reserved">throws</span><span class="hl-code"> </span><span class="hl-identifier">Exception</span><span class="hl-code">
    </span><span class="hl-brackets">{</span><span class="hl-code">
        </span><span class="hl-identifier">byte_io</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">char_io</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">line_text_io</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-brackets">}</span></pre></div>

<p class="paragraph">
実行結果は省略。
<br />
</p>

<h4 id="idb0d21e">FilterInput/OutputStreamを使った16進ダンプのサンプル</h4>

<p class="paragraph">
FilterInput/OutputStreamの派生クラスで、read()/write()に渡されたデータを16進ダンプする。
<br />
FileInput/OutputStreamをラップすることで、ファイルから読み込んだ直後と、書きこむ直前のバイナリデータを確認できる。今回はFilterInput/OutputStreamからの派生にしたが、BufferedInput/OutputStreamからの派生でもよいだろう。
<br />
ただし、このサンプルはラップが多段になり「やり過ぎ」とも言える。効率面で問題になる可能性がある。実際に使うのであれば、デバッグ用であることを明示するか、直接FileInput/OutputStreamから派生させてラップ段数を節約するなど工夫が必要。
<br />
</p>

<p class="paragraph">
Bar.java:
<br />
</p>
<div class="hl-main"><pre><span class="hl-reserved">import</span><span class="hl-code"> </span><span class="hl-identifier">java</span><span class="hl-code">.</span><span class="hl-identifier">io</span><span class="hl-code">.*;
</span><span class="hl-reserved">import</span><span class="hl-code"> </span><span class="hl-identifier">java</span><span class="hl-code">.</span><span class="hl-identifier">nio</span><span class="hl-code">.*;
 
</span><span class="hl-comment">//</span><span class="hl-comment"> InputStreamのread()にインターセプトして16進ダンプ</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-reserved">class</span><span class="hl-code"> </span><span class="hl-identifier">HexDumpFilterInputStream</span><span class="hl-code"> </span><span class="hl-reserved">extends</span><span class="hl-code"> </span><span class="hl-identifier">FilterInputStream</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
    </span><span class="hl-reserved">public</span><span class="hl-code"> </span><span class="hl-identifier">HexDumpFilterInputStream</span><span class="hl-brackets">(</span><span class="hl-identifier">InputStream</span><span class="hl-code"> </span><span class="hl-identifier">in</span><span class="hl-brackets">)</span><span class="hl-code">
    </span><span class="hl-brackets">{</span><span class="hl-code">
        </span><span class="hl-reserved">super</span><span class="hl-brackets">(</span><span class="hl-identifier">in</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">
 
    @</span><span class="hl-identifier">Override</span><span class="hl-code">
    </span><span class="hl-reserved">public</span><span class="hl-code"> </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">read</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-reserved">throws</span><span class="hl-code"> </span><span class="hl-identifier">IOException</span><span class="hl-code">
    </span><span class="hl-brackets">{</span><span class="hl-code">
        </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">r</span><span class="hl-code"> = </span><span class="hl-reserved">super</span><span class="hl-code">.</span><span class="hl-identifier">read</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">System</span><span class="hl-code">.</span><span class="hl-identifier">out</span><span class="hl-code">.</span><span class="hl-identifier">format</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">read1() : 0x%02X</span><span class="hl-special">\n</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">r</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">r</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">
 
    @</span><span class="hl-identifier">Override</span><span class="hl-code">
    </span><span class="hl-reserved">public</span><span class="hl-code"> </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">read</span><span class="hl-brackets">(</span><span >byte</span><span class="hl-brackets">[</span><span class="hl-brackets">]</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-reserved">throws</span><span class="hl-code"> </span><span class="hl-identifier">IOException</span><span class="hl-code">
    </span><span class="hl-brackets">{</span><span class="hl-code">
        </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">r</span><span class="hl-code"> = </span><span class="hl-reserved">super</span><span class="hl-code">.</span><span class="hl-identifier">read</span><span class="hl-brackets">(</span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">System</span><span class="hl-code">.</span><span class="hl-identifier">out</span><span class="hl-code">.</span><span class="hl-identifier">print</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">read2() : </span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">for</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span >byte</span><span class="hl-code"> </span><span class="hl-identifier">d</span><span class="hl-code"> : </span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
            </span><span class="hl-identifier">System</span><span class="hl-code">.</span><span class="hl-identifier">out</span><span class="hl-code">.</span><span class="hl-identifier">format</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">0x%02X </span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">d</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">
        </span><span class="hl-identifier">System</span><span class="hl-code">.</span><span class="hl-identifier">out</span><span class="hl-code">.</span><span class="hl-identifier">print</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-special">\n</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">r</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">
 
    @</span><span class="hl-identifier">Override</span><span class="hl-code">
    </span><span class="hl-reserved">public</span><span class="hl-code"> </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">read</span><span class="hl-brackets">(</span><span >byte</span><span class="hl-brackets">[</span><span class="hl-brackets">]</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">off</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">len</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-reserved">throws</span><span class="hl-code"> </span><span class="hl-identifier">IOException</span><span class="hl-code">
    </span><span class="hl-brackets">{</span><span class="hl-code">
        </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">r</span><span class="hl-code"> = </span><span class="hl-reserved">super</span><span class="hl-code">.</span><span class="hl-identifier">read</span><span class="hl-brackets">(</span><span class="hl-identifier">b</span><span class="hl-code">, </span><span class="hl-identifier">off</span><span class="hl-code">, </span><span class="hl-identifier">len</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">e</span><span class="hl-code"> = </span><span class="hl-identifier">off</span><span class="hl-code"> + </span><span class="hl-identifier">r</span><span class="hl-code">;
 
        </span><span class="hl-identifier">System</span><span class="hl-code">.</span><span class="hl-identifier">out</span><span class="hl-code">.</span><span class="hl-identifier">print</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">read3() : </span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">for</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">i</span><span class="hl-code"> = </span><span class="hl-identifier">off</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code"> &lt; </span><span class="hl-identifier">e</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">++</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
            </span><span class="hl-identifier">System</span><span class="hl-code">.</span><span class="hl-identifier">out</span><span class="hl-code">.</span><span class="hl-identifier">format</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">0x%02X </span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">b</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">
        </span><span class="hl-identifier">System</span><span class="hl-code">.</span><span class="hl-identifier">out</span><span class="hl-code">.</span><span class="hl-identifier">print</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-special">\n</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">r</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span class="hl-comment">//</span><span class="hl-comment"> OutputStreamのwrite()にインターセプトして16進ダンプ</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-reserved">class</span><span class="hl-code"> </span><span class="hl-identifier">HexDumpFilterOutputStream</span><span class="hl-code"> </span><span class="hl-reserved">extends</span><span class="hl-code"> </span><span class="hl-identifier">FilterOutputStream</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
    </span><span class="hl-reserved">public</span><span class="hl-code"> </span><span class="hl-identifier">HexDumpFilterOutputStream</span><span class="hl-brackets">(</span><span class="hl-identifier">OutputStream</span><span class="hl-code"> </span><span class="hl-identifier">out</span><span class="hl-brackets">)</span><span class="hl-code">
    </span><span class="hl-brackets">{</span><span class="hl-code">
        </span><span class="hl-reserved">super</span><span class="hl-brackets">(</span><span class="hl-identifier">out</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">
 
    @</span><span class="hl-identifier">Override</span><span class="hl-code">
    </span><span class="hl-reserved">public</span><span class="hl-code"> </span><span >void</span><span class="hl-code"> </span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-reserved">throws</span><span class="hl-code"> </span><span class="hl-identifier">IOException</span><span class="hl-code">
    </span><span class="hl-brackets">{</span><span class="hl-code">
        </span><span class="hl-identifier">System</span><span class="hl-code">.</span><span class="hl-identifier">out</span><span class="hl-code">.</span><span class="hl-identifier">format</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">write1() : 0x%02X</span><span class="hl-special">\n</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-brackets">(</span><span >byte</span><span class="hl-brackets">)</span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">super</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">
 
    @</span><span class="hl-identifier">Override</span><span class="hl-code">
    </span><span class="hl-reserved">public</span><span class="hl-code"> </span><span >void</span><span class="hl-code"> </span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span >byte</span><span class="hl-brackets">[</span><span class="hl-brackets">]</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-reserved">throws</span><span class="hl-code"> </span><span class="hl-identifier">IOException</span><span class="hl-code">
    </span><span class="hl-brackets">{</span><span class="hl-code">
        </span><span class="hl-identifier">System</span><span class="hl-code">.</span><span class="hl-identifier">out</span><span class="hl-code">.</span><span class="hl-identifier">print</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">write2() : </span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">for</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span >byte</span><span class="hl-code"> </span><span class="hl-identifier">d</span><span class="hl-code"> : </span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
            </span><span class="hl-identifier">System</span><span class="hl-code">.</span><span class="hl-identifier">out</span><span class="hl-code">.</span><span class="hl-identifier">format</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">0x%02X </span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">d</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">
        </span><span class="hl-identifier">System</span><span class="hl-code">.</span><span class="hl-identifier">out</span><span class="hl-code">.</span><span class="hl-identifier">print</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-special">\n</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">super</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">
 
    @</span><span class="hl-identifier">Override</span><span class="hl-code">
    </span><span class="hl-reserved">public</span><span class="hl-code"> </span><span >void</span><span class="hl-code"> </span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span >byte</span><span class="hl-brackets">[</span><span class="hl-brackets">]</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">off</span><span class="hl-code">, </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">len</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-reserved">throws</span><span class="hl-code"> </span><span class="hl-identifier">IOException</span><span class="hl-code">
    </span><span class="hl-brackets">{</span><span class="hl-code">
        </span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">e</span><span class="hl-code"> = </span><span class="hl-identifier">off</span><span class="hl-code"> + </span><span class="hl-identifier">len</span><span class="hl-code">;
        </span><span class="hl-identifier">System</span><span class="hl-code">.</span><span class="hl-identifier">out</span><span class="hl-code">.</span><span class="hl-identifier">print</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">write3() : </span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">for</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span >int</span><span class="hl-code"> </span><span class="hl-identifier">i</span><span class="hl-code"> = </span><span class="hl-identifier">off</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code"> &lt; </span><span class="hl-identifier">e</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">++</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
            </span><span class="hl-identifier">System</span><span class="hl-code">.</span><span class="hl-identifier">out</span><span class="hl-code">.</span><span class="hl-identifier">format</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">0x%02X </span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">b</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">
        </span><span class="hl-identifier">System</span><span class="hl-code">.</span><span class="hl-identifier">out</span><span class="hl-code">.</span><span class="hl-identifier">print</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-special">\n</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">super</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-identifier">b</span><span class="hl-code">, </span><span class="hl-identifier">off</span><span class="hl-code">, </span><span class="hl-identifier">len</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span class="hl-reserved">public</span><span class="hl-code"> </span><span class="hl-reserved">class</span><span class="hl-code"> </span><span class="hl-identifier">Bar</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
    </span><span class="hl-reserved">public</span><span class="hl-code"> </span><span >static</span><span class="hl-code"> </span><span >void</span><span class="hl-code"> </span><span class="hl-identifier">main</span><span class="hl-brackets">(</span><span class="hl-identifier">String</span><span class="hl-code"> </span><span class="hl-identifier">args</span><span class="hl-brackets">[</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-reserved">throws</span><span class="hl-code"> </span><span class="hl-identifier">Exception</span><span class="hl-code">
    </span><span class="hl-brackets">{</span><span class="hl-code">
        </span><span class="hl-identifier">BufferedReader</span><span class="hl-code"> </span><span class="hl-identifier">r</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">BufferedReader</span><span class="hl-brackets">(</span><span class="hl-code">
                </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">InputStreamReader</span><span class="hl-brackets">(</span><span class="hl-code">
                    </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">HexDumpFilterInputStream</span><span class="hl-brackets">(</span><span class="hl-code">
                        </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">FileInputStream</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">line.txt</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">
                        </span><span class="hl-brackets">)</span><span class="hl-code">,
                    </span><span class="hl-quotes">&quot;</span><span class="hl-string">Windows-31J</span><span class="hl-quotes">&quot;</span><span class="hl-code">
                    </span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">PrintWriter</span><span class="hl-code"> </span><span class="hl-identifier">w</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">PrintWriter</span><span class="hl-brackets">(</span><span class="hl-code">
                </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">BufferedWriter</span><span class="hl-brackets">(</span><span class="hl-code">
                    </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">OutputStreamWriter</span><span class="hl-brackets">(</span><span class="hl-code">
                        </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">HexDumpFilterOutputStream</span><span class="hl-brackets">(</span><span class="hl-code">
                            </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">FileOutputStream</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">line2.txt</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">
                            </span><span class="hl-brackets">)</span><span class="hl-code">,
                        </span><span class="hl-quotes">&quot;</span><span class="hl-string">UTF-8</span><span class="hl-quotes">&quot;</span><span class="hl-code">
                        </span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">String</span><span class="hl-code"> </span><span class="hl-identifier">line</span><span class="hl-code">;
        </span><span class="hl-reserved">while</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-reserved">null</span><span class="hl-code"> != </span><span class="hl-brackets">(</span><span class="hl-identifier">line</span><span class="hl-code"> = </span><span class="hl-identifier">r</span><span class="hl-code">.</span><span class="hl-identifier">readLine</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
            </span><span class="hl-identifier">w</span><span class="hl-code">.</span><span class="hl-identifier">println</span><span class="hl-brackets">(</span><span class="hl-identifier">line</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">
        </span><span class="hl-identifier">r</span><span class="hl-code">.</span><span class="hl-identifier">close</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">w</span><span class="hl-code">.</span><span class="hl-identifier">close</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-brackets">}</span></pre></div>

<p class="paragraph">
実行結果は省略。
<br />
</p>

<hr class="full_hr" />
<ul class="plugin_navi">
<li>[&nbsp;<a href="./view-1377.html" title="Java/HTTP Proxyとしてカスタマイズ可能なライブラリ参考メモ">Prev</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-1442.html" title="Java/IntelliJ IDEA/プラグイン参考メモ(2018-12時点調査段階)">Next</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-457.html" title="Java">Up</a>&nbsp;]</li>
<li>[&nbsp;<a href="./view-457.html" title="Java">Java</a>&nbsp;]</li>
</ul>
</div>

<div class="data_attrs_post">
original url: https://www.glamenv-septzen.net/view/882<br>
</div>

</div>
<!-- //data_main -->

</div>


</div>
<!-- /content-wrap end -->

<!-- footer start -->
<div id="footer">
Copyright &copy; 2007 - 2025 Masahiko Sakamoto(msakamoto-sf)<br>
License&nbsp;:&nbsp;<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a><br>
Contact&nbsp;:&nbsp;<a target="_blank" href="https://x.com/msakamoto_sf">x(twitter)</a> / <a target="_blank" href="https://github.com/msakamoto-sf/">github</a> / <a class="maillink" href="mailto:&#x73;&#x61;&#x6B;&#x61;&#x6D;&#x6F;&#x74;&#x6F;&#x2E;&#x67;&#x73;&#x79;&#x63;&#x2E;&#x33;&#x73;&#x40;&#x67;&#x6D;&#x61;&#x69;&#x6C;&#x2E;&#x63;&#x6F;&#x6D;">email</a><br>
--&nbsp;Beautiful Icons&nbsp;--<br />
<a href="http://www.famfamfam.com/lab/icons/silk/" target="_blank" title="Mark James Silk icon set 1.3">Mark James Silk icon set 1.3</a> by famfamfam<br />
<a href="http://www.pinvoke.com/" target="_blank" title="Fugue Icons">Fugue Icons</a> by Yusuke Kamiyamane<br />
</div>
<!-- /footer end -->

</div>
<!-- /body end -->

</body>
</html>