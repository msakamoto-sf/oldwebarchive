<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<TITLE>４．コンパイル動作の確認</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF>
<A HREF="ceta_setup.html">Ceta セットアップ手順書</A><BR><BR>
<BR>
<H2>４．コンパイル動作の確認</H2>
<BR>
このセクションでは「３．Ceta の各種設定」で登録した「LSIC-86」
「Borland C++ Compiler」のコンパイル動作を確認する方法について
説明します。<BR>
<BR>
<A HREF="#cs_4_1a">４−１Ａ．LSIC-86の確認</A><BR>
<A HREF="#cs_4_1b">４−１Ｂ．Borland C++ Compilerの確認</A><BR>
<BR>
<H4><A NAME="cs_4_1a">４−１Ａ．LSIC-86の確認</A></H4>
　まず、Ceta インストールフォルダの中にある「hello.c」を開いて下さい。
もしhello.cが無ければ新規作成をし、下に示すプログラムソースコードを打ち
込んで下さい。その後「名前を付けて保存」で、必ず拡張子「.c」を指定して
保存して下さい。LSIC-86は拡張子「.cpp」のファイル（一般にC++ソースコード）
はコンパイルできません（lcc: can't handleエラーメッセージが出ます）。<BR>
<B>要注意：LSIC-86は、ソースファイル名もDOS8.3形式にする必要があ
ることを思い出して下さい。もしCeta をProgram Filesなどのロングファイル
ネームを含んだフォルダ内にインストールした場合、hello.cをどこかDOS8.3
形式のフォルダ内に移動してから以下の動作確認を行って下さい。</B><BR>
<IMG SRC="img/hello_c.jpg"><BR><BR>
　「コマンド」メニューからLSIC-86のlcc.exeを登録したコマンド
メニュー（今回の例では「LSIC86」）をクリックして下さい。下のようなダイア
ログボックスが表示されます。「開始」ボタンをクリックして下さい。<BR>
<IMG SRC="img/lsic_cmd.jpg"><BR><BR>
　フォルダ、ディレクトリの設定ミスやソースコードのミスが無ければ下の
ようなメッセージがコンパイルメッセージ表示エリアに表示されます。<BR>
<IMG SRC="img/lsic_cmd_suc.jpg"><BR><BR>
　エクスプローラを開いて、hello.cのあるフォルダ（Ceta インストールフォルダ）
の中に下に示すように「Hello.exe」実行ファイルが新しく作られているはずです。<BR>
<IMG SRC="img/hello_exe.jpg"><BR><BR>
　Hello.exeをダブルクリックすると、下のようにDOSプログラムが起動します。<BR>
<IMG SRC="img/hello.jpg"><BR><BR>
　リターンキーを押せばプログラムが終了し、下のような画面になります。DOSプログラム
ウインドウの右上の「×」ボタンをクリックして、プログラムを終了して下さい。<BR>
<IMG SRC="img/hello_end.jpg"><BR>
<BR>
　LSIC-86はDOSコンパイラであることが影響して、主に8.3形式のファイル名制限
が原因でコンパイルが完了しないことがあります。以下に主なエラー状態と、その
主な原因と（有効であると思われる）対処法を解説します。<BR>
　<A HREF="dos_filename.html">DOS8.3形式のファイル名について(LSIC-86)</A>
に是非一度目を通していただくことをお薦めします。<BR>
<BR>
＜エラーその壱＞<BR>
<IMG SRC="img/lsic_err_01.jpg"><BR><BR>
原因：LSIC-86がシステムドライブにインストールされていない。<BR>
対処：LSIC-86をシステムドライブ（WindowsがインストールされているHDDで、
一般にC:ドライブ）にインストールして下さい。_lccや、環境変数の設定も
それに合わせて書き換えて下さい。<BR><BR>
＜エラーその弐＞<BR>
<IMG SRC="img/lsic_err_02.jpg"><BR><BR>
原因：PATH設定が間違っている。<BR>
対処：コマンドのPATH設定でWindowsロングファイル名が使われている可能性があります。
DOS8.3形式でPATH設定をし直して下さい。<BR><BR>
＜エラーその参＞<BR>
<IMG SRC="img/lsic_err_03.jpg"><BR><BR>
原因：コンパイル対象ファイル名がWindowsロングファイル名を用いている。<BR>
対処：LSIC-86はDOS8.3形式しか対応していません。また、コンパイル対象の
ソースコードファイル名がDOS8.3形式でも途中のフォルダ名にロングファイル名
が混じっている場合も同様です。<BR>
<BR>
　もし上の例以外のエラーメッセージが表示されたら、_lcc、PATH設定をもう一度
見直して下さい。-I、-Lオプションまでしっかり設定されているかどうか確認して下さい。
それでもなおエラーメッセージが出るなら、ソースコードを見直してみて下さい。
どこかに文法ミスがある可能性があります。<BR>
<BR>
　お疲れさまでした。以上でコンパイルに必要な全設定・確認が終了しました。
最後に<A HREF="cs_5.html">５．Ceta をより便利に使って頂くために。</A>
をぜひご一読下さい。Ceta のより使いやすい方法、Ceta の設定ファイルの
詳細をご案内いたします。<BR>

<H4><A NAME="cs_4_1b">４−１Ｂ．Borland C++ Compilerの確認</A></H4>
　まず、Ceta インストールフォルダの中にある「hello.c」を開いて下さい。
もしhello.cが無ければ新規作成をし、下に示すプログラムソースコードを打ち
込んで下さい。Borland C++ Compilerは拡張子が「.cpp」のファイル（一般に
C++プログラムソースコードファイル）もコンパイルできます。<BR>
<IMG SRC="img/hello_c.jpg"><BR><BR>
　保存した後、「コマンド」メニューからBorland C++ Compilerのbcc32.exeを登録したコマンド
メニュー（今回の例では「BCC32(for DOS)」）をクリックして下さい。下のようなダイア
ログボックスが表示されます。「開始」ボタンをクリックして下さい。<BR>
<IMG SRC="img/bcc_cmd.jpg"><BR><BR>
　フォルダ、ディレクトリの設定ミスやソースコードのミスが無ければ下の
ようなメッセージがコンパイルメッセージ表示エリアに表示されます。<BR>
<IMG SRC="img/bcc_cmd_suc.jpg"><BR><BR>
　エクスプローラを開いて、hello.cのあるフォルダ（Ceta インストールフォルダ）
の中に下に示すように「Hello.exe」実行ファイルが新しく作られているはずです。
（下の表示と違い、ファイルサイズは53KB近くになります。）<BR>
<IMG SRC="img/hello_exe.jpg"><BR><BR>
　Hello.exeをダブルクリックすると、下のようにDOSプログラムが起動します。<BR>
<IMG SRC="img/hello.jpg"><BR><BR>
　リターンキーを押せばプログラムが終了し、DOSプロンプトウインドウも自動的に
閉じます。<BR>
<BR>
　Borland C++ Compiler はWindowsロングファイル名に対応しているのでbcc32.cfg や
ilink32.cfg、コマンドのPATH設定でつまづくことは少ないと思います。ダブル
クォーテーション「"」でフォルダ名の両端を囲み、複数フォルダを指定するときは
フォルダとフォルダの間をセミコロン「；」でつなぐことを忘れないで下さい。<BR>
＜例＞・・・インクルードファイルに独自のヘッダーファイルのあるフォルダも指定する。<BR>
(bcc32.cfg)<BR>
-I"c:¥your_bcb_directory¥include";"d:¥data_dir¥header_dir"<BR><BR>
　エラーが発生したら、bcc32.cfg ilink32.cfg コマンドのPATH設定を見直して下さい。
もしそれでも直らなかったらソースコードに文法上のミスがある可能性があります。<BR>
<BR>
　お疲れさまでした。以上でコンパイルに必要な全設定・確認が終了しました。
最後に<A HREF="cs_5.html">５．Ceta をより便利に使って頂くために。</A>
をぜひご一読下さい。Ceta のより使いやすい方法、Ceta の設定ファイルの
詳細をご案内いたします。<BR>
<BR>
<A HREF="cs_5.html">５．Ceta をより便利に使って頂くために。</A>へ進む<BR>
</BODY>
</HTML>
