<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>「QKC - Quick KANJI code Converter」を利用してShift_JIS←→euc-jp変換にこき使う。</title>
</head>
<body class=body>
<a href="../ceta_usage.html">Cetaを作者はどう使っているか。に戻る。</a><br>
<br>
　えー、というわけで。今回は「QKC - Quick KANJI code Converter」を使いまして、Shift_JISと
euc-jpの相互変換機能を追加してみよう、と言うわけです。<br>
　これによってCeta唯一の（？）泣き所でありました文字コードの変換機能が補完され、ます
ます訳の分からないエディタになること請け合いですね！<br>
<br>
<h2>１．QKCの入手</h2>
　まず、文字コード変換ソフトに関してですが。QKC以外にも、UNIX系列で非常によく使われている
NKFが存在します。NKFはWindows版のNKF32も存在し、これはこれで使いやすいと思うのですが。
ただ、Windowsで使う以上はGUIでも使えればいいな、というわけで、GUIが非常に使いやすく整理
されているのがQKCだったわけです。使っていただければ分かると思うのですが、QKCのGUIは
非常にシンプルで、「UNIX、Windows、Macのテキストファイルを変換する」のが非常に簡単
に出来るようになっています。<br>
　とりあえず入手先です。<br>
<a href="http://hp.vector.co.jp/authors/VA000501/" target=_blank>http://hp.vector.co.jp/authors/VA000501/</a><br>
<br>
　さて。QKCは普通はGUIとして使うのですが、気が利いたことにコマンドラインからも実行
できるんですよ。というわけで、Cetaではそれを利用して登録してみることにします。<br>
　QKCを入手するとzip圧縮がかかっていますので、適当な解凍ソフトで解凍します。<br>
　んで、出来たフォルダをC:¥Program Filesに突っ込んだ、としておきます。<br>
　（つまりQKCの実行ファイル本体QKCW.EXEはC:¥Program Files¥qkc311¥qkcw.exeに存在します。）<br>
　という過程で以下の手順を説明します。<br>
<br>
　QKC単体での使い方は、非常に詳細でわかりやすいヘルプがくっついてきてますし、実行してみれば
ヘルプを見ずとも、大体の使い方は分かってしまうようなGUIです。そーゆー訳でここではQKC単体
の使い方は説明しません。まあ、適当なテキストファイルをメモ帳とかで用意して、GUIでちょこちょこ
変換して遊んでみてください。<br>
<br>
<h2>２．Cetaへの登録</h2>
　んじゃあ、肝心のCetaへの登録を解説します。<br>
　まず、QKCの本体実行ファイルqkcw.exeをコマンドライン上で起動するには、/Bオプションを先頭に
持ってきます。（コマンドラインオプションの詳細はQKCのヘルプを参照）これによってGUIウインドウを
表示させずに、コマンドライン上で変換作業を完了できます。<br>
<br>
　んで、今回の登録では、変換に以下のオプションを使いました。<br>
<table border>
<tr><td>ファイルを上書きする</td><td>/V</td></tr>
<tr><td>Shift_JISに変換する</td><td>/S</td></tr>
<tr><td>改行コードをWindows用に変換する</td><td>/M</td></tr>
<tr><td>euc-jpに変換する</td><td>/E</td></tr>
<tr><td>改行コードをUNIX用に変換する</td><td>/U</td></tr>
</table>
<br>
　んで、結局実際の変換の時は以下に示すコマンドが実行されるようにすればいいわけです。<br>
<table border>
<tr><td>UNIX → Windows</td><td>qkcw.exe /B /V /M /S [変換するファイル]</td></tr>
<tr><td>Windows → UNIX</td><td>qkcw.exe /B /V /U /E [変換するファイル]</td></tr>
</table>
<br>
　注意点として、qkcのヘルプにもありますが<b>/Bオプションを必ず先頭に配置してください。</b><br>
　また、元のファイルの文字コードに関してはデフォルトで自動判別がされるので、
指定する必要はありません（一応元の文字コードを指定するオプションもありますが）。
　上記のことをふまえて、いよいよCetaに登録してみましょう。<br>
<br>
　まず、UNIX → Windows用を登録します。<br>
　登録名は「QKCW (E to S)」とでもしときます。<br>
　実行ファイルは参照ボタンでさくっと「qkcw.exe」を指定しまして。<br>
　オプションは「/B /V /M /S」となります。<br>
　環境変数は・・・うっかり何も指定せずにやってみたらそのまま通ってしまいました。
よって特に設定しなくてもちゃんと動きます。<br>
　結果のファイル出力のチェックは外しておいてください。<br>
<br>
　以上の設定で追加、OKで設定ファイルに書き込みます。<br>
　早速「コマンド」メニューを開けてみて、「QKCW (E to S)」の文字があるのを確認したらクリック。
設定がきちんと保存されているか確かめましょう。<br>
<br>
　次に、Windows → UNIX用を登録します。<br>
　登録名は「QKCW (S to E)」とでもしときます。<br>
　実行ファイルは参照ボタンでさくっと「qkcw.exe」を指定しまして。<br>
　オプションは「/B /V /U /E」となります。<br>
　環境変数は・・・うっかり何も指定せずにやってみたらそのまま通ってしまいました。
よって特に設定しなくてもちゃんと動きます。<br>
　結果のファイル出力のチェックは外しておいてください。<br>
<br>
　以上の設定で追加、OKで設定ファイルに書き込みます。<br>
　早速「コマンド」メニューを開けてみて、「QKCW (S to E)」の文字があるのを確認したらクリック。
設定がきちんと保存されているか確かめましょう。<br>
<br>
<h2>３．動作確認</h2>
　では・・・いよいよ変換をしてみます。「ファイル」「新規作成」で「test.txt」とでもして
新しくテキストファイルを作ります。全角文字とか半角文字を適当に交えて二、三行打ち込んで
上書き保存しておきます。<br>
　この時点でtest.txtはShift_JISなので、euc-jpに変換してみましょう。「コマンド」→「QKCW (S to E)」
を実行します。QKCのウインドウっぽいのが一瞬表示されれば変換は成功しているはずです。<br>
　でわでわ。早速euc-jpに変換できたかどうか確かめてみませう。Ceta自体はeuc-jpは文字化けして
しまいますので、「ファイル」→「更新(F5)」をしてみて文字化けしてくれれば正常に変換できた
証です。・・・如何ですか？<br>
　もし相変わらずきちんと表示されたままなら、ちゃんと変換されていない証拠です。オプションを
間違えてないか確認してみてください。<br>
<br>
　んでわ。きちんと文字化けしてくれたものとして、次はこれをShift_JISに戻してみましょう。
「コマンド」→「QKCW (E to S)」を実行します。んで、QKCが動いたっぽいのを確認したら再び
「ファイル」→「更新(F5)」をしてみましょう。<br>
　どうでしょう。ちゃんと元のテキストが表示されましたか？表示されれば、文字コードはShift_JIS
な訳ですから変換は成功です。相変わらず文字化けしたeuc-jpのままなら、オプションを間違えてないか
確認してみてください。<br>
<br>
<h2>４．感想</h2>
　如何でしょうか。Cetaの恐ろしさを改めて実感していただければ幸いです。<br>
　まあ・・・実際にeuc-jpのファイルを扱う際は、とりあえずCetaで開いて、いったんShift_JIS
に変換。必要な編集が終わればeuc-jpに再変換といったところでしょうか。んで、変換する際は
上書きされるわけですから、変換した後わざわざファイルメニューの上書き保存をする必要が無い。
というか、むしろeuc-jp状態のファイルを上書きしたら何かやばそう。<br>
　といった流れになるでしょうね。うー・・・秀○よりはちこっとめんどいかな？<br>
　まー、変換できないよりはましっつーことで。<br>
　QKCには他にもMac用の変換オプションとかもあるので、必要に応じていろいろ登録してい
ただければいいかな、と。あと今回は上書きしてしまっていましたが、それ無しにするのも
使い方の一つではあります。そん時は出力ファイル名を指定する必要がありますのでご注意を。<br>
<br>
　今回は結構実用的だったかな？<br>
　とうわけで、ほんじゃまたよろしくー。<br>
<br>
<a href="../ceta_usage.html">Cetaを作者はどう使っているか。に戻る。</a>
</body>
</html>